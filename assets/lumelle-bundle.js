var LumelleEmbed=function(e){"use strict";function t(e,t){for(var r=0;r<t.length;r++){const n=t[r];if("string"!=typeof n&&!Array.isArray(n))for(const t in n)if("default"!==t&&!(t in e)){const r=Object.getOwnPropertyDescriptor(n,t);r&&Object.defineProperty(e,t,r.get?r:{enumerable:!0,get:()=>n[t]})}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}function r(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function n(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if("function"==typeof t){var r=function e(){return this instanceof e?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(t){var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,n.get?n:{enumerable:!0,get:function(){return e[t]}})}),r}var i,s,a,o,l={exports:{}},c={},u={exports:{}},d={};function h(){if(i)return d;i=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function v(e,t,r){this.props=e,this.context=t,this.refs=m,this.updater=r||p}function y(){}function _(e,t,r){this.props=e,this.context=t,this.refs=m,this.updater=r||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var b=_.prototype=new y;b.constructor=_,g(b,v.prototype),b.isPureReactComponent=!0;var w=Array.isArray,x=Object.prototype.hasOwnProperty,k={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function S(t,r,n){var i,s={},a=null,o=null;if(null!=r)for(i in void 0!==r.ref&&(o=r.ref),void 0!==r.key&&(a=""+r.key),r)x.call(r,i)&&!E.hasOwnProperty(i)&&(s[i]=r[i]);var l=arguments.length-2;if(1===l)s.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(t&&t.defaultProps)for(i in l=t.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:e,type:t,key:a,ref:o,props:s,_owner:k.current}}function T(t){return"object"==typeof t&&null!==t&&t.$$typeof===e}var j=/\/+/g;function P(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function O(r,n,i,s,a){var o=typeof r;"undefined"!==o&&"boolean"!==o||(r=null);var l=!1;if(null===r)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(r.$$typeof){case e:case t:l=!0}}if(l)return a=a(l=r),r=""===s?"."+P(l,0):s,w(a)?(i="",null!=r&&(i=r.replace(j,"$&/")+"/"),O(a,n,i,"",function(e){return e})):null!=a&&(T(a)&&(a=function(t,r){return{$$typeof:e,type:t.type,key:r,ref:t.ref,props:t.props,_owner:t._owner}}(a,i+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(j,"$&/")+"/")+r)),n.push(a)),1;if(l=0,s=""===s?".":s+":",w(r))for(var c=0;c<r.length;c++){var u=s+P(o=r[c],c);l+=O(o,n,i,u,a)}else if(u=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=f&&e[f]||e["@@iterator"])?e:null}(r),"function"==typeof u)for(r=u.call(r),c=0;!(o=r.next()).done;)l+=O(o=o.value,n,i,u=s+P(o,c++),a);else if("object"===o)throw n=String(r),Error("Objects are not valid as a React child (found: "+("[object Object]"===n?"object with keys {"+Object.keys(r).join(", ")+"}":n)+"). If you meant to render a collection of children, use an array instead.");return l}function I(e,t,r){if(null==e)return e;var n=[],i=0;return O(e,n,"","",function(e){return t.call(r,e,i++)}),n}function N(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var C={current:null},R={transition:null},A={ReactCurrentDispatcher:C,ReactCurrentBatchConfig:R,ReactCurrentOwner:k};function $(){throw Error("act(...) is not supported in production builds of React.")}return d.Children={map:I,forEach:function(e,t,r){I(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return I(e,function(){t++}),t},toArray:function(e){return I(e,function(e){return e})||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},d.Component=v,d.Fragment=r,d.Profiler=s,d.PureComponent=_,d.StrictMode=n,d.Suspense=c,d.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=A,d.act=$,d.cloneElement=function(t,r,n){if(null==t)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=g({},t.props),s=t.key,a=t.ref,o=t._owner;if(null!=r){if(void 0!==r.ref&&(a=r.ref,o=k.current),void 0!==r.key&&(s=""+r.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in r)x.call(r,c)&&!E.hasOwnProperty(c)&&(i[c]=void 0===r[c]&&void 0!==l?l[c]:r[c])}var c=arguments.length-2;if(1===c)i.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:e,type:t.type,key:s,ref:a,props:i,_owner:o}},d.createContext=function(e){return(e={$$typeof:o,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},d.createElement=S,d.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},d.createRef=function(){return{current:null}},d.forwardRef=function(e){return{$$typeof:l,render:e}},d.isValidElement=T,d.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:N}},d.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},d.startTransition=function(e){var t=R.transition;R.transition={};try{e()}finally{R.transition=t}},d.unstable_act=$,d.useCallback=function(e,t){return C.current.useCallback(e,t)},d.useContext=function(e){return C.current.useContext(e)},d.useDebugValue=function(){},d.useDeferredValue=function(e){return C.current.useDeferredValue(e)},d.useEffect=function(e,t){return C.current.useEffect(e,t)},d.useId=function(){return C.current.useId()},d.useImperativeHandle=function(e,t,r){return C.current.useImperativeHandle(e,t,r)},d.useInsertionEffect=function(e,t){return C.current.useInsertionEffect(e,t)},d.useLayoutEffect=function(e,t){return C.current.useLayoutEffect(e,t)},d.useMemo=function(e,t){return C.current.useMemo(e,t)},d.useReducer=function(e,t,r){return C.current.useReducer(e,t,r)},d.useRef=function(e){return C.current.useRef(e)},d.useState=function(e){return C.current.useState(e)},d.useSyncExternalStore=function(e,t,r){return C.current.useSyncExternalStore(e,t,r)},d.useTransition=function(){return C.current.useTransition()},d.version="18.3.1",d}function f(){return s||(s=1,u.exports=h()),u.exports}
/**
	 * @license React
	 * react-jsx-runtime.production.min.js
	 *
	 * Copyright (c) Facebook, Inc. and its affiliates.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 */var p,g,m,v,y,_=(o||(o=1,l.exports=function(){if(a)return c;a=1;var e=f(),t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,i=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(e,r,a){var o,l={},c=null,u=null;for(o in void 0!==a&&(c=""+a),void 0!==r.key&&(c=""+r.key),void 0!==r.ref&&(u=r.ref),r)n.call(r,o)&&!s.hasOwnProperty(o)&&(l[o]=r[o]);if(e&&e.defaultProps)for(o in r=e.defaultProps)void 0===l[o]&&(l[o]=r[o]);return{$$typeof:t,type:e,key:c,ref:u,props:l,_owner:i.current}}return c.Fragment=r,c.jsx=o,c.jsxs=o,c}()),l.exports),b=f(),w={},x={exports:{}},k={},E={exports:{}},S={};function T(){return g||(g=1,E.exports=(p||(p=1,function(e){function t(e,t){var r=e.length;e.push(t);e:for(;0<r;){var n=r-1>>>1,s=e[n];if(!(0<i(s,t)))break e;e[n]=t,e[r]=s,r=n}}function r(e){return 0===e.length?null:e[0]}function n(e){if(0===e.length)return null;var t=e[0],r=e.pop();if(r!==t){e[0]=r;e:for(var n=0,s=e.length,a=s>>>1;n<a;){var o=2*(n+1)-1,l=e[o],c=o+1,u=e[c];if(0>i(l,r))c<s&&0>i(u,l)?(e[n]=u,e[c]=r,n=c):(e[n]=l,e[o]=r,n=o);else{if(!(c<s&&0>i(u,r)))break e;e[n]=u,e[c]=r,n=c}}}return t}function i(e,t){var r=e.sortIndex-t.sortIndex;return 0!==r?r:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var s=performance;e.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();e.unstable_now=function(){return a.now()-o}}var l=[],c=[],u=1,d=null,h=3,f=!1,p=!1,g=!1,m="function"==typeof setTimeout?setTimeout:null,v="function"==typeof clearTimeout?clearTimeout:null,y="undefined"!=typeof setImmediate?setImmediate:null;function _(e){for(var i=r(c);null!==i;){if(null===i.callback)n(c);else{if(!(i.startTime<=e))break;n(c),i.sortIndex=i.expirationTime,t(l,i)}i=r(c)}}function b(e){if(g=!1,_(e),!p)if(null!==r(l))p=!0,C(w);else{var t=r(c);null!==t&&R(b,t.startTime-e)}}function w(t,i){p=!1,g&&(g=!1,v(S),S=-1),f=!0;var s=h;try{for(_(i),d=r(l);null!==d&&(!(d.expirationTime>i)||t&&!P());){var a=d.callback;if("function"==typeof a){d.callback=null,h=d.priorityLevel;var o=a(d.expirationTime<=i);i=e.unstable_now(),"function"==typeof o?d.callback=o:d===r(l)&&n(l),_(i)}else n(l);d=r(l)}if(null!==d)var u=!0;else{var m=r(c);null!==m&&R(b,m.startTime-i),u=!1}return u}finally{d=null,h=s,f=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var x,k=!1,E=null,S=-1,T=5,j=-1;function P(){return!(e.unstable_now()-j<T)}function O(){if(null!==E){var t=e.unstable_now();j=t;var r=!0;try{r=E(!0,t)}finally{r?x():(k=!1,E=null)}}else k=!1}if("function"==typeof y)x=function(){y(O)};else if("undefined"!=typeof MessageChannel){var I=new MessageChannel,N=I.port2;I.port1.onmessage=O,x=function(){N.postMessage(null)}}else x=function(){m(O,0)};function C(e){E=e,k||(k=!0,x())}function R(t,r){S=m(function(){t(e.unstable_now())},r)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_continueExecution=function(){p||f||(p=!0,C(w))},e.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return r(l)},e.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var r=h;h=t;try{return e()}finally{h=r}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=h;h=e;try{return t()}finally{h=r}},e.unstable_scheduleCallback=function(n,i,s){var a=e.unstable_now();switch(s="object"==typeof s&&null!==s&&"number"==typeof(s=s.delay)&&0<s?a+s:a,n){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return n={id:u++,callback:i,priorityLevel:n,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>a?(n.sortIndex=s,t(c,n),null===r(l)&&n===r(c)&&(g?(v(S),S=-1):g=!0,R(b,s-a))):(n.sortIndex=o,t(l,n),p||f||(p=!0,C(w))),n},e.unstable_shouldYield=P,e.unstable_wrapCallback=function(e){var t=h;return function(){var r=h;h=t;try{return e.apply(this,arguments)}finally{h=r}}}}(S)),S)),E.exports}
/**
	 * @license React
	 * react-dom.production.min.js
	 *
	 * Copyright (c) Facebook, Inc. and its affiliates.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 */function j(){if(m)return k;m=1;var e=f(),t=T();function r(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,i={};function s(e,t){a(e,t),a(e+"Capture",t)}function a(e,t){for(i[e]=t,e=0;e<t.length;e++)n.add(t[e])}var o=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),l=Object.prototype.hasOwnProperty,c=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,u={},d={};function h(e,t,r,n,i,s,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var p={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){p[e]=new h(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];p[t]=new h(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){p[e]=new h(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){p[e]=new h(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){p[e]=new h(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){p[e]=new h(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){p[e]=new h(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){p[e]=new h(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){p[e]=new h(e,5,!1,e.toLowerCase(),null,!1,!1)});var g=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function y(e,t,r,n){var i=p.hasOwnProperty(t)?p[t]:null;(null!==i?0!==i.type:n||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,r,n){if(null==t||function(e,t,r,n){if(null!==r&&0===r.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!n&&(null!==r?!r.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,r,n))return!0;if(n)return!1;if(null!==r)switch(r.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,r,i,n)&&(r=null),n||null===i?function(e){return!!l.call(d,e)||!l.call(u,e)&&(c.test(e)?d[e]=!0:(u[e]=!0,!1))}(t)&&(null===r?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=null===r?3!==i.type&&"":r:(t=i.attributeName,n=i.attributeNamespace,null===r?e.removeAttribute(t):(r=3===(i=i.type)||4===i&&!0===r?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(g,v);p[t]=new h(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(g,v);p[t]=new h(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(g,v);p[t]=new h(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){p[e]=new h(e,1,!1,e.toLowerCase(),null,!1,!1)}),p.xlinkHref=new h("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){p[e]=new h(e,1,!1,e.toLowerCase(),null,!0,!0)});var _=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,b=Symbol.for("react.element"),w=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),j=Symbol.for("react.provider"),P=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),A=Symbol.for("react.offscreen"),$=Symbol.iterator;function L(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=$&&e[$]||e["@@iterator"])?e:null}var F,M=Object.assign;function D(e){if(void 0===F)try{throw Error()}catch(Ro){var t=Ro.stack.trim().match(/\n( *(at )?)/);F=t&&t[1]||""}return"\n"+F+e}var U=!1;function z(e,t){if(!e||U)return"";U=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(Po){var n=Po}Reflect.construct(e,[],t)}else{try{t.call()}catch(Po){n=Po}e.call(t.prototype)}else{try{throw Error()}catch(Po){n=Po}e()}}catch(Po){if(Po&&n&&"string"==typeof Po.stack){for(var i=Po.stack.split("\n"),s=n.stack.split("\n"),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(1!==a||1!==o)do{if(a--,0>--o||i[a]!==s[o]){var l="\n"+i[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=o);break}}}finally{U=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?D(e):""}function B(e){switch(e.tag){case 5:return D(e.type);case 16:return D("Lazy");case 13:return D("Suspense");case 19:return D("SuspenseList");case 0:case 2:case 15:return e=z(e.type,!1);case 11:return e=z(e.type.render,!1);case 1:return e=z(e.type,!0);default:return""}}function V(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case x:return"Fragment";case w:return"Portal";case S:return"Profiler";case E:return"StrictMode";case I:return"Suspense";case N:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case P:return(e.displayName||"Context")+".Consumer";case j:return(e._context.displayName||"Context")+".Provider";case O:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case C:return null!==(t=e.displayName||null)?t:V(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return V(e(t))}catch(Ro){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V(t);case 8:return t===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==r&&"function"==typeof r.get&&"function"==typeof r.set){var i=r.get,s=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){n=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=W(e)?e.checked?"true":"false":e.value),(e=n)!==r&&(t.setValue(e),!0)}function J(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(Uo){return e.body}}function Y(e,t){var r=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=r?r:e._wrapperState.initialChecked})}function Q(e,t){var r=null==t.defaultValue?"":t.defaultValue,n=null!=t.checked?t.checked:t.defaultChecked;r=H(null!=t.value?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&y(e,"checked",t,!1)}function Z(e,t){X(e,t);var r=H(t.value),n=t.type;if(null!=r)"number"===n?(0===r&&""===e.value||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if("submit"===n||"reset"===n)return void e.removeAttribute("value");t.hasOwnProperty("value")?te(e,t.type,r):t.hasOwnProperty("defaultValue")&&te(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function ee(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!("submit"!==n&&"reset"!==n||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}""!==(r=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==r&&(e.name=r)}function te(e,t,r){"number"===t&&J(e.ownerDocument)===e||(null==r?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var re=Array.isArray;function ne(e,t,r,n){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&n&&(e[r].defaultSelected=!0)}else{for(r=""+H(r),t=null,i=0;i<e.length;i++){if(e[i].value===r)return e[i].selected=!0,void(n&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function ie(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(r(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function se(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(r(92));if(re(n)){if(1<n.length)throw Error(r(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function ae(e,t){var r=H(t.value),n=H(t.defaultValue);null!=r&&((r=""+r)!==e.value&&(e.value=r),null==t.defaultValue&&e.defaultValue!==r&&(e.defaultValue=r)),null!=n&&(e.defaultValue=""+n)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function le(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ce(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?le(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ue,de=function(e){return"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,r,n,i){MSApp.execUnsafeLocalFunction(function(){return e(t,r)})}:e}(function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ue=ue||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ue.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function he(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&3===r.nodeType)return void(r.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ge(e,t,r){return null==t||"boolean"==typeof t||""===t?"":r||"number"!=typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function me(e,t){for(var r in e=e.style,t)if(t.hasOwnProperty(r)){var n=0===r.indexOf("--"),i=ge(r,t[r],n);"float"===r&&(r="cssFloat"),n?e.setProperty(r,i):e[r]=i}}Object.keys(fe).forEach(function(e){pe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]})});var ve=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(r(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(r(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(r(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(r(62))}}function _e(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var xe=null,ke=null,Ee=null;function Se(e){if(e=_i(e)){if("function"!=typeof xe)throw Error(r(280));var t=e.stateNode;t&&(t=wi(t),xe(e.stateNode,e.type,t))}}function Te(e){ke?Ee?Ee.push(e):Ee=[e]:ke=e}function je(){if(ke){var e=ke,t=Ee;if(Ee=ke=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Pe(e,t){return e(t)}function Oe(){}var Ie=!1;function Ne(e,t,r){if(Ie)return e(t,r);Ie=!0;try{return Pe(e,t,r)}finally{Ie=!1,(null!==ke||null!==Ee)&&(Oe(),je())}}function Ce(e,t){var n=e.stateNode;if(null===n)return null;var i=wi(n);if(null===i)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!i;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(r(231,t,typeof n));return n}var Re=!1;if(o)try{var Ae={};Object.defineProperty(Ae,"passive",{get:function(){Re=!0}}),window.addEventListener("test",Ae,Ae),window.removeEventListener("test",Ae,Ae)}catch(jo){Re=!1}function $e(e,t,r,n,i,s,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(r,c)}catch(Mo){this.onError(Mo)}}var Le=!1,Fe=null,Me=!1,De=null,Ue={onError:function(e){Le=!0,Fe=e}};function ze(e,t,r,n,i,s,a,o,l){Le=!1,Fe=null,$e.apply(Ue,arguments)}function Be(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{!!(4098&(t=e).flags)&&(r=t.return),e=t.return}while(e)}return 3===t.tag?r:null}function Ve(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function qe(e){if(Be(e)!==e)throw Error(r(188))}function He(e){return e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(r(188));return t!==e?null:e}for(var n=e,i=t;;){var s=n.return;if(null===s)break;var a=s.alternate;if(null===a){if(null!==(i=s.return)){n=i;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===n)return qe(s),e;if(a===i)return qe(s),t;a=a.sibling}throw Error(r(188))}if(n.return!==i.return)n=s,i=a;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,i=a;break}if(l===i){o=!0,i=s,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,i=s;break}if(l===i){o=!0,i=a,n=s;break}l=l.sibling}if(!o)throw Error(r(189))}}if(n.alternate!==i)throw Error(r(190))}if(3!==n.tag)throw Error(r(188));return n.stateNode.current===n?e:t}(e),null!==e?We(e):null}function We(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=We(e);if(null!==t)return t;e=e.sibling}return null}var Ge=t.unstable_scheduleCallback,Ke=t.unstable_cancelCallback,Je=t.unstable_shouldYield,Ye=t.unstable_requestPaint,Qe=t.unstable_now,Xe=t.unstable_getCurrentPriorityLevel,Ze=t.unstable_ImmediatePriority,et=t.unstable_UserBlockingPriority,tt=t.unstable_NormalPriority,rt=t.unstable_LowPriority,nt=t.unstable_IdlePriority,it=null,st=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var r=e.pendingLanes;if(0===r)return 0;var n=0,i=e.suspendedLanes,s=e.pingedLanes,a=268435455&r;if(0!==a){var o=a&~i;0!==o?n=dt(o):0!==(s&=a)&&(n=dt(s))}else 0!==(a=r&~i)?n=dt(a):0!==s&&(n=dt(s));if(0===n)return 0;if(0!==t&&t!==n&&0===(t&i)&&((i=n&-n)>=(s=t&-t)||16===i&&4194240&s))return t;if(4&n&&(n|=16&r),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=n;0<t;)i=1<<(r=31-at(t)),n|=e[r],t&=~i;return n}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gt(){var e=ct;return!(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function vt(e,t,r){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=r}function yt(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-at(r),i=1<<n;i&t|e[n]&t&&(e[n]|=t),r&=~i}}var _t=0;function bt(e){return 1<(e&=-e)?4<e?268435455&e?16:536870912:4:1}var wt,xt,kt,Et,St,Tt=!1,jt=[],Pt=null,Ot=null,It=null,Nt=new Map,Ct=new Map,Rt=[],At="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function $t(e,t){switch(e){case"focusin":case"focusout":Pt=null;break;case"dragenter":case"dragleave":Ot=null;break;case"mouseover":case"mouseout":It=null;break;case"pointerover":case"pointerout":Nt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ct.delete(t.pointerId)}}function Lt(e,t,r,n,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=_i(t))&&xt(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=yi(e.target);if(null!==t){var r=Be(t);if(null!==r)if(13===(t=r.tag)){if(null!==(t=Ve(r)))return e.blockedOn=t,void St(e.priority,function(){kt(r)})}else if(3===t&&r.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===r.tag?r.stateNode.containerInfo:null)}e.blockedOn=null}function Mt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var r=Jt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==r)return null!==(t=_i(r))&&xt(t),e.blockedOn=r,!1;var n=new(r=e.nativeEvent).constructor(r.type,r);be=n,r.target.dispatchEvent(n),be=null,t.shift()}return!0}function Dt(e,t,r){Mt(e)&&r.delete(t)}function Ut(){Tt=!1,null!==Pt&&Mt(Pt)&&(Pt=null),null!==Ot&&Mt(Ot)&&(Ot=null),null!==It&&Mt(It)&&(It=null),Nt.forEach(Dt),Ct.forEach(Dt)}function zt(e,r){e.blockedOn===r&&(e.blockedOn=null,Tt||(Tt=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Ut)))}function Bt(e){function t(t){return zt(t,e)}if(0<jt.length){zt(jt[0],e);for(var r=1;r<jt.length;r++){var n=jt[r];n.blockedOn===e&&(n.blockedOn=null)}}for(null!==Pt&&zt(Pt,e),null!==Ot&&zt(Ot,e),null!==It&&zt(It,e),Nt.forEach(t),Ct.forEach(t),r=0;r<Rt.length;r++)(n=Rt[r]).blockedOn===e&&(n.blockedOn=null);for(;0<Rt.length&&null===(r=Rt[0]).blockedOn;)Ft(r),null===r.blockedOn&&Rt.shift()}var Vt=_.ReactCurrentBatchConfig,qt=!0;function Ht(e,t,r,n){var i=_t,s=Vt.transition;Vt.transition=null;try{_t=1,Gt(e,t,r,n)}finally{_t=i,Vt.transition=s}}function Wt(e,t,r,n){var i=_t,s=Vt.transition;Vt.transition=null;try{_t=4,Gt(e,t,r,n)}finally{_t=i,Vt.transition=s}}function Gt(e,t,r,n){if(qt){var i=Jt(e,t,r,n);if(null===i)qn(e,t,n,Kt,r),$t(e,n);else if(function(e,t,r,n,i){switch(t){case"focusin":return Pt=Lt(Pt,e,t,r,n,i),!0;case"dragenter":return Ot=Lt(Ot,e,t,r,n,i),!0;case"mouseover":return It=Lt(It,e,t,r,n,i),!0;case"pointerover":var s=i.pointerId;return Nt.set(s,Lt(Nt.get(s)||null,e,t,r,n,i)),!0;case"gotpointercapture":return s=i.pointerId,Ct.set(s,Lt(Ct.get(s)||null,e,t,r,n,i)),!0}return!1}(i,e,t,r,n))n.stopPropagation();else if($t(e,n),4&t&&-1<At.indexOf(e)){for(;null!==i;){var s=_i(i);if(null!==s&&wt(s),null===(s=Jt(e,t,r,n))&&qn(e,t,n,Kt,r),s===i)break;i=s}null!==i&&n.stopPropagation()}else qn(e,t,n,null,r)}}var Kt=null;function Jt(e,t,r,n){if(Kt=null,null!==(e=yi(e=we(n))))if(null===(t=Be(e)))e=null;else if(13===(r=t.tag)){if(null!==(e=Ve(t)))return e;e=null}else if(3===r){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Kt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case rt:return 16;case nt:return 536870912;default:return 16}default:return 16}}var Qt=null,Xt=null,Zt=null;function er(){if(Zt)return Zt;var e,t,r=Xt,n=r.length,i="value"in Qt?Qt.value:Qt.textContent,s=i.length;for(e=0;e<n&&r[e]===i[e];e++);var a=n-e;for(t=1;t<=a&&r[n-t]===i[s-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tr(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function rr(){return!0}function nr(){return!1}function ir(e){function t(t,r,n,i,s){for(var a in this._reactName=t,this._targetInst=n,this.type=r,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?rr:nr,this.isPropagationStopped=nr,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=rr)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=rr)},persist:function(){},isPersistent:rr}),t}var sr,ar,or,lr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cr=ir(lr),ur=M({},lr,{view:0,detail:0}),dr=ir(ur),hr=M({},ur,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Er,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==or&&(or&&"mousemove"===e.type?(sr=e.screenX-or.screenX,ar=e.screenY-or.screenY):ar=sr=0,or=e),sr)},movementY:function(e){return"movementY"in e?e.movementY:ar}}),fr=ir(hr),pr=ir(M({},hr,{dataTransfer:0})),gr=ir(M({},ur,{relatedTarget:0})),mr=ir(M({},lr,{animationName:0,elapsedTime:0,pseudoElement:0})),vr=M({},lr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),yr=ir(vr),_r=ir(M({},lr,{data:0})),br={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kr(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=xr[e])&&!!t[e]}function Er(){return kr}var Sr=M({},ur,{key:function(e){if(e.key){var t=br[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tr(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wr[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Er,charCode:function(e){return"keypress"===e.type?tr(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tr(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tr=ir(Sr),jr=ir(M({},hr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Pr=ir(M({},ur,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Er})),Or=ir(M({},lr,{propertyName:0,elapsedTime:0,pseudoElement:0})),Ir=M({},hr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Nr=ir(Ir),Cr=[9,13,27,32],Rr=o&&"CompositionEvent"in window,Ar=null;o&&"documentMode"in document&&(Ar=document.documentMode);var $r=o&&"TextEvent"in window&&!Ar,Lr=o&&(!Rr||Ar&&8<Ar&&11>=Ar),Fr=String.fromCharCode(32),Mr=!1;function Dr(e,t){switch(e){case"keyup":return-1!==Cr.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ur(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var zr=!1;var Br={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Br[e.type]:"textarea"===t}function qr(e,t,r,n){Te(n),0<(t=Wn(t,"onChange")).length&&(r=new cr("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Hr=null,Wr=null;function Gr(e){Mn(e,0)}function Kr(e){if(K(bi(e)))return e}function Jr(e,t){if("change"===e)return t}var Yr=!1;if(o){var Qr;if(o){var Xr="oninput"in document;if(!Xr){var Zr=document.createElement("div");Zr.setAttribute("oninput","return;"),Xr="function"==typeof Zr.oninput}Qr=Xr}else Qr=!1;Yr=Qr&&(!document.documentMode||9<document.documentMode)}function en(){Hr&&(Hr.detachEvent("onpropertychange",tn),Wr=Hr=null)}function tn(e){if("value"===e.propertyName&&Kr(Wr)){var t=[];qr(t,Wr,e,we(e)),Ne(Gr,t)}}function rn(e,t,r){"focusin"===e?(en(),Wr=r,(Hr=t).attachEvent("onpropertychange",tn)):"focusout"===e&&en()}function nn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Kr(Wr)}function sn(e,t){if("click"===e)return Kr(t)}function an(e,t){if("input"===e||"change"===e)return Kr(t)}var on="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function ln(e,t){if(on(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!l.call(t,i)||!on(e[i],t[i]))return!1}return!0}function cn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function un(e,t){var r,n=cn(e);for(e=0;n;){if(3===n.nodeType){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=cn(n)}}function dn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hn(){for(var e=window,t=J();t instanceof e.HTMLIFrameElement;){try{var r="string"==typeof t.contentWindow.location.href}catch(No){r=!1}if(!r)break;t=J((e=t.contentWindow).document)}return t}function fn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pn(e){var t=hn(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&dn(r.ownerDocument.documentElement,r)){if(null!==n&&fn(r))if(t=n.start,void 0===(e=n.end)&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if((e=(t=r.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=r.textContent.length,s=Math.min(n.start,i);n=void 0===n.end?s:Math.min(n.end,i),!e.extend&&s>n&&(i=n,n=s,s=i),i=un(r,s);var a=un(r,n);i&&a&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>n?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=r;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"==typeof r.focus&&r.focus(),r=0;r<t.length;r++)(e=t[r]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gn=o&&"documentMode"in document&&11>=document.documentMode,mn=null,vn=null,yn=null,_n=!1;function bn(e,t,r){var n=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;_n||null==mn||mn!==J(n)||("selectionStart"in(n=mn)&&fn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},yn&&ln(yn,n)||(yn=n,0<(n=Wn(vn,"onSelect")).length&&(t=new cr("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=mn)))}function wn(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var xn={animationend:wn("Animation","AnimationEnd"),animationiteration:wn("Animation","AnimationIteration"),animationstart:wn("Animation","AnimationStart"),transitionend:wn("Transition","TransitionEnd")},kn={},En={};function Sn(e){if(kn[e])return kn[e];if(!xn[e])return e;var t,r=xn[e];for(t in r)if(r.hasOwnProperty(t)&&t in En)return kn[e]=r[t];return e}o&&(En=document.createElement("div").style,"AnimationEvent"in window||(delete xn.animationend.animation,delete xn.animationiteration.animation,delete xn.animationstart.animation),"TransitionEvent"in window||delete xn.transitionend.transition);var Tn=Sn("animationend"),jn=Sn("animationiteration"),Pn=Sn("animationstart"),On=Sn("transitionend"),In=new Map,Nn="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Cn(e,t){In.set(e,t),s(t,[e])}for(var Rn=0;Rn<Nn.length;Rn++){var An=Nn[Rn];Cn(An.toLowerCase(),"on"+(An[0].toUpperCase()+An.slice(1)))}Cn(Tn,"onAnimationEnd"),Cn(jn,"onAnimationIteration"),Cn(Pn,"onAnimationStart"),Cn("dblclick","onDoubleClick"),Cn("focusin","onFocus"),Cn("focusout","onBlur"),Cn(On,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $n="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ln=new Set("cancel close invalid load scroll toggle".split(" ").concat($n));function Fn(e,t,n){var i=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,i,s,a,o,l,c){if(ze.apply(this,arguments),Le){if(!Le)throw Error(r(198));var u=Fe;Le=!1,Fe=null,Me||(Me=!0,De=u)}}(i,t,void 0,e),e.currentTarget=null}function Mn(e,t){t=!!(4&t);for(var r=0;r<e.length;r++){var n=e[r],i=n.event;n=n.listeners;e:{var s=void 0;if(t)for(var a=n.length-1;0<=a;a--){var o=n[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&i.isPropagationStopped())break e;Fn(i,o,c),s=l}else for(a=0;a<n.length;a++){if(l=(o=n[a]).instance,c=o.currentTarget,o=o.listener,l!==s&&i.isPropagationStopped())break e;Fn(i,o,c),s=l}}}if(Me)throw e=De,Me=!1,De=null,e}function Dn(e,t){var r=t[gi];void 0===r&&(r=t[gi]=new Set);var n=e+"__bubble";r.has(n)||(Vn(t,e,2,!1),r.add(n))}function Un(e,t,r){var n=0;t&&(n|=4),Vn(r,e,n,t)}var zn="_reactListening"+Math.random().toString(36).slice(2);function Bn(e){if(!e[zn]){e[zn]=!0,n.forEach(function(t){"selectionchange"!==t&&(Ln.has(t)||Un(t,!1,e),Un(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zn]||(t[zn]=!0,Un("selectionchange",!1,t))}}function Vn(e,t,r,n){switch(Yt(t)){case 1:var i=Ht;break;case 4:i=Wt;break;default:i=Gt}r=i.bind(null,t,r,e),i=void 0,!Re||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),n?void 0!==i?e.addEventListener(t,r,{capture:!0,passive:i}):e.addEventListener(t,r,!0):void 0!==i?e.addEventListener(t,r,{passive:i}):e.addEventListener(t,r,!1)}function qn(e,t,r,n,i){var s=n;if(!(1&t||2&t||null===n))e:for(;;){if(null===n)return;var a=n.tag;if(3===a||4===a){var o=n.stateNode.containerInfo;if(o===i||8===o.nodeType&&o.parentNode===i)break;if(4===a)for(a=n.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;a=a.return}for(;null!==o;){if(null===(a=yi(o)))return;if(5===(l=a.tag)||6===l){n=s=a;continue e}o=o.parentNode}}n=n.return}Ne(function(){var n=s,i=we(r),a=[];e:{var o=In.get(e);if(void 0!==o){var l=cr,c=e;switch(e){case"keypress":if(0===tr(r))break e;case"keydown":case"keyup":l=Tr;break;case"focusin":c="focus",l=gr;break;case"focusout":c="blur",l=gr;break;case"beforeblur":case"afterblur":l=gr;break;case"click":if(2===r.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=fr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=pr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Pr;break;case Tn:case jn:case Pn:l=mr;break;case On:l=Or;break;case"scroll":l=dr;break;case"wheel":l=Nr;break;case"copy":case"cut":case"paste":l=yr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=jr}var u=!!(4&t),d=!u&&"scroll"===e,h=u?null!==o?o+"Capture":null:o;u=[];for(var f,p=n;null!==p;){var g=(f=p).stateNode;if(5===f.tag&&null!==g&&(f=g,null!==h&&(null!=(g=Ce(p,h))&&u.push(Hn(p,g,f)))),d)break;p=p.return}0<u.length&&(o=new l(o,c,null,r,i),a.push({event:o,listeners:u}))}}if(!(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||r===be||!(c=r.relatedTarget||r.fromElement)||!yi(c)&&!c[pi])&&(l||o)&&(o=i.window===i?i:(o=i.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=n,null!==(c=(c=r.relatedTarget||r.toElement)?yi(c):null)&&(c!==(d=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=n),l!==c)){if(u=fr,g="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=jr,g="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?o:bi(l),f=null==c?o:bi(c),(o=new u(g,p+"leave",l,r,i)).target=d,o.relatedTarget=f,g=null,yi(i)===n&&((u=new u(h,p+"enter",c,r,i)).target=f,u.relatedTarget=d,g=u),d=g,l&&c)e:{for(h=c,p=0,f=u=l;f;f=Gn(f))p++;for(f=0,g=h;g;g=Gn(g))f++;for(;0<p-f;)u=Gn(u),p--;for(;0<f-p;)h=Gn(h),f--;for(;p--;){if(u===h||null!==h&&u===h.alternate)break e;u=Gn(u),h=Gn(h)}u=null}else u=null;null!==l&&Kn(a,o,l,u,!1),null!==c&&null!==d&&Kn(a,d,c,u,!0)}if("select"===(l=(o=n?bi(n):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var m=Jr;else if(Vr(o))if(Yr)m=an;else{m=nn;var v=rn}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(m=sn);switch(m&&(m=m(e,n))?qr(a,m,r,i):(v&&v(e,o,n),"focusout"===e&&(v=o._wrapperState)&&v.controlled&&"number"===o.type&&te(o,"number",o.value)),v=n?bi(n):window,e){case"focusin":(Vr(v)||"true"===v.contentEditable)&&(mn=v,vn=n,yn=null);break;case"focusout":yn=vn=mn=null;break;case"mousedown":_n=!0;break;case"contextmenu":case"mouseup":case"dragend":_n=!1,bn(a,r,i);break;case"selectionchange":if(gn)break;case"keydown":case"keyup":bn(a,r,i)}var y;if(Rr)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else zr?Dr(e,r)&&(_="onCompositionEnd"):"keydown"===e&&229===r.keyCode&&(_="onCompositionStart");_&&(Lr&&"ko"!==r.locale&&(zr||"onCompositionStart"!==_?"onCompositionEnd"===_&&zr&&(y=er()):(Xt="value"in(Qt=i)?Qt.value:Qt.textContent,zr=!0)),0<(v=Wn(n,_)).length&&(_=new _r(_,e,null,r,i),a.push({event:_,listeners:v}),y?_.data=y:null!==(y=Ur(r))&&(_.data=y))),(y=$r?function(e,t){switch(e){case"compositionend":return Ur(t);case"keypress":return 32!==t.which?null:(Mr=!0,Fr);case"textInput":return(e=t.data)===Fr&&Mr?null:e;default:return null}}(e,r):function(e,t){if(zr)return"compositionend"===e||!Rr&&Dr(e,t)?(e=er(),Zt=Xt=Qt=null,zr=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Lr&&"ko"!==t.locale?null:t.data}}(e,r))&&(0<(n=Wn(n,"onBeforeInput")).length&&(i=new _r("onBeforeInput","beforeinput",null,r,i),a.push({event:i,listeners:n}),i.data=y))}Mn(a,t)})}function Hn(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Wn(e,t){for(var r=t+"Capture",n=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Ce(e,r))&&n.unshift(Hn(e,s,i)),null!=(s=Ce(e,t))&&n.push(Hn(e,s,i))),e=e.return}return n}function Gn(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Kn(e,t,r,n,i){for(var s=t._reactName,a=[];null!==r&&r!==n;){var o=r,l=o.alternate,c=o.stateNode;if(null!==l&&l===n)break;5===o.tag&&null!==c&&(o=c,i?null!=(l=Ce(r,s))&&a.unshift(Hn(r,l,o)):i||null!=(l=Ce(r,s))&&a.push(Hn(r,l,o))),r=r.return}0!==a.length&&e.push({event:t,listeners:a})}var Jn=/\r\n?/g,Yn=/\u0000|\uFFFD/g;function Qn(e){return("string"==typeof e?e:""+e).replace(Jn,"\n").replace(Yn,"")}function Xn(e,t,n){if(t=Qn(t),Qn(e)!==t&&n)throw Error(r(425))}function Zn(){}var ei=null,ti=null;function ri(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ni="function"==typeof setTimeout?setTimeout:void 0,ii="function"==typeof clearTimeout?clearTimeout:void 0,si="function"==typeof Promise?Promise:void 0,ai="function"==typeof queueMicrotask?queueMicrotask:void 0!==si?function(e){return si.resolve(null).then(e).catch(oi)}:ni;function oi(e){setTimeout(function(){throw e})}function li(e,t){var r=t,n=0;do{var i=r.nextSibling;if(e.removeChild(r),i&&8===i.nodeType)if("/$"===(r=i.data)){if(0===n)return e.removeChild(i),void Bt(t);n--}else"$"!==r&&"$?"!==r&&"$!"!==r||n++;r=i}while(r);Bt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var r=e.data;if("$"===r||"$!"===r||"$?"===r){if(0===t)return e;t--}else"/$"===r&&t++}e=e.previousSibling}return null}var di=Math.random().toString(36).slice(2),hi="__reactFiber$"+di,fi="__reactProps$"+di,pi="__reactContainer$"+di,gi="__reactEvents$"+di,mi="__reactListeners$"+di,vi="__reactHandles$"+di;function yi(e){var t=e[hi];if(t)return t;for(var r=e.parentNode;r;){if(t=r[pi]||r[hi]){if(r=t.alternate,null!==t.child||null!==r&&null!==r.child)for(e=ui(e);null!==e;){if(r=e[hi])return r;e=ui(e)}return t}r=(e=r).parentNode}return null}function _i(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(r(33))}function wi(e){return e[fi]||null}var xi=[],ki=-1;function Ei(e){return{current:e}}function Si(e){0>ki||(e.current=xi[ki],xi[ki]=null,ki--)}function Ti(e,t){ki++,xi[ki]=e.current,e.current=t}var ji={},Pi=Ei(ji),Oi=Ei(!1),Ii=ji;function Ni(e,t){var r=e.type.contextTypes;if(!r)return ji;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in r)s[i]=t[i];return n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Ci(e){return null!=(e=e.childContextTypes)}function Ri(){Si(Oi),Si(Pi)}function Ai(e,t,n){if(Pi.current!==ji)throw Error(r(168));Ti(Pi,t),Ti(Oi,n)}function $i(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,"function"!=typeof i.getChildContext)return n;for(var s in i=i.getChildContext())if(!(s in t))throw Error(r(108,q(e)||"Unknown",s));return M({},n,i)}function Li(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ji,Ii=Pi.current,Ti(Pi,e),Ti(Oi,Oi.current),!0}function Fi(e,t,n){var i=e.stateNode;if(!i)throw Error(r(169));n?(e=$i(e,t,Ii),i.__reactInternalMemoizedMergedChildContext=e,Si(Oi),Si(Pi),Ti(Pi,e)):Si(Oi),Ti(Oi,n)}var Mi=null,Di=!1,Ui=!1;function zi(e){null===Mi?Mi=[e]:Mi.push(e)}function Bi(){if(!Ui&&null!==Mi){Ui=!0;var e=0,t=_t;try{var r=Mi;for(_t=1;e<r.length;e++){var n=r[e];do{n=n(!0)}while(null!==n)}Mi=null,Di=!1}catch(xo){throw null!==Mi&&(Mi=Mi.slice(e+1)),Ge(Ze,Bi),xo}finally{_t=t,Ui=!1}}return null}var Vi=[],qi=0,Hi=null,Wi=0,Gi=[],Ki=0,Ji=null,Yi=1,Qi="";function Xi(e,t){Vi[qi++]=Wi,Vi[qi++]=Hi,Hi=e,Wi=t}function Zi(e,t,r){Gi[Ki++]=Yi,Gi[Ki++]=Qi,Gi[Ki++]=Ji,Ji=e;var n=Yi;e=Qi;var i=32-at(n)-1;n&=~(1<<i),r+=1;var s=32-at(t)+i;if(30<s){var a=i-i%5;s=(n&(1<<a)-1).toString(32),n>>=a,i-=a,Yi=1<<32-at(t)+i|r<<i|n,Qi=s+e}else Yi=1<<s|r<<i|n,Qi=e}function es(e){null!==e.return&&(Xi(e,1),Zi(e,1,0))}function ts(e){for(;e===Hi;)Hi=Vi[--qi],Vi[qi]=null,Wi=Vi[--qi],Vi[qi]=null;for(;e===Ji;)Ji=Gi[--Ki],Gi[Ki]=null,Qi=Gi[--Ki],Gi[Ki]=null,Yi=Gi[--Ki],Gi[Ki]=null}var rs=null,ns=null,is=!1,ss=null;function as(e,t){var r=qc(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,null===(t=e.deletions)?(e.deletions=[r],e.flags|=16):t.push(r)}function os(e,t){switch(e.tag){case 5:var r=e.type;return null!==(t=1!==t.nodeType||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,rs=e,ns=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,rs=e,ns=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(r=null!==Ji?{id:Yi,overflow:Qi}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},(r=qc(18,null,null,0)).stateNode=t,r.return=e,e.child=r,rs=e,ns=null,!0);default:return!1}}function ls(e){return!(!(1&e.mode)||128&e.flags)}function cs(e){if(is){var t=ns;if(t){var n=t;if(!os(e,t)){if(ls(e))throw Error(r(418));t=ci(n.nextSibling);var i=rs;t&&os(e,t)?as(i,n):(e.flags=-4097&e.flags|2,is=!1,rs=e)}}else{if(ls(e))throw Error(r(418));e.flags=-4097&e.flags|2,is=!1,rs=e}}}function us(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;rs=e}function ds(e){if(e!==rs)return!1;if(!is)return us(e),is=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ri(e.type,e.memoizedProps)),t&&(t=ns)){if(ls(e))throw hs(),Error(r(418));for(;t;)as(e,t),t=ci(t.nextSibling)}if(us(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(r(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ns=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ns=null}}else ns=rs?ci(e.stateNode.nextSibling):null;return!0}function hs(){for(var e=ns;e;)e=ci(e.nextSibling)}function fs(){ns=rs=null,is=!1}function ps(e){null===ss?ss=[e]:ss.push(e)}var gs=_.ReactCurrentBatchConfig;function ms(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(r(309));var i=n.stateNode}if(!i)throw Error(r(147,e));var s=i,a=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=s.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!=typeof e)throw Error(r(284));if(!n._owner)throw Error(r(290,e))}return e}function vs(e,t){throw e=Object.prototype.toString.call(t),Error(r(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ys(e){return(0,e._init)(e._payload)}function _s(e){function t(t,r){if(e){var n=t.deletions;null===n?(t.deletions=[r],t.flags|=16):n.push(r)}}function n(r,n){if(!e)return null;for(;null!==n;)t(r,n),n=n.sibling;return null}function i(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function s(e,t){return(e=Wc(e,t)).index=0,e.sibling=null,e}function a(t,r,n){return t.index=n,e?null!==(n=t.alternate)?(n=n.index)<r?(t.flags|=2,r):n:(t.flags|=2,r):(t.flags|=1048576,r)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,r,n){return null===t||6!==t.tag?((t=Yc(r,e.mode,n)).return=e,t):((t=s(t,r)).return=e,t)}function c(e,t,r,n){var i=r.type;return i===x?d(e,t,r.props.children,n,r.key):null!==t&&(t.elementType===i||"object"==typeof i&&null!==i&&i.$$typeof===R&&ys(i)===t.type)?((n=s(t,r.props)).ref=ms(e,t,r),n.return=e,n):((n=Gc(r.type,r.key,r.props,null,e.mode,n)).ref=ms(e,t,r),n.return=e,n)}function u(e,t,r,n){return null===t||4!==t.tag||t.stateNode.containerInfo!==r.containerInfo||t.stateNode.implementation!==r.implementation?((t=Qc(r,e.mode,n)).return=e,t):((t=s(t,r.children||[])).return=e,t)}function d(e,t,r,n,i){return null===t||7!==t.tag?((t=Kc(r,e.mode,n,i)).return=e,t):((t=s(t,r)).return=e,t)}function h(e,t,r){if("string"==typeof t&&""!==t||"number"==typeof t)return(t=Yc(""+t,e.mode,r)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case b:return(r=Gc(t.type,t.key,t.props,null,e.mode,r)).ref=ms(e,null,t),r.return=e,r;case w:return(t=Qc(t,e.mode,r)).return=e,t;case R:return h(e,(0,t._init)(t._payload),r)}if(re(t)||L(t))return(t=Kc(t,e.mode,r,null)).return=e,t;vs(e,t)}return null}function f(e,t,r,n){var i=null!==t?t.key:null;if("string"==typeof r&&""!==r||"number"==typeof r)return null!==i?null:l(e,t,""+r,n);if("object"==typeof r&&null!==r){switch(r.$$typeof){case b:return r.key===i?c(e,t,r,n):null;case w:return r.key===i?u(e,t,r,n):null;case R:return f(e,t,(i=r._init)(r._payload),n)}if(re(r)||L(r))return null!==i?null:d(e,t,r,n,null);vs(e,r)}return null}function p(e,t,r,n,i){if("string"==typeof n&&""!==n||"number"==typeof n)return l(t,e=e.get(r)||null,""+n,i);if("object"==typeof n&&null!==n){switch(n.$$typeof){case b:return c(t,e=e.get(null===n.key?r:n.key)||null,n,i);case w:return u(t,e=e.get(null===n.key?r:n.key)||null,n,i);case R:return p(e,t,r,(0,n._init)(n._payload),i)}if(re(n)||L(n))return d(t,e=e.get(r)||null,n,i,null);vs(t,n)}return null}function g(r,s,o,l){for(var c=null,u=null,d=s,g=s=0,m=null;null!==d&&g<o.length;g++){d.index>g?(m=d,d=null):m=d.sibling;var v=f(r,d,o[g],l);if(null===v){null===d&&(d=m);break}e&&d&&null===v.alternate&&t(r,d),s=a(v,s,g),null===u?c=v:u.sibling=v,u=v,d=m}if(g===o.length)return n(r,d),is&&Xi(r,g),c;if(null===d){for(;g<o.length;g++)null!==(d=h(r,o[g],l))&&(s=a(d,s,g),null===u?c=d:u.sibling=d,u=d);return is&&Xi(r,g),c}for(d=i(r,d);g<o.length;g++)null!==(m=p(d,r,g,o[g],l))&&(e&&null!==m.alternate&&d.delete(null===m.key?g:m.key),s=a(m,s,g),null===u?c=m:u.sibling=m,u=m);return e&&d.forEach(function(e){return t(r,e)}),is&&Xi(r,g),c}function m(s,o,l,c){var u=L(l);if("function"!=typeof u)throw Error(r(150));if(null==(l=u.call(l)))throw Error(r(151));for(var d=u=null,g=o,m=o=0,v=null,y=l.next();null!==g&&!y.done;m++,y=l.next()){g.index>m?(v=g,g=null):v=g.sibling;var _=f(s,g,y.value,c);if(null===_){null===g&&(g=v);break}e&&g&&null===_.alternate&&t(s,g),o=a(_,o,m),null===d?u=_:d.sibling=_,d=_,g=v}if(y.done)return n(s,g),is&&Xi(s,m),u;if(null===g){for(;!y.done;m++,y=l.next())null!==(y=h(s,y.value,c))&&(o=a(y,o,m),null===d?u=y:d.sibling=y,d=y);return is&&Xi(s,m),u}for(g=i(s,g);!y.done;m++,y=l.next())null!==(y=p(g,s,m,y.value,c))&&(e&&null!==y.alternate&&g.delete(null===y.key?m:y.key),o=a(y,o,m),null===d?u=y:d.sibling=y,d=y);return e&&g.forEach(function(e){return t(s,e)}),is&&Xi(s,m),u}return function e(r,i,a,l){if("object"==typeof a&&null!==a&&a.type===x&&null===a.key&&(a=a.props.children),"object"==typeof a&&null!==a){switch(a.$$typeof){case b:e:{for(var c=a.key,u=i;null!==u;){if(u.key===c){if((c=a.type)===x){if(7===u.tag){n(r,u.sibling),(i=s(u,a.props.children)).return=r,r=i;break e}}else if(u.elementType===c||"object"==typeof c&&null!==c&&c.$$typeof===R&&ys(c)===u.type){n(r,u.sibling),(i=s(u,a.props)).ref=ms(r,u,a),i.return=r,r=i;break e}n(r,u);break}t(r,u),u=u.sibling}a.type===x?((i=Kc(a.props.children,r.mode,l,a.key)).return=r,r=i):((l=Gc(a.type,a.key,a.props,null,r.mode,l)).ref=ms(r,i,a),l.return=r,r=l)}return o(r);case w:e:{for(u=a.key;null!==i;){if(i.key===u){if(4===i.tag&&i.stateNode.containerInfo===a.containerInfo&&i.stateNode.implementation===a.implementation){n(r,i.sibling),(i=s(i,a.children||[])).return=r,r=i;break e}n(r,i);break}t(r,i),i=i.sibling}(i=Qc(a,r.mode,l)).return=r,r=i}return o(r);case R:return e(r,i,(u=a._init)(a._payload),l)}if(re(a))return g(r,i,a,l);if(L(a))return m(r,i,a,l);vs(r,a)}return"string"==typeof a&&""!==a||"number"==typeof a?(a=""+a,null!==i&&6===i.tag?(n(r,i.sibling),(i=s(i,a)).return=r,r=i):(n(r,i),(i=Yc(a,r.mode,l)).return=r,r=i),o(r)):n(r,i)}}var bs=_s(!0),ws=_s(!1),xs=Ei(null),ks=null,Es=null,Ss=null;function Ts(){Ss=Es=ks=null}function js(e){var t=xs.current;Si(xs),e._currentValue=t}function Ps(e,t,r){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==n&&(n.childLanes|=t)):null!==n&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Os(e,t){ks=e,Ss=Es=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(_o=!0),e.firstContext=null)}function Is(e){var t=e._currentValue;if(Ss!==e)if(e={context:e,memoizedValue:t,next:null},null===Es){if(null===ks)throw Error(r(308));Es=e,ks.dependencies={lanes:0,firstContext:e}}else Es=Es.next=e;return t}var Ns=null;function Cs(e){null===Ns?Ns=[e]:Ns.push(e)}function Rs(e,t,r,n){var i=t.interleaved;return null===i?(r.next=r,Cs(t)):(r.next=i.next,i.next=r),t.interleaved=r,As(e,n)}function As(e,t){e.lanes|=t;var r=e.alternate;for(null!==r&&(r.lanes|=t),r=e,e=e.return;null!==e;)e.childLanes|=t,null!==(r=e.alternate)&&(r.childLanes|=t),r=e,e=e.return;return 3===r.tag?r.stateNode:null}var $s=!1;function Ls(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ms(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ds(e,t,r){var n=e.updateQueue;if(null===n)return null;if(n=n.shared,2&zl){var i=n.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),n.pending=t,As(e,r)}return null===(i=n.interleaved)?(t.next=t,Cs(n)):(t.next=i.next,i.next=t),n.interleaved=t,As(e,r)}function Us(e,t,r){if(null!==(t=t.updateQueue)&&(t=t.shared,4194240&r)){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,yt(e,r)}}function zs(e,t){var r=e.updateQueue,n=e.alternate;if(null!==n&&r===(n=n.updateQueue)){var i=null,s=null;if(null!==(r=r.firstBaseUpdate)){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};null===s?i=s=a:s=s.next=a,r=r.next}while(null!==r);null===s?i=s=t:s=s.next=t}else i=s=t;return r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:n.shared,effects:n.effects},void(e.updateQueue=r)}null===(e=r.lastBaseUpdate)?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Bs(e,t,r,n){var i=e.updateQueue;$s=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(null!==o){i.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?s=c:a.next=c,a=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==s){var d=i.baseState;for(a=0,u=c=l=null,o=s;;){var h=o.lane,f=o.eventTime;if((n&h)===h){null!==u&&(u=u.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,g=o;switch(h=t,f=r,g.tag){case 1:if("function"==typeof(p=g.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null==(h="function"==typeof(p=g.payload)?p.call(f,d,h):p))break e;d=M({},d,h);break e;case 2:$s=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[o]:h.push(o))}else f={eventTime:f,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,a|=h;if(null===(o=o.next)){if(null===(o=i.shared.pending))break;o=(h=o).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{a|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Jl|=a,e.lanes=a,e.memoizedState=d}}function Vs(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var i=e[t],s=i.callback;if(null!==s){if(i.callback=null,i=n,"function"!=typeof s)throw Error(r(191,s));s.call(i)}}}var qs={},Hs=Ei(qs),Ws=Ei(qs),Gs=Ei(qs);function Ks(e){if(e===qs)throw Error(r(174));return e}function Js(e,t){switch(Ti(Gs,t),Ti(Ws,e),Ti(Hs,qs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ce(null,"");break;default:t=ce(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Si(Hs),Ti(Hs,t)}function Ys(){Si(Hs),Si(Ws),Si(Gs)}function Qs(e){Ks(Gs.current);var t=Ks(Hs.current),r=ce(t,e.type);t!==r&&(Ti(Ws,e),Ti(Hs,r))}function Xs(e){Ws.current===e&&(Si(Hs),Si(Ws))}var Zs=Ei(0);function ea(e){for(var t=e;null!==t;){if(13===t.tag){var r=t.memoizedState;if(null!==r&&(null===(r=r.dehydrated)||"$?"===r.data||"$!"===r.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(128&t.flags)return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ta=[];function ra(){for(var e=0;e<ta.length;e++)ta[e]._workInProgressVersionPrimary=null;ta.length=0}var na=_.ReactCurrentDispatcher,ia=_.ReactCurrentBatchConfig,sa=0,aa=null,oa=null,la=null,ca=!1,ua=!1,da=0,ha=0;function fa(){throw Error(r(321))}function pa(e,t){if(null===t)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!on(e[r],t[r]))return!1;return!0}function ga(e,t,n,i,s,a){if(sa=a,aa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,na.current=null===e||null===e.memoizedState?Xa:Za,e=n(i,s),ua){a=0;do{if(ua=!1,da=0,25<=a)throw Error(r(301));a+=1,la=oa=null,t.updateQueue=null,na.current=eo,e=n(i,s)}while(ua)}if(na.current=Qa,t=null!==oa&&null!==oa.next,sa=0,la=oa=aa=null,ca=!1,t)throw Error(r(300));return e}function ma(){var e=0!==da;return da=0,e}function va(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===la?aa.memoizedState=la=e:la=la.next=e,la}function ya(){if(null===oa){var e=aa.alternate;e=null!==e?e.memoizedState:null}else e=oa.next;var t=null===la?aa.memoizedState:la.next;if(null!==t)la=t,oa=e;else{if(null===e)throw Error(r(310));e={memoizedState:(oa=e).memoizedState,baseState:oa.baseState,baseQueue:oa.baseQueue,queue:oa.queue,next:null},null===la?aa.memoizedState=la=e:la=la.next=e}return la}function _a(e,t){return"function"==typeof t?t(e):t}function ba(e){var t=ya(),n=t.queue;if(null===n)throw Error(r(311));n.lastRenderedReducer=e;var i=oa,s=i.baseQueue,a=n.pending;if(null!==a){if(null!==s){var o=s.next;s.next=a.next,a.next=o}i.baseQueue=s=a,n.pending=null}if(null!==s){a=s.next,i=i.baseState;var l=o=null,c=null,u=a;do{var d=u.lane;if((sa&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:e(i,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,o=i):c=c.next=h,aa.lanes|=d,Jl|=d}u=u.next}while(null!==u&&u!==a);null===c?o=i:c.next=l,on(i,t.memoizedState)||(_o=!0),t.memoizedState=i,t.baseState=o,t.baseQueue=c,n.lastRenderedState=i}if(null!==(e=n.interleaved)){s=e;do{a=s.lane,aa.lanes|=a,Jl|=a,s=s.next}while(s!==e)}else null===s&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function wa(e){var t=ya(),n=t.queue;if(null===n)throw Error(r(311));n.lastRenderedReducer=e;var i=n.dispatch,s=n.pending,a=t.memoizedState;if(null!==s){n.pending=null;var o=s=s.next;do{a=e(a,o.action),o=o.next}while(o!==s);on(a,t.memoizedState)||(_o=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,i]}function xa(){}function ka(e,t){var n=aa,i=ya(),s=t(),a=!on(i.memoizedState,s);if(a&&(i.memoizedState=s,_o=!0),i=i.queue,$a(Ta.bind(null,n,i,e),[e]),i.getSnapshot!==t||a||null!==la&&1&la.memoizedState.tag){if(n.flags|=2048,Ia(9,Sa.bind(null,n,i,s,t),void 0,null),null===Bl)throw Error(r(349));30&sa||Ea(n,t,s)}return s}function Ea(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},null===(t=aa.updateQueue)?(t={lastEffect:null,stores:null},aa.updateQueue=t,t.stores=[e]):null===(r=t.stores)?t.stores=[e]:r.push(e)}function Sa(e,t,r,n){t.value=r,t.getSnapshot=n,ja(t)&&Pa(e)}function Ta(e,t,r){return r(function(){ja(t)&&Pa(e)})}function ja(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!on(e,r)}catch(No){return!0}}function Pa(e){var t=As(e,1);null!==t&&gc(t,e,1,-1)}function Oa(e){var t=va();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_a,lastRenderedState:e},t.queue=e,e=e.dispatch=Ga.bind(null,aa,e),[t.memoizedState,e]}function Ia(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},null===(t=aa.updateQueue)?(t={lastEffect:null,stores:null},aa.updateQueue=t,t.lastEffect=e.next=e):null===(r=t.lastEffect)?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e),e}function Na(){return ya().memoizedState}function Ca(e,t,r,n){var i=va();aa.flags|=e,i.memoizedState=Ia(1|t,r,void 0,void 0===n?null:n)}function Ra(e,t,r,n){var i=ya();n=void 0===n?null:n;var s=void 0;if(null!==oa){var a=oa.memoizedState;if(s=a.destroy,null!==n&&pa(n,a.deps))return void(i.memoizedState=Ia(t,r,s,n))}aa.flags|=e,i.memoizedState=Ia(1|t,r,s,n)}function Aa(e,t){return Ca(8390656,8,e,t)}function $a(e,t){return Ra(2048,8,e,t)}function La(e,t){return Ra(4,2,e,t)}function Fa(e,t){return Ra(4,4,e,t)}function Ma(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Da(e,t,r){return r=null!=r?r.concat([e]):null,Ra(4,4,Ma.bind(null,t,e),r)}function Ua(){}function za(e,t){var r=ya();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&pa(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Ba(e,t){var r=ya();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&pa(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Va(e,t,r){return 21&sa?(on(r,t)||(r=gt(),aa.lanes|=r,Jl|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,_o=!0),e.memoizedState=r)}function qa(e,t){var r=_t;_t=0!==r&&4>r?r:4,e(!0);var n=ia.transition;ia.transition={};try{e(!1),t()}finally{_t=r,ia.transition=n}}function Ha(){return ya().memoizedState}function Wa(e,t,r){var n=pc(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Ka(e))Ja(t,r);else if(null!==(r=Rs(e,t,r,n))){gc(r,e,n,fc()),Ya(r,t,n)}}function Ga(e,t,r){var n=pc(e),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Ka(e))Ja(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=s(a,r);if(i.hasEagerState=!0,i.eagerState=o,on(o,a)){var l=t.interleaved;return null===l?(i.next=i,Cs(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(Po){}null!==(r=Rs(e,t,i,n))&&(gc(r,e,n,i=fc()),Ya(r,t,n))}}function Ka(e){var t=e.alternate;return e===aa||null!==t&&t===aa}function Ja(e,t){ua=ca=!0;var r=e.pending;null===r?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Ya(e,t,r){if(4194240&r){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,yt(e,r)}}var Qa={readContext:Is,useCallback:fa,useContext:fa,useEffect:fa,useImperativeHandle:fa,useInsertionEffect:fa,useLayoutEffect:fa,useMemo:fa,useReducer:fa,useRef:fa,useState:fa,useDebugValue:fa,useDeferredValue:fa,useTransition:fa,useMutableSource:fa,useSyncExternalStore:fa,useId:fa,unstable_isNewReconciler:!1},Xa={readContext:Is,useCallback:function(e,t){return va().memoizedState=[e,void 0===t?null:t],e},useContext:Is,useEffect:Aa,useImperativeHandle:function(e,t,r){return r=null!=r?r.concat([e]):null,Ca(4194308,4,Ma.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Ca(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ca(4,2,e,t)},useMemo:function(e,t){var r=va();return t=void 0===t?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=va();return t=void 0!==r?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=Wa.bind(null,aa,e),[n.memoizedState,e]},useRef:function(e){return e={current:e},va().memoizedState=e},useState:Oa,useDebugValue:Ua,useDeferredValue:function(e){return va().memoizedState=e},useTransition:function(){var e=Oa(!1),t=e[0];return e=qa.bind(null,e[1]),va().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=aa,s=va();if(is){if(void 0===n)throw Error(r(407));n=n()}else{if(n=t(),null===Bl)throw Error(r(349));30&sa||Ea(i,t,n)}s.memoizedState=n;var a={value:n,getSnapshot:t};return s.queue=a,Aa(Ta.bind(null,i,a,e),[e]),i.flags|=2048,Ia(9,Sa.bind(null,i,a,n,t),void 0,null),n},useId:function(){var e=va(),t=Bl.identifierPrefix;if(is){var r=Qi;t=":"+t+"R"+(r=(Yi&~(1<<32-at(Yi)-1)).toString(32)+r),0<(r=da++)&&(t+="H"+r.toString(32)),t+=":"}else t=":"+t+"r"+(r=ha++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Za={readContext:Is,useCallback:za,useContext:Is,useEffect:$a,useImperativeHandle:Da,useInsertionEffect:La,useLayoutEffect:Fa,useMemo:Ba,useReducer:ba,useRef:Na,useState:function(){return ba(_a)},useDebugValue:Ua,useDeferredValue:function(e){return Va(ya(),oa.memoizedState,e)},useTransition:function(){return[ba(_a)[0],ya().memoizedState]},useMutableSource:xa,useSyncExternalStore:ka,useId:Ha,unstable_isNewReconciler:!1},eo={readContext:Is,useCallback:za,useContext:Is,useEffect:$a,useImperativeHandle:Da,useInsertionEffect:La,useLayoutEffect:Fa,useMemo:Ba,useReducer:wa,useRef:Na,useState:function(){return wa(_a)},useDebugValue:Ua,useDeferredValue:function(e){var t=ya();return null===oa?t.memoizedState=e:Va(t,oa.memoizedState,e)},useTransition:function(){return[wa(_a)[0],ya().memoizedState]},useMutableSource:xa,useSyncExternalStore:ka,useId:Ha,unstable_isNewReconciler:!1};function to(e,t){if(e&&e.defaultProps){for(var r in t=M({},t),e=e.defaultProps)void 0===t[r]&&(t[r]=e[r]);return t}return t}function ro(e,t,r,n){r=null==(r=r(n,t=e.memoizedState))?t:M({},t,r),e.memoizedState=r,0===e.lanes&&(e.updateQueue.baseState=r)}var no={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=fc(),i=pc(e),s=Ms(n,i);s.payload=t,null!=r&&(s.callback=r),null!==(t=Ds(e,s,i))&&(gc(t,e,i,n),Us(t,e,i))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=fc(),i=pc(e),s=Ms(n,i);s.tag=1,s.payload=t,null!=r&&(s.callback=r),null!==(t=Ds(e,s,i))&&(gc(t,e,i,n),Us(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=fc(),n=pc(e),i=Ms(r,n);i.tag=2,null!=t&&(i.callback=t),null!==(t=Ds(e,i,n))&&(gc(t,e,n,r),Us(t,e,n))}};function io(e,t,r,n,i,s,a){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,s,a):!t.prototype||!t.prototype.isPureReactComponent||(!ln(r,n)||!ln(i,s))}function so(e,t,r){var n=!1,i=ji,s=t.contextType;return"object"==typeof s&&null!==s?s=Is(s):(i=Ci(t)?Ii:Pi.current,s=(n=null!=(n=t.contextTypes))?Ni(e,i):ji),t=new t(r,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=no,e.stateNode=t,t._reactInternals=e,n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function ao(e,t,r,n){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(r,n),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&no.enqueueReplaceState(t,t.state,null)}function oo(e,t,r,n){var i=e.stateNode;i.props=r,i.state=e.memoizedState,i.refs={},Ls(e);var s=t.contextType;"object"==typeof s&&null!==s?i.context=Is(s):(s=Ci(t)?Ii:Pi.current,i.context=Ni(e,s)),i.state=e.memoizedState,"function"==typeof(s=t.getDerivedStateFromProps)&&(ro(e,t,s,r),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&no.enqueueReplaceState(i,i.state,null),Bs(e,r,i,n),i.state=e.memoizedState),"function"==typeof i.componentDidMount&&(e.flags|=4194308)}function lo(e,t){try{var r="",n=t;do{r+=B(n),n=n.return}while(n);var i=r}catch(Ao){i="\nError generating stack: "+Ao.message+"\n"+Ao.stack}return{value:e,source:t,stack:i,digest:null}}function co(e,t,r){return{value:e,source:null,stack:null!=r?r:null,digest:null!=t?t:null}}function uo(e,t){try{console.error(t.value)}catch(Ro){setTimeout(function(){throw Ro})}}var ho="function"==typeof WeakMap?WeakMap:Map;function fo(e,t,r){(r=Ms(-1,r)).tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){nc||(nc=!0,ic=n),uo(0,t)},r}function po(e,t,r){(r=Ms(-1,r)).tag=3;var n=e.type.getDerivedStateFromError;if("function"==typeof n){var i=t.value;r.payload=function(){return n(i)},r.callback=function(){uo(0,t)}}var s=e.stateNode;return null!==s&&"function"==typeof s.componentDidCatch&&(r.callback=function(){uo(0,t),"function"!=typeof n&&(null===sc?sc=new Set([this]):sc.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),r}function go(e,t,r){var n=e.pingCache;if(null===n){n=e.pingCache=new ho;var i=new Set;n.set(t,i)}else void 0===(i=n.get(t))&&(i=new Set,n.set(t,i));i.has(r)||(i.add(r),e=Mc.bind(null,e,t,r),t.then(e,e))}function mo(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function vo(e,t,r,n,i){return 1&e.mode?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,1===r.tag&&(null===r.alternate?r.tag=17:((t=Ms(-1,1)).tag=2,Ds(r,t,1))),r.lanes|=1),e)}var yo=_.ReactCurrentOwner,_o=!1;function wo(e,t,r,n){t.child=null===e?ws(t,null,r,n):bs(t,e.child,r,n)}function Eo(e,t,r,n,i){r=r.render;var s=t.ref;return Os(t,i),n=ga(e,t,r,n,s,i),r=ma(),null===e||_o?(is&&r&&es(t),t.flags|=1,wo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,nl(e,t,i))}function So(e,t,r,n,i){if(null===e){var s=r.type;return"function"!=typeof s||Hc(s)||void 0!==s.defaultProps||null!==r.compare||void 0!==r.defaultProps?((e=Gc(r.type,null,n,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,To(e,t,s,n,i))}if(s=e.child,0===(e.lanes&i)){var a=s.memoizedProps;if((r=null!==(r=r.compare)?r:ln)(a,n)&&e.ref===t.ref)return nl(e,t,i)}return t.flags|=1,(e=Wc(s,n)).ref=t.ref,e.return=t,t.child=e}function To(e,t,r,n,i){if(null!==e){var s=e.memoizedProps;if(ln(s,n)&&e.ref===t.ref){if(_o=!1,t.pendingProps=n=s,0===(e.lanes&i))return t.lanes=e.lanes,nl(e,t,i);131072&e.flags&&(_o=!0)}}return $o(e,t,r,n,i)}function Oo(e,t,r){var n=t.pendingProps,i=n.children,s=null!==e?e.memoizedState:null;if("hidden"===n.mode)if(1&t.mode){if(!(1073741824&r))return e=null!==s?s.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ti(Wl,Hl),Hl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=null!==s?s.baseLanes:r,Ti(Wl,Hl),Hl|=n}else t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ti(Wl,Hl),Hl|=r;else null!==s?(n=s.baseLanes|r,t.memoizedState=null):n=r,Ti(Wl,Hl),Hl|=n;return wo(e,t,i,r),t.child}function Co(e,t){var r=t.ref;(null===e&&null!==r||null!==e&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function $o(e,t,r,n,i){var s=Ci(r)?Ii:Pi.current;return s=Ni(t,s),Os(t,i),r=ga(e,t,r,n,s,i),n=ma(),null===e||_o?(is&&n&&es(t),t.flags|=1,wo(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,nl(e,t,i))}function Lo(e,t,r,n,i){if(Ci(r)){var s=!0;Li(t)}else s=!1;if(Os(t,i),null===t.stateNode)rl(e,t),so(t,r,n),oo(t,r,n,i),n=!0;else if(null===e){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,c=r.contextType;"object"==typeof c&&null!==c?c=Is(c):c=Ni(t,c=Ci(r)?Ii:Pi.current);var u=r.getDerivedStateFromProps,d="function"==typeof u||"function"==typeof a.getSnapshotBeforeUpdate;d||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(o!==n||l!==c)&&ao(t,a,n,c),$s=!1;var h=t.memoizedState;a.state=h,Bs(t,n,a,i),l=t.memoizedState,o!==n||h!==l||Oi.current||$s?("function"==typeof u&&(ro(t,r,u,n),l=t.memoizedState),(o=$s||io(t,r,o,n,h,l,c))?(d||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(t.flags|=4194308)):("function"==typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=l),a.props=n,a.state=l,a.context=c,n=o):("function"==typeof a.componentDidMount&&(t.flags|=4194308),n=!1)}else{a=t.stateNode,Fs(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:to(t.type,o),a.props=c,d=t.pendingProps,h=a.context,"object"==typeof(l=r.contextType)&&null!==l?l=Is(l):l=Ni(t,l=Ci(r)?Ii:Pi.current);var f=r.getDerivedStateFromProps;(u="function"==typeof f||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(o!==d||h!==l)&&ao(t,a,n,l),$s=!1,h=t.memoizedState,a.state=h,Bs(t,n,a,i);var p=t.memoizedState;o!==d||h!==p||Oi.current||$s?("function"==typeof f&&(ro(t,r,f,n),p=t.memoizedState),(c=$s||io(t,r,c,n,h,p,l)||!1)?(u||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(n,p,l),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(n,p,l)),"function"==typeof a.componentDidUpdate&&(t.flags|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=p),a.props=n,a.state=p,a.context=l,n=c):("function"!=typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return Fo(e,t,r,n,s,i)}function Fo(e,t,r,n,i,s){Co(e,t);var a=!!(128&t.flags);if(!n&&!a)return i&&Fi(t,r,!1),nl(e,t,s);n=t.stateNode,yo.current=t;var o=a&&"function"!=typeof r.getDerivedStateFromError?null:n.render();return t.flags|=1,null!==e&&a?(t.child=bs(t,e.child,null,s),t.child=bs(t,null,o,s)):wo(e,t,o,s),t.memoizedState=n.state,i&&Fi(t,r,!0),t.child}function Do(e){var t=e.stateNode;t.pendingContext?Ai(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ai(0,t.context,!1),Js(e,t.containerInfo)}function zo(e,t,r,n,i){return fs(),ps(i),t.flags|=256,wo(e,t,r,n),t.child}var Bo,Vo,qo,Wo,Go={dehydrated:null,treeContext:null,retryLane:0};function Ko(e){return{baseLanes:e,cachePool:null,transitions:null}}function Jo(e,t,n){var i,s=t.pendingProps,a=Zs.current,o=!1,l=!!(128&t.flags);if((i=l)||(i=(null===e||null!==e.memoizedState)&&!!(2&a)),i?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Ti(Zs,1&a),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(1&t.mode?"$!"===e.data?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=s.children,e=s.fallback,o?(s=t.mode,o=t.child,l={mode:"hidden",children:l},1&s||null===o?o=Jc(l,s,0,null):(o.childLanes=0,o.pendingProps=l),e=Kc(e,s,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Ko(n),t.memoizedState=Go,e):Yo(t,l));if(null!==(a=e.memoizedState)&&null!==(i=a.dehydrated))return function(e,t,n,i,s,a,o){if(n)return 256&t.flags?(t.flags&=-257,Xo(e,t,o,i=co(Error(r(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=i.fallback,s=t.mode,i=Jc({mode:"visible",children:i.children},s,0,null),(a=Kc(a,s,o,null)).flags|=2,i.return=t,a.return=t,i.sibling=a,t.child=i,1&t.mode&&bs(t,e.child,null,o),t.child.memoizedState=Ko(o),t.memoizedState=Go,a);if(!(1&t.mode))return Xo(e,t,o,null);if("$!"===s.data){if(i=s.nextSibling&&s.nextSibling.dataset)var l=i.dgst;return i=l,Xo(e,t,o,i=co(a=Error(r(419)),i,void 0))}if(l=0!==(o&e.childLanes),_o||l){if(null!==(i=Bl)){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}0!==(s=0!==(s&(i.suspendedLanes|o))?0:s)&&s!==a.retryLane&&(a.retryLane=s,As(e,s),gc(i,e,s,-1))}return Pc(),Xo(e,t,o,i=co(Error(r(421))))}return"$?"===s.data?(t.flags|=128,t.child=e.child,t=Uc.bind(null,e),s._reactRetry=t,null):(e=a.treeContext,ns=ci(s.nextSibling),rs=t,is=!0,ss=null,null!==e&&(Gi[Ki++]=Yi,Gi[Ki++]=Qi,Gi[Ki++]=Ji,Yi=e.id,Qi=e.overflow,Ji=t),t=Yo(t,i.children),t.flags|=4096,t)}(e,t,l,s,i,a,n);if(o){o=s.fallback,l=t.mode,i=(a=e.child).sibling;var c={mode:"hidden",children:s.children};return 1&l||t.child===a?(s=Wc(a,c)).subtreeFlags=14680064&a.subtreeFlags:((s=t.child).childLanes=0,s.pendingProps=c,t.deletions=null),null!==i?o=Wc(i,o):(o=Kc(o,l,n,null)).flags|=2,o.return=t,s.return=t,s.sibling=o,t.child=s,s=o,o=t.child,l=null===(l=e.child.memoizedState)?Ko(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Go,s}return e=(o=e.child).sibling,s=Wc(o,{mode:"visible",children:s.children}),!(1&t.mode)&&(s.lanes=n),s.return=t,s.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=s,t.memoizedState=null,s}function Yo(e,t){return(t=Jc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Xo(e,t,r,n){return null!==n&&ps(n),bs(t,e.child,null,r),(e=Yo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Zo(e,t,r){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),Ps(e.return,t,r)}function el(e,t,r,n,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=i)}function tl(e,t,r){var n=t.pendingProps,i=n.revealOrder,s=n.tail;if(wo(e,t,n.children,r),2&(n=Zs.current))n=1&n|2,t.flags|=128;else{if(null!==e&&128&e.flags)e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Zo(e,r,t);else if(19===e.tag)Zo(e,r,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Ti(Zs,n),1&t.mode)switch(i){case"forwards":for(r=t.child,i=null;null!==r;)null!==(e=r.alternate)&&null===ea(e)&&(i=r),r=r.sibling;null===(r=i)?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),el(t,!1,i,r,s);break;case"backwards":for(r=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ea(e)){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}el(t,!0,r,null,s);break;case"together":el(t,!1,null,null,void 0);break;default:t.memoizedState=null}else t.memoizedState=null;return t.child}function rl(e,t){!(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function nl(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Jl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(r(153));if(null!==t.child){for(n=Wc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Wc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function il(e,t){if(!is)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;null!==r;)null!==r.alternate&&(n=r),r=r.sibling;null===n?t||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function sl(e){var t=null!==e.alternate&&e.alternate.child===e.child,r=0,n=0;if(t)for(var i=e.child;null!==i;)r|=i.lanes|i.childLanes,n|=14680064&i.subtreeFlags,n|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function al(e,t,n){var s=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return sl(t),null;case 1:case 17:return Ci(t.type)&&Ri(),sl(t),null;case 3:return s=t.stateNode,Ys(),Si(Oi),Si(Pi),ra(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),null!==e&&null!==e.child||(ds(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&!(256&t.flags)||(t.flags|=1024,null!==ss&&(_c(ss),ss=null))),Vo(e,t),sl(t),null;case 5:Xs(t);var a=Ks(Gs.current);if(n=t.type,null!==e&&null!=t.stateNode)qo(e,t,n,s,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(null===t.stateNode)throw Error(r(166));return sl(t),null}if(e=Ks(Hs.current),ds(t)){s=t.stateNode,n=t.type;var o=t.memoizedProps;switch(s[hi]=t,s[fi]=o,e=!!(1&t.mode),n){case"dialog":Dn("cancel",s),Dn("close",s);break;case"iframe":case"object":case"embed":Dn("load",s);break;case"video":case"audio":for(a=0;a<$n.length;a++)Dn($n[a],s);break;case"source":Dn("error",s);break;case"img":case"image":case"link":Dn("error",s),Dn("load",s);break;case"details":Dn("toggle",s);break;case"input":Q(s,o),Dn("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!o.multiple},Dn("invalid",s);break;case"textarea":se(s,o),Dn("invalid",s)}for(var l in ye(n,o),a=null,o)if(o.hasOwnProperty(l)){var c=o[l];"children"===l?"string"==typeof c?s.textContent!==c&&(!0!==o.suppressHydrationWarning&&Xn(s.textContent,c,e),a=["children",c]):"number"==typeof c&&s.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Xn(s.textContent,c,e),a=["children",""+c]):i.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Dn("scroll",s)}switch(n){case"input":G(s),ee(s,o,!0);break;case"textarea":G(s),oe(s);break;case"select":case"option":break;default:"function"==typeof o.onClick&&(s.onclick=Zn)}s=a,t.updateQueue=s,null!==s&&(t.flags|=4)}else{l=9===a.nodeType?a:a.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=le(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof s.is?e=l.createElement(n,{is:s.is}):(e=l.createElement(n),"select"===n&&(l=e,s.multiple?l.multiple=!0:s.size&&(l.size=s.size))):e=l.createElementNS(e,n),e[hi]=t,e[fi]=s,Bo(e,t,!1,!1),t.stateNode=e;e:{switch(l=_e(n,s),n){case"dialog":Dn("cancel",e),Dn("close",e),a=s;break;case"iframe":case"object":case"embed":Dn("load",e),a=s;break;case"video":case"audio":for(a=0;a<$n.length;a++)Dn($n[a],e);a=s;break;case"source":Dn("error",e),a=s;break;case"img":case"image":case"link":Dn("error",e),Dn("load",e),a=s;break;case"details":Dn("toggle",e),a=s;break;case"input":Q(e,s),a=Y(e,s),Dn("invalid",e);break;case"option":default:a=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},a=M({},s,{value:void 0}),Dn("invalid",e);break;case"textarea":se(e,s),a=ie(e,s),Dn("invalid",e)}for(o in ye(n,a),c=a)if(c.hasOwnProperty(o)){var u=c[o];"style"===o?me(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===o?"string"==typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"==typeof u&&he(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(i.hasOwnProperty(o)?null!=u&&"onScroll"===o&&Dn("scroll",e):null!=u&&y(e,o,u,l))}switch(n){case"input":G(e),ee(e,s,!1);break;case"textarea":G(e),oe(e);break;case"option":null!=s.value&&e.setAttribute("value",""+H(s.value));break;case"select":e.multiple=!!s.multiple,null!=(o=s.value)?ne(e,!!s.multiple,o,!1):null!=s.defaultValue&&ne(e,!!s.multiple,s.defaultValue,!0);break;default:"function"==typeof a.onClick&&(e.onclick=Zn)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return sl(t),null;case 6:if(e&&null!=t.stateNode)Wo(e,t,e.memoizedProps,s);else{if("string"!=typeof s&&null===t.stateNode)throw Error(r(166));if(n=Ks(Gs.current),Ks(Hs.current),ds(t)){if(s=t.stateNode,n=t.memoizedProps,s[hi]=t,(o=s.nodeValue!==n)&&null!==(e=rs))switch(e.tag){case 3:Xn(s.nodeValue,n,!!(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xn(s.nodeValue,n,!!(1&e.mode))}o&&(t.flags|=4)}else(s=(9===n.nodeType?n:n.ownerDocument).createTextNode(s))[hi]=t,t.stateNode=s}return sl(t),null;case 13:if(Si(Zs),s=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(is&&null!==ns&&1&t.mode&&!(128&t.flags))hs(),fs(),t.flags|=98560,o=!1;else if(o=ds(t),null!==s&&null!==s.dehydrated){if(null===e){if(!o)throw Error(r(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(r(317));o[hi]=t}else fs(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;sl(t),o=!1}else null!==ss&&(_c(ss),ss=null),o=!0;if(!o)return 65536&t.flags?t:null}return 128&t.flags?(t.lanes=n,t):((s=null!==s)!==(null!==e&&null!==e.memoizedState)&&s&&(t.child.flags|=8192,1&t.mode&&(null===e||1&Zs.current?0===Gl&&(Gl=3):Pc())),null!==t.updateQueue&&(t.flags|=4),sl(t),null);case 4:return Ys(),Vo(e,t),null===e&&Bn(t.stateNode.containerInfo),sl(t),null;case 10:return js(t.type._context),sl(t),null;case 19:if(Si(Zs),null===(o=t.memoizedState))return sl(t),null;if(s=!!(128&t.flags),null===(l=o.rendering))if(s)il(o,!1);else{if(0!==Gl||null!==e&&128&e.flags)for(e=t.child;null!==e;){if(null!==(l=ea(e))){for(t.flags|=128,il(o,!1),null!==(s=l.updateQueue)&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=n,n=t.child;null!==n;)e=s,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ti(Zs,1&Zs.current|2),t.child}e=e.sibling}null!==o.tail&&Qe()>tc&&(t.flags|=128,s=!0,il(o,!1),t.lanes=4194304)}else{if(!s)if(null!==(e=ea(l))){if(t.flags|=128,s=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),il(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!is)return sl(t),null}else 2*Qe()-o.renderingStartTime>tc&&1073741824!==n&&(t.flags|=128,s=!0,il(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Qe(),t.sibling=null,n=Zs.current,Ti(Zs,s?1&n|2:1&n),t):(sl(t),null);case 22:case 23:return Ec(),s=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==s&&(t.flags|=8192),s&&1&t.mode?!!(1073741824&Hl)&&(sl(t),6&t.subtreeFlags&&(t.flags|=8192)):sl(t),null;case 24:case 25:return null}throw Error(r(156,t.tag))}function ol(e,t){switch(ts(t),t.tag){case 1:return Ci(t.type)&&Ri(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Ys(),Si(Oi),Si(Pi),ra(),65536&(e=t.flags)&&!(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Xs(t),null;case 13:if(Si(Zs),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(r(340));fs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Si(Zs),null;case 4:return Ys(),null;case 10:return js(t.type._context),null;case 22:case 23:return Ec(),null;default:return null}}Bo=function(e,t){for(var r=t.child;null!==r;){if(5===r.tag||6===r.tag)e.appendChild(r.stateNode);else if(4!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},Vo=function(){},qo=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,Ks(Hs.current);var a,o=null;switch(r){case"input":s=Y(e,s),n=Y(e,n),o=[];break;case"select":s=M({},s,{value:void 0}),n=M({},n,{value:void 0}),o=[];break;case"textarea":s=ie(e,s),n=ie(e,n),o=[];break;default:"function"!=typeof s.onClick&&"function"==typeof n.onClick&&(e.onclick=Zn)}for(u in ye(r,n),r=null,s)if(!n.hasOwnProperty(u)&&s.hasOwnProperty(u)&&null!=s[u])if("style"===u){var l=s[u];for(a in l)l.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(i.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in n){var c=n[u];if(l=null!=s?s[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(r||(r={}),r[a]=c[a])}else r||(o||(o=[]),o.push(u,r)),r=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(o=o||[]).push(u,c)):"children"===u?"string"!=typeof c&&"number"!=typeof c||(o=o||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(i.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Dn("scroll",e),o||l===c||(o=[])):(o=o||[]).push(u,c))}r&&(o=o||[]).push("style",r);var u=o;(t.updateQueue=u)&&(t.flags|=4)}},Wo=function(e,t,r,n){r!==n&&(t.flags|=4)};var ll=!1,cl=!1,ul="function"==typeof WeakSet?WeakSet:Set,dl=null;function hl(e,t){var r=e.ref;if(null!==r)if("function"==typeof r)try{r(null)}catch(No){Fc(e,t,No)}else r.current=null}function fl(e,t,r){try{r()}catch(No){Fc(e,t,No)}}var pl=!1;function gl(e,t,r){var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var i=n=n.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&fl(t,r,s)}i=i.next}while(i!==n)}}function ml(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function vl(e){var t=e.ref;if(null!==t){var r=e.stateNode;e.tag,e=r,"function"==typeof t?t(e):t.current=e}}function yl(e){var t=e.alternate;null!==t&&(e.alternate=null,yl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[fi],delete t[gi],delete t[mi],delete t[vi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function _l(e){return 5===e.tag||3===e.tag||4===e.tag}function bl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||_l(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function wl(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?8===r.nodeType?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(8===r.nodeType?(t=r.parentNode).insertBefore(e,r):(t=r).appendChild(e),null!=(r=r._reactRootContainer)||null!==t.onclick||(t.onclick=Zn));else if(4!==n&&null!==(e=e.child))for(wl(e,t,r),e=e.sibling;null!==e;)wl(e,t,r),e=e.sibling}function xl(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(4!==n&&null!==(e=e.child))for(xl(e,t,r),e=e.sibling;null!==e;)xl(e,t,r),e=e.sibling}var kl=null,El=!1;function Sl(e,t,r){for(r=r.child;null!==r;)Tl(e,t,r),r=r.sibling}function Tl(e,t,r){if(st&&"function"==typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,r)}catch(Io){}switch(r.tag){case 5:cl||hl(r,t);case 6:var n=kl,i=El;kl=null,Sl(e,t,r),El=i,null!==(kl=n)&&(El?(e=kl,r=r.stateNode,8===e.nodeType?e.parentNode.removeChild(r):e.removeChild(r)):kl.removeChild(r.stateNode));break;case 18:null!==kl&&(El?(e=kl,r=r.stateNode,8===e.nodeType?li(e.parentNode,r):1===e.nodeType&&li(e,r),Bt(e)):li(kl,r.stateNode));break;case 4:n=kl,i=El,kl=r.stateNode.containerInfo,El=!0,Sl(e,t,r),kl=n,El=i;break;case 0:case 11:case 14:case 15:if(!cl&&(null!==(n=r.updateQueue)&&null!==(n=n.lastEffect))){i=n=n.next;do{var s=i,a=s.destroy;s=s.tag,void 0!==a&&(2&s||4&s)&&fl(r,t,a),i=i.next}while(i!==n)}Sl(e,t,r);break;case 1:if(!cl&&(hl(r,t),"function"==typeof(n=r.stateNode).componentWillUnmount))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(Io){Fc(r,t,Io)}Sl(e,t,r);break;case 21:Sl(e,t,r);break;case 22:1&r.mode?(cl=(n=cl)||null!==r.memoizedState,Sl(e,t,r),cl=n):Sl(e,t,r);break;default:Sl(e,t,r)}}function jl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var r=e.stateNode;null===r&&(r=e.stateNode=new ul),t.forEach(function(t){var n=zc.bind(null,e,t);r.has(t)||(r.add(t),t.then(n,n))})}}function Pl(e,t){var n=t.deletions;if(null!==n)for(var i=0;i<n.length;i++){var s=n[i];try{var a=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:kl=l.stateNode,El=!1;break e;case 3:case 4:kl=l.stateNode.containerInfo,El=!0;break e}l=l.return}if(null===kl)throw Error(r(160));Tl(a,o,s),kl=null,El=!1;var c=s.alternate;null!==c&&(c.return=null),s.return=null}catch(Po){Fc(s,t,Po)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)Ol(t,e),t=t.sibling}function Ol(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Pl(t,e),Il(e),4&i){try{gl(3,e,e.return),ml(3,e)}catch(bo){Fc(e,e.return,bo)}try{gl(5,e,e.return)}catch(bo){Fc(e,e.return,bo)}}break;case 1:Pl(t,e),Il(e),512&i&&null!==n&&hl(n,n.return);break;case 5:if(Pl(t,e),Il(e),512&i&&null!==n&&hl(n,n.return),32&e.flags){var s=e.stateNode;try{he(s,"")}catch(bo){Fc(e,e.return,bo)}}if(4&i&&null!=(s=e.stateNode)){var a=e.memoizedProps,o=null!==n?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&X(s,a),_e(l,o);var u=_e(l,a);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];"style"===d?me(s,h):"dangerouslySetInnerHTML"===d?de(s,h):"children"===d?he(s,h):y(s,d,h,u)}switch(l){case"input":Z(s,a);break;case"textarea":ae(s,a);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var p=a.value;null!=p?ne(s,!!a.multiple,p,!1):f!==!!a.multiple&&(null!=a.defaultValue?ne(s,!!a.multiple,a.defaultValue,!0):ne(s,!!a.multiple,a.multiple?[]:"",!1))}s[fi]=a}catch(bo){Fc(e,e.return,bo)}}break;case 6:if(Pl(t,e),Il(e),4&i){if(null===e.stateNode)throw Error(r(162));s=e.stateNode,a=e.memoizedProps;try{s.nodeValue=a}catch(bo){Fc(e,e.return,bo)}}break;case 3:if(Pl(t,e),Il(e),4&i&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(bo){Fc(e,e.return,bo)}break;case 4:default:Pl(t,e),Il(e);break;case 13:Pl(t,e),Il(e),8192&(s=e.child).flags&&(a=null!==s.memoizedState,s.stateNode.isHidden=a,!a||null!==s.alternate&&null!==s.alternate.memoizedState||(ec=Qe())),4&i&&jl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(cl=(u=cl)||d,Pl(t,e),cl=u):Pl(t,e),Il(e),8192&i){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&1&e.mode)for(dl=e,d=e.child;null!==d;){for(h=dl=d;null!==dl;){switch(p=(f=dl).child,f.tag){case 0:case 11:case 14:case 15:gl(4,f,f.return);break;case 1:hl(f,f.return);var g=f.stateNode;if("function"==typeof g.componentWillUnmount){i=f,n=f.return;try{t=i,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(bo){Fc(i,n,bo)}}break;case 5:hl(f,f.return);break;case 22:if(null!==f.memoizedState){Al(h);continue}}null!==p?(p.return=f,dl=p):Al(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{s=h.stateNode,u?"function"==typeof(a=s.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=h.stateNode,o=null!=(c=h.memoizedProps.style)&&c.hasOwnProperty("display")?c.display:null,l.style.display=ge("display",o))}catch(bo){Fc(e,e.return,bo)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(bo){Fc(e,e.return,bo)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Pl(t,e),Il(e),4&i&&jl(e);case 21:}}function Il(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(_l(n)){var i=n;break e}n=n.return}throw Error(r(160))}switch(i.tag){case 5:var s=i.stateNode;32&i.flags&&(he(s,""),i.flags&=-33),xl(e,bl(e),s);break;case 3:case 4:var a=i.stateNode.containerInfo;wl(e,bl(e),a);break;default:throw Error(r(161))}}catch(Ho){Fc(e,e.return,Ho)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Nl(e,t,r){dl=e,Cl(e)}function Cl(e,t,r){for(var n=!!(1&e.mode);null!==dl;){var i=dl,s=i.child;if(22===i.tag&&n){var a=null!==i.memoizedState||ll;if(!a){var o=i.alternate,l=null!==o&&null!==o.memoizedState||cl;o=ll;var c=cl;if(ll=a,(cl=l)&&!c)for(dl=i;null!==dl;)l=(a=dl).child,22===a.tag&&null!==a.memoizedState?$l(i):null!==l?(l.return=a,dl=l):$l(i);for(;null!==s;)dl=s,Cl(s),s=s.sibling;dl=i,ll=o,cl=c}Rl(e)}else 8772&i.subtreeFlags&&null!==s?(s.return=i,dl=s):Rl(e)}}function Rl(e){for(;null!==dl;){var t=dl;if(8772&t.flags){var n=t.alternate;try{if(8772&t.flags)switch(t.tag){case 0:case 11:case 15:cl||ml(5,t);break;case 1:var i=t.stateNode;if(4&t.flags&&!cl)if(null===n)i.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:to(t.type,n.memoizedProps);i.componentDidUpdate(s,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Vs(t,a,i);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Vs(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Bt(h)}}}break;default:throw Error(r(163))}cl||512&t.flags&&vl(t)}catch(ko){Fc(t,t.return,ko)}}if(t===e){dl=null;break}if(null!==(n=t.sibling)){n.return=t.return,dl=n;break}dl=t.return}}function Al(e){for(;null!==dl;){var t=dl;if(t===e){dl=null;break}var r=t.sibling;if(null!==r){r.return=t.return,dl=r;break}dl=t.return}}function $l(e){for(;null!==dl;){var t=dl;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{ml(4,t)}catch(Ho){Fc(t,r,Ho)}break;case 1:var n=t.stateNode;if("function"==typeof n.componentDidMount){var i=t.return;try{n.componentDidMount()}catch(Ho){Fc(t,i,Ho)}}var s=t.return;try{vl(t)}catch(Ho){Fc(t,s,Ho)}break;case 5:var a=t.return;try{vl(t)}catch(Ho){Fc(t,a,Ho)}}}catch(Ho){Fc(t,t.return,Ho)}if(t===e){dl=null;break}var o=t.sibling;if(null!==o){o.return=t.return,dl=o;break}dl=t.return}}var Ll,Fl=Math.ceil,Ml=_.ReactCurrentDispatcher,Dl=_.ReactCurrentOwner,Ul=_.ReactCurrentBatchConfig,zl=0,Bl=null,Vl=null,ql=0,Hl=0,Wl=Ei(0),Gl=0,Kl=null,Jl=0,Yl=0,Ql=0,Xl=null,Zl=null,ec=0,tc=1/0,rc=null,nc=!1,ic=null,sc=null,ac=!1,oc=null,lc=0,cc=0,uc=null,dc=-1,hc=0;function fc(){return 6&zl?Qe():-1!==dc?dc:dc=Qe()}function pc(e){return 1&e.mode?2&zl&&0!==ql?ql&-ql:null!==gs.transition?(0===hc&&(hc=gt()),hc):0!==(e=_t)?e:e=void 0===(e=window.event)?16:Yt(e.type):1}function gc(e,t,n,i){if(50<cc)throw cc=0,uc=null,Error(r(185));vt(e,n,i),2&zl&&e===Bl||(e===Bl&&(!(2&zl)&&(Yl|=n),4===Gl&&bc(e,ql)),mc(e,i),1===n&&0===zl&&!(1&t.mode)&&(tc=Qe()+500,Di&&Bi()))}function mc(e,t){var r=e.callbackNode;!function(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-at(s),o=1<<a,l=i[a];-1===l?0!==(o&r)&&0===(o&n)||(i[a]=ft(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}}(e,t);var n=ht(e,e===Bl?ql:0);if(0===n)null!==r&&Ke(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(null!=r&&Ke(r),1===t)0===e.tag?function(e){Di=!0,zi(e)}(wc.bind(null,e)):zi(wc.bind(null,e)),ai(function(){!(6&zl)&&Bi()}),r=null;else{switch(bt(n)){case 1:r=Ze;break;case 4:r=et;break;case 16:default:r=tt;break;case 536870912:r=nt}r=Bc(r,vc.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function vc(e,t){if(dc=-1,hc=0,6&zl)throw Error(r(327));var n=e.callbackNode;if($c()&&e.callbackNode!==n)return null;var i=ht(e,e===Bl?ql:0);if(0===i)return null;if(30&i||0!==(i&e.expiredLanes)||t)t=Oc(e,i);else{t=i;var s=zl;zl|=2;var a=jc();for(Bl===e&&ql===t||(rc=null,tc=Qe()+500,Sc(e,t));;)try{Nc();break}catch(Io){Tc(e,Io)}Ts(),Ml.current=a,zl=s,null!==Vl?t=0:(Bl=null,ql=0,t=Gl)}if(0!==t){if(2===t&&(0!==(s=pt(e))&&(i=s,t=yc(e,s))),1===t)throw n=Kl,Sc(e,0),bc(e,i),mc(e,Qe()),n;if(6===t)bc(e,i);else{if(s=e.current.alternate,!(30&i||function(e){for(var t=e;;){if(16384&t.flags){var r=t.updateQueue;if(null!==r&&null!==(r=r.stores))for(var n=0;n<r.length;n++){var i=r[n],s=i.getSnapshot;i=i.value;try{if(!on(s(),i))return!1}catch(o){return!1}}}if(r=t.child,16384&t.subtreeFlags&&null!==r)r.return=t,t=r;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(s)||(t=Oc(e,i),2===t&&(a=pt(e),0!==a&&(i=a,t=yc(e,a))),1!==t)))throw n=Kl,Sc(e,0),bc(e,i),mc(e,Qe()),n;switch(e.finishedWork=s,e.finishedLanes=i,t){case 0:case 1:throw Error(r(345));case 2:case 5:Ac(e,Zl,rc);break;case 3:if(bc(e,i),(130023424&i)===i&&10<(t=ec+500-Qe())){if(0!==ht(e,0))break;if(((s=e.suspendedLanes)&i)!==i){fc(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=ni(Ac.bind(null,e,Zl,rc),t);break}Ac(e,Zl,rc);break;case 4:if(bc(e,i),(4194240&i)===i)break;for(t=e.eventTimes,s=-1;0<i;){var o=31-at(i);a=1<<o,(o=t[o])>s&&(s=o),i&=~a}if(i=s,10<(i=(120>(i=Qe()-i)?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Fl(i/1960))-i)){e.timeoutHandle=ni(Ac.bind(null,e,Zl,rc),i);break}Ac(e,Zl,rc);break;default:throw Error(r(329))}}}return mc(e,Qe()),e.callbackNode===n?vc.bind(null,e):null}function yc(e,t){var r=Xl;return e.current.memoizedState.isDehydrated&&(Sc(e,t).flags|=256),2!==(e=Oc(e,t))&&(t=Zl,Zl=r,null!==t&&_c(t)),e}function _c(e){null===Zl?Zl=e:Zl.push.apply(Zl,e)}function bc(e,t){for(t&=~Ql,t&=~Yl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-at(t),n=1<<r;e[r]=-1,t&=~n}}function wc(e){if(6&zl)throw Error(r(327));$c();var t=ht(e,0);if(!(1&t))return mc(e,Qe()),null;var n=Oc(e,t);if(0!==e.tag&&2===n){var i=pt(e);0!==i&&(t=i,n=yc(e,i))}if(1===n)throw n=Kl,Sc(e,0),bc(e,t),mc(e,Qe()),n;if(6===n)throw Error(r(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ac(e,Zl,rc),mc(e,Qe()),null}function xc(e,t){var r=zl;zl|=1;try{return e(t)}finally{0===(zl=r)&&(tc=Qe()+500,Di&&Bi())}}function kc(e){null!==oc&&0===oc.tag&&!(6&zl)&&$c();var t=zl;zl|=1;var r=Ul.transition,n=_t;try{if(Ul.transition=null,_t=1,e)return e()}finally{_t=n,Ul.transition=r,!(6&(zl=t))&&Bi()}}function Ec(){Hl=Wl.current,Si(Wl)}function Sc(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(-1!==r&&(e.timeoutHandle=-1,ii(r)),null!==Vl)for(r=Vl.return;null!==r;){var n=r;switch(ts(n),n.tag){case 1:null!=(n=n.type.childContextTypes)&&Ri();break;case 3:Ys(),Si(Oi),Si(Pi),ra();break;case 5:Xs(n);break;case 4:Ys();break;case 13:case 19:Si(Zs);break;case 10:js(n.type._context);break;case 22:case 23:Ec()}r=r.return}if(Bl=e,Vl=e=Wc(e.current,null),ql=Hl=t,Gl=0,Kl=null,Ql=Yl=Jl=0,Zl=Xl=null,null!==Ns){for(t=0;t<Ns.length;t++)if(null!==(n=(r=Ns[t]).interleaved)){r.interleaved=null;var i=n.next,s=r.pending;if(null!==s){var a=s.next;s.next=i,n.next=a}r.pending=n}Ns=null}return e}function Tc(e,t){for(;;){var n=Vl;try{if(Ts(),na.current=Qa,ca){for(var i=aa.memoizedState;null!==i;){var s=i.queue;null!==s&&(s.pending=null),i=i.next}ca=!1}if(sa=0,la=oa=aa=null,ua=!1,da=0,Dl.current=null,null===n||null===n.return){Gl=1,Kl=t,Vl=null;break}e:{var a=e,o=n.return,l=n,c=t;if(t=ql,l.flags|=32768,null!==c&&"object"==typeof c&&"function"==typeof c.then){var u=c,d=l,h=d.tag;if(!(1&d.mode||0!==h&&11!==h&&15!==h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=mo(o);if(null!==p){p.flags&=-257,vo(p,o,l,0,t),1&p.mode&&go(a,u,t),c=u;var g=(t=p).updateQueue;if(null===g){var m=new Set;m.add(c),t.updateQueue=m}else g.add(c);break e}if(!(1&t)){go(a,u,t),Pc();break e}c=Error(r(426))}else if(is&&1&l.mode){var v=mo(o);if(null!==v){!(65536&v.flags)&&(v.flags|=256),vo(v,o,l,0,t),ps(lo(c,l));break e}}a=c=lo(c,l),4!==Gl&&(Gl=2),null===Xl?Xl=[a]:Xl.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,zs(a,fo(0,c,t));break e;case 1:l=c;var y=a.type,_=a.stateNode;if(!(128&a.flags||"function"!=typeof y.getDerivedStateFromError&&(null===_||"function"!=typeof _.componentDidCatch||null!==sc&&sc.has(_)))){a.flags|=65536,t&=-t,a.lanes|=t,zs(a,po(a,l,t));break e}}a=a.return}while(null!==a)}Rc(n)}catch(b){t=b,Vl===n&&null!==n&&(Vl=n=n.return);continue}break}}function jc(){var e=Ml.current;return Ml.current=Qa,null===e?Qa:e}function Pc(){0!==Gl&&3!==Gl&&2!==Gl||(Gl=4),null===Bl||!(268435455&Jl)&&!(268435455&Yl)||bc(Bl,ql)}function Oc(e,t){var n=zl;zl|=2;var i=jc();for(Bl===e&&ql===t||(rc=null,Sc(e,t));;)try{Ic();break}catch(xo){Tc(e,xo)}if(Ts(),zl=n,Ml.current=i,null!==Vl)throw Error(r(261));return Bl=null,ql=0,Gl}function Ic(){for(;null!==Vl;)Cc(Vl)}function Nc(){for(;null!==Vl&&!Je();)Cc(Vl)}function Cc(e){var t=Ll(e.alternate,e,Hl);e.memoizedProps=e.pendingProps,null===t?Rc(e):Vl=t,Dl.current=null}function Rc(e){var t=e;do{var r=t.alternate;if(e=t.return,32768&t.flags){if(null!==(r=ol(r,t)))return r.flags&=32767,void(Vl=r);if(null===e)return Gl=6,void(Vl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}else if(null!==(r=al(r,t,Hl)))return void(Vl=r);if(null!==(t=t.sibling))return void(Vl=t);Vl=t=e}while(null!==t);0===Gl&&(Gl=5)}function Ac(e,t,n){var i=_t,s=Ul.transition;try{Ul.transition=null,_t=1,function(e,t,n,i){do{$c()}while(null!==oc);if(6&zl)throw Error(r(327));n=e.finishedWork;var s=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(r(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var i=31-at(r),s=1<<i;t[i]=0,n[i]=-1,e[i]=-1,r&=~s}}(e,a),e===Bl&&(Vl=Bl=null,ql=0),!(2064&n.subtreeFlags)&&!(2064&n.flags)||ac||(ac=!0,Bc(tt,function(){return $c(),null})),a=!!(15990&n.flags),!!(15990&n.subtreeFlags)||a){a=Ul.transition,Ul.transition=null;var o=_t;_t=1;var l=zl;zl|=4,Dl.current=null,function(e,t){if(ei=qt,fn(e=hn())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var i=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(i&&0!==i.rangeCount){n=i.anchorNode;var s=i.anchorOffset,a=i.focusNode;i=i.focusOffset;try{n.nodeType,a.nodeType}catch(Qo){n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==s&&3!==h.nodeType||(l=o+s),h!==a||0!==i&&3!==h.nodeType||(c=o+i),3===h.nodeType&&(o+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++u===s&&(l=o),f===a&&++d===i&&(c=o),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},qt=!1,dl=t;null!==dl;)if(e=(t=dl).child,1028&t.subtreeFlags&&null!==e)e.return=t,dl=e;else for(;null!==dl;){t=dl;try{var g=t.alternate;if(1024&t.flags)switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var m=g.memoizedProps,v=g.memoizedState,y=t.stateNode,_=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:to(t.type,m),v);y.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(r(163))}}catch(Qo){Fc(t,t.return,Qo)}if(null!==(e=t.sibling)){e.return=t.return,dl=e;break}dl=t.return}g=pl,pl=!1}(e,n),Ol(n,e),pn(ti),qt=!!ei,ti=ei=null,e.current=n,Nl(n),Ye(),zl=l,_t=o,Ul.transition=a}else e.current=n;if(ac&&(ac=!1,oc=e,lc=s),a=e.pendingLanes,0===a&&(sc=null),function(e){if(st&&"function"==typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,!(128&~e.current.flags))}catch(t){}}(n.stateNode),mc(e,Qe()),null!==t)for(i=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],i(s.value,{componentStack:s.stack,digest:s.digest});if(nc)throw nc=!1,e=ic,ic=null,e;!!(1&lc)&&0!==e.tag&&$c(),a=e.pendingLanes,1&a?e===uc?cc++:(cc=0,uc=e):cc=0,Bi()}(e,t,n,i)}finally{Ul.transition=s,_t=i}return null}function $c(){if(null!==oc){var e=bt(lc),t=Ul.transition,n=_t;try{if(Ul.transition=null,_t=16>e?16:e,null===oc)var i=!1;else{if(e=oc,oc=null,lc=0,6&zl)throw Error(r(331));var s=zl;for(zl|=4,dl=e.current;null!==dl;){var a=dl,o=a.child;if(16&dl.flags){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(dl=u;null!==dl;){var d=dl;switch(d.tag){case 0:case 11:case 15:gl(8,d,a)}var h=d.child;if(null!==h)h.return=d,dl=h;else for(;null!==dl;){var f=(d=dl).sibling,p=d.return;if(yl(d),d===u){dl=null;break}if(null!==f){f.return=p,dl=f;break}dl=p}}}var g=a.alternate;if(null!==g){var m=g.child;if(null!==m){g.child=null;do{var v=m.sibling;m.sibling=null,m=v}while(null!==m)}}dl=a}}if(2064&a.subtreeFlags&&null!==o)o.return=a,dl=o;else e:for(;null!==dl;){if(2048&(a=dl).flags)switch(a.tag){case 0:case 11:case 15:gl(9,a,a.return)}var y=a.sibling;if(null!==y){y.return=a.return,dl=y;break e}dl=a.return}}var _=e.current;for(dl=_;null!==dl;){var b=(o=dl).child;if(2064&o.subtreeFlags&&null!==b)b.return=o,dl=b;else e:for(o=_;null!==dl;){if(2048&(l=dl).flags)try{switch(l.tag){case 0:case 11:case 15:ml(9,l)}}catch(x){Fc(l,l.return,x)}if(l===o){dl=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,dl=w;break e}dl=l.return}}if(zl=s,Bi(),st&&"function"==typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(x){}i=!0}return i}finally{_t=n,Ul.transition=t}}return!1}function Lc(e,t,r){e=Ds(e,t=fo(0,t=lo(r,t),1),1),t=fc(),null!==e&&(vt(e,1,t),mc(e,t))}function Fc(e,t,r){if(3===e.tag)Lc(e,e,r);else for(;null!==t;){if(3===t.tag){Lc(t,e,r);break}if(1===t.tag){var n=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof n.componentDidCatch&&(null===sc||!sc.has(n))){t=Ds(t,e=po(t,e=lo(r,e),1),1),e=fc(),null!==t&&(vt(t,1,e),mc(t,e));break}}t=t.return}}function Mc(e,t,r){var n=e.pingCache;null!==n&&n.delete(t),t=fc(),e.pingedLanes|=e.suspendedLanes&r,Bl===e&&(ql&r)===r&&(4===Gl||3===Gl&&(130023424&ql)===ql&&500>Qe()-ec?Sc(e,0):Ql|=r),mc(e,t)}function Dc(e,t){0===t&&(1&e.mode?(t=ut,!(130023424&(ut<<=1))&&(ut=4194304)):t=1);var r=fc();null!==(e=As(e,t))&&(vt(e,t,r),mc(e,r))}function Uc(e){var t=e.memoizedState,r=0;null!==t&&(r=t.retryLane),Dc(e,r)}function zc(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,s=e.memoizedState;null!==s&&(n=s.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(r(314))}null!==i&&i.delete(t),Dc(e,n)}function Bc(e,t){return Ge(e,t)}function Vc(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qc(e,t,r,n){return new Vc(e,t,r,n)}function Hc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Wc(e,t){var r=e.alternate;return null===r?((r=qc(e.tag,t,e.key,e.mode)).elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=14680064&e.flags,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Gc(e,t,n,i,s,a){var o=2;if(i=e,"function"==typeof e)Hc(e)&&(o=1);else if("string"==typeof e)o=5;else e:switch(e){case x:return Kc(n.children,s,a,t);case E:o=8,s|=8;break;case S:return(e=qc(12,n,t,2|s)).elementType=S,e.lanes=a,e;case I:return(e=qc(13,n,t,s)).elementType=I,e.lanes=a,e;case N:return(e=qc(19,n,t,s)).elementType=N,e.lanes=a,e;case A:return Jc(n,s,a,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case j:o=10;break e;case P:o=9;break e;case O:o=11;break e;case C:o=14;break e;case R:o=16,i=null;break e}throw Error(r(130,null==e?e:typeof e,""))}return(t=qc(o,n,t,s)).elementType=e,t.type=i,t.lanes=a,t}function Kc(e,t,r,n){return(e=qc(7,e,n,t)).lanes=r,e}function Jc(e,t,r,n){return(e=qc(22,e,n,t)).elementType=A,e.lanes=r,e.stateNode={isHidden:!1},e}function Yc(e,t,r){return(e=qc(6,e,null,t)).lanes=r,e}function Qc(e,t,r){return(t=qc(4,null!==e.children?e.children:[],e.key,t)).lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Xc(e,t,r,n,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Zc(e,t,r,n,i,s,a,o,l){return e=new Xc(e,t,r,o,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=qc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ls(s),e}function eu(e){if(!e)return ji;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(r(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ci(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(r(171))}if(1===e.tag){var n=e.type;if(Ci(n))return $i(e,n,t)}return t}function tu(e,t,r,n,i,s,a,o,l){return(e=Zc(r,n,!0,e,0,s,0,o,l)).context=eu(null),r=e.current,(s=Ms(n=fc(),i=pc(r))).callback=null!=t?t:null,Ds(r,s,i),e.current.lanes=i,vt(e,i,n),mc(e,n),e}function ru(e,t,r,n){var i=t.current,s=fc(),a=pc(i);return r=eu(r),null===t.context?t.context=r:t.pendingContext=r,(t=Ms(s,a)).payload={element:e},null!==(n=void 0===n?null:n)&&(t.callback=n),null!==(e=Ds(i,t,a))&&(gc(e,i,a,s),Us(e,i,a)),a}function nu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function iu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var r=e.retryLane;e.retryLane=0!==r&&r<t?r:t}}function su(e,t){iu(e,t),(e=e.alternate)&&iu(e,t)}Ll=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Oi.current)_o=!0;else{if(0===(e.lanes&n)&&!(128&t.flags))return _o=!1,function(e,t,r){switch(t.tag){case 3:Do(t),fs();break;case 5:Qs(t);break;case 1:Ci(t.type)&&Li(t);break;case 4:Js(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,i=t.memoizedProps.value;Ti(xs,n._currentValue),n._currentValue=i;break;case 13:if(null!==(n=t.memoizedState))return null!==n.dehydrated?(Ti(Zs,1&Zs.current),t.flags|=128,null):0!==(r&t.child.childLanes)?Jo(e,t,r):(Ti(Zs,1&Zs.current),null!==(e=nl(e,t,r))?e.sibling:null);Ti(Zs,1&Zs.current);break;case 19:if(n=0!==(r&t.childLanes),128&e.flags){if(n)return tl(e,t,r);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ti(Zs,Zs.current),n)break;return null;case 22:case 23:return t.lanes=0,Oo(e,t,r)}return nl(e,t,r)}(e,t,n);_o=!!(131072&e.flags)}else _o=!1,is&&1048576&t.flags&&Zi(t,Wi,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;rl(e,t),e=t.pendingProps;var s=Ni(t,Pi.current);Os(t,n),s=ga(null,t,i,e,s,n);var a=ma();return t.flags|=1,"object"==typeof s&&null!==s&&"function"==typeof s.render&&void 0===s.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ci(i)?(a=!0,Li(t)):a=!1,t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,Ls(t),s.updater=no,t.stateNode=s,s._reactInternals=t,oo(t,i,e,n),t=Fo(null,t,i,!0,a,n)):(t.tag=0,is&&a&&es(t),wo(null,t,s,n),t=t.child),t;case 16:i=t.elementType;e:{switch(rl(e,t),e=t.pendingProps,i=(s=i._init)(i._payload),t.type=i,s=t.tag=function(e){if("function"==typeof e)return Hc(e)?1:0;if(null!=e){if((e=e.$$typeof)===O)return 11;if(e===C)return 14}return 2}(i),e=to(i,e),s){case 0:t=$o(null,t,i,e,n);break e;case 1:t=Lo(null,t,i,e,n);break e;case 11:t=Eo(null,t,i,e,n);break e;case 14:t=So(null,t,i,to(i.type,e),n);break e}throw Error(r(306,i,""))}return t;case 0:return i=t.type,s=t.pendingProps,$o(e,t,i,s=t.elementType===i?s:to(i,s),n);case 1:return i=t.type,s=t.pendingProps,Lo(e,t,i,s=t.elementType===i?s:to(i,s),n);case 3:e:{if(Do(t),null===e)throw Error(r(387));i=t.pendingProps,s=(a=t.memoizedState).element,Fs(e,t),Bs(t,i,null,n);var o=t.memoizedState;if(i=o.element,a.isDehydrated){if(a={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=zo(e,t,i,n,s=lo(Error(r(423)),t));break e}if(i!==s){t=zo(e,t,i,n,s=lo(Error(r(424)),t));break e}for(ns=ci(t.stateNode.containerInfo.firstChild),rs=t,is=!0,ss=null,n=ws(t,null,i,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fs(),i===s){t=nl(e,t,n);break e}wo(e,t,i,n)}t=t.child}return t;case 5:return Qs(t),null===e&&cs(t),i=t.type,s=t.pendingProps,a=null!==e?e.memoizedProps:null,o=s.children,ri(i,s)?o=null:null!==a&&ri(i,a)&&(t.flags|=32),Co(e,t),wo(e,t,o,n),t.child;case 6:return null===e&&cs(t),null;case 13:return Jo(e,t,n);case 4:return Js(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=bs(t,null,i,n):wo(e,t,i,n),t.child;case 11:return i=t.type,s=t.pendingProps,Eo(e,t,i,s=t.elementType===i?s:to(i,s),n);case 7:return wo(e,t,t.pendingProps,n),t.child;case 8:case 12:return wo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,s=t.pendingProps,a=t.memoizedProps,o=s.value,Ti(xs,i._currentValue),i._currentValue=o,null!==a)if(on(a.value,o)){if(a.children===s.children&&!Oi.current){t=nl(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){o=a.child;for(var c=l.firstContext;null!==c;){if(c.context===i){if(1===a.tag){(c=Ms(-1,n&-n)).tag=2;var u=a.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),Ps(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===a.tag)o=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(o=a.return))throw Error(r(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Ps(o,n,t),o=a.sibling}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===t){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}wo(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,i=t.pendingProps.children,Os(t,n),i=i(s=Is(s)),t.flags|=1,wo(e,t,i,n),t.child;case 14:return s=to(i=t.type,t.pendingProps),So(e,t,i,s=to(i.type,s),n);case 15:return To(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,s=t.pendingProps,s=t.elementType===i?s:to(i,s),rl(e,t),t.tag=1,Ci(i)?(e=!0,Li(t)):e=!1,Os(t,n),so(t,i,s),oo(t,i,s,n),Fo(null,t,i,!0,e,n);case 19:return tl(e,t,n);case 22:return Oo(e,t,n)}throw Error(r(156,t.tag))};var au="function"==typeof reportError?reportError:function(e){console.error(e)};function ou(e){this._internalRoot=e}function lu(e){this._internalRoot=e}function cu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function uu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function du(){}function hu(e,t,r,n,i){var s=r._reactRootContainer;if(s){var a=s;if("function"==typeof i){var o=i;i=function(){var e=nu(a);o.call(e)}}ru(t,a,e,i)}else a=function(e,t,r,n,i){if(i){if("function"==typeof n){var s=n;n=function(){var e=nu(a);s.call(e)}}var a=tu(t,n,e,0,null,!1,0,"",du);return e._reactRootContainer=a,e[pi]=a.current,Bn(8===e.nodeType?e.parentNode:e),kc(),a}for(;i=e.lastChild;)e.removeChild(i);if("function"==typeof n){var o=n;n=function(){var e=nu(l);o.call(e)}}var l=Zc(e,0,!1,null,0,!1,0,"",du);return e._reactRootContainer=l,e[pi]=l.current,Bn(8===e.nodeType?e.parentNode:e),kc(function(){ru(t,l,r,n)}),l}(r,t,e,i,n);return nu(a)}lu.prototype.render=ou.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(r(409));ru(e,t,null,null)},lu.prototype.unmount=ou.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;kc(function(){ru(null,e,null,null)}),t[pi]=null}},lu.prototype.unstable_scheduleHydration=function(e){if(e){var t=Et();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Rt.length&&0!==t&&t<Rt[r].priority;r++);Rt.splice(r,0,e),0===r&&Ft(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=dt(t.pendingLanes);0!==r&&(yt(t,1|r),mc(t,Qe()),!(6&zl)&&(tc=Qe()+500,Bi()))}break;case 13:kc(function(){var t=As(e,1);if(null!==t){var r=fc();gc(t,e,1,r)}}),su(e,1)}},xt=function(e){if(13===e.tag){var t=As(e,134217728);if(null!==t)gc(t,e,134217728,fc());su(e,134217728)}},kt=function(e){if(13===e.tag){var t=pc(e),r=As(e,t);if(null!==r)gc(r,e,t,fc());su(e,t)}},Et=function(){return _t},St=function(e,t){var r=_t;try{return _t=e,t()}finally{_t=r}},xe=function(e,t,n){switch(t){case"input":if(Z(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var s=wi(i);if(!s)throw Error(r(90));K(i),Z(i,s)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Pe=xc,Oe=kc;var fu={usingClientEntryPoint:!1,Events:[_i,bi,wi,Te,je,xc]},pu={findFiberByHostInstance:yi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},gu={bundleType:pu.bundleType,version:pu.version,rendererPackageName:pu.rendererPackageName,rendererConfig:pu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:pu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var mu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!mu.isDisabled&&mu.supportsFiber)try{it=mu.inject(gu),st=mu}catch(jo){}}return k.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fu,k.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!cu(t))throw Error(r(200));return function(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==n?null:""+n,children:e,containerInfo:t,implementation:r}}(e,t,null,n)},k.createRoot=function(e,t){if(!cu(e))throw Error(r(299));var n=!1,i="",s=au;return null!=t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(i=t.identifierPrefix),void 0!==t.onRecoverableError&&(s=t.onRecoverableError)),t=Zc(e,1,!1,null,0,n,0,i,s),e[pi]=t.current,Bn(8===e.nodeType?e.parentNode:e),new ou(t)},k.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(r(188));throw e=Object.keys(e).join(","),Error(r(268,e))}return e=null===(e=He(t))?null:e.stateNode},k.flushSync=function(e){return kc(e)},k.hydrate=function(e,t,n){if(!uu(t))throw Error(r(200));return hu(null,e,t,!0,n)},k.hydrateRoot=function(e,t,n){if(!cu(e))throw Error(r(405));var i=null!=n&&n.hydratedSources||null,s=!1,a="",o=au;if(null!=n&&(!0===n.unstable_strictMode&&(s=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=tu(t,null,e,1,null!=n?n:null,s,0,a,o),e[pi]=t.current,Bn(e),i)for(e=0;e<i.length;e++)s=(s=(n=i[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new lu(t)},k.render=function(e,t,n){if(!uu(t))throw Error(r(200));return hu(null,e,t,!1,n)},k.unmountComponentAtNode=function(e){if(!uu(e))throw Error(r(40));return!!e._reactRootContainer&&(kc(function(){hu(null,null,e,!1,function(){e._reactRootContainer=null,e[pi]=null})}),!0)},k.unstable_batchedUpdates=xc,k.unstable_renderSubtreeIntoContainer=function(e,t,n,i){if(!uu(n))throw Error(r(200));if(null==e||void 0===e._reactInternals)throw Error(r(38));return hu(e,t,n,!1,i)},k.version="18.3.1-next-f1338f8080-20240426",k}var P=function(){if(y)return w;y=1;var e=(v||(v=1,function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),x.exports=j()),x.exports);return w.createRoot=e.createRoot,w.hydrateRoot=e.hydrateRoot,w}();const O={title:"Lumelle Shower Cap",subtitle:"Creator-loved protection for every style",description:"Dual-layer satin with a waterproof core keeps silk presses, curls, and braids flawless through every steamy shower.",rating:4.8,reviews:100,pills:["No-frizz seal","Luxury feel","Reusable + eco"],priceNow:14.99,priceWas:19.99,bullets:["Reusable waterproof","Satin lined","Large wide shower cap","Adjustable"],image:"/uploads/luminele/page9-image.webp",href:"/product/lumelle-shower-cap",ctaLabel:"Shop the cap",objectFit:"cover",objectPosition:"center 25%"},I={hero:{headline:"Luxury shower cap that keeps hair frizz-free",subhead:"Satin-lined, waterproof, and creator-tested to protect silk presses, curls, and braids from steam.",ctaLabel:"Shop shower cap",ctaHref:"/product/lumelle-shower-cap",offerChip:"Buy 2, save 10%",image:"/uploads/luminele/product-main.webp",bgImage:"/uploads/luminele/hero-desktop.webp",objectPosition:"center 30%",objectFit:"cover",pill:"Best seller",gallery:["/uploads/luminele/hero-main-960.webp"]},slides:[{title:"Luxury Self Care",copy:"The design lets you fit your hair in easily and seal it comfortably for your shower.",image:"/uploads/luminele/product-feature-04.webp",ctaHref:"/product/lumelle-shower-cap",tag:"Daily luxury",proof:""},{title:"Designed To Last",copy:"Its fully reusable, made with durable materials that hold their shape and last shower after shower.",image:"/uploads/luminele/product-feature-05.webp",ctaHref:"/product/lumelle-shower-cap",tag:"Durability",proof:""},{title:"Fits All Hair Sizes",copy:"Designed for all hair typesit even fits thick, curly, or bum-length hair.",image:"/uploads/luminele/product-feature-06.webp",ctaHref:"/product/lumelle-shower-cap",tag:"All hair welcome",proof:""},{title:"Frizz-Free Protection",copy:"The satin lining reduces friction to keep your hair frizz-free while youre in your steamy shower.",image:"/uploads/luminele/steam-shield-new.webp",ctaHref:"/product/lumelle-shower-cap",tag:"Frizz guard",proof:""},{title:"The Perfect Gift",copy:"A simple gift that makes daily showers easier.",image:"/uploads/luminele/product-feature-07.webp",ctaHref:"/product/lumelle-shower-cap",tag:"Giftable",proof:""}],socialProof:{rating:4.8,count:1e4,tagline:"Trusted by 10k users",trustCountLabel:"10k+",trustAvatars:["/images/avatar-shannon.jpg","/images/avatar-rachel.jpg","/images/avatar-randomlife.jpg","/images/avatar-jade.jpg","/images/avatar-maya.jpg"]},reviews:[{author:"Amelia",stars:5,title:"Zero frizz",body:"Finally a cap that actually works. I've tried so many shower caps and they all let steam through. This one is completely waterproofthe satin lining keeps my hair bone dry even in my sauna-like bathroom. My silk presses have been lasting 3-4 days instead of just one."},{author:"Beth",stars:5,title:"So comfy",body:"No marks on my forehead and looks cute. The elastic is gentle but secure, which is huge for me. Most caps leave deep indentations on my forehead, but this one doesn't. I actually don't mind wearing it around the house before my shower."},{author:"Cara",stars:5,title:"Worth it",body:"Saved my blowout more than once.\n\nI gym in the mornings and used to have to restyle my hair completely after showering. Now I just pop this on and my style stays intact.\n\nIt's already paid for itself in saved salon visits."},{author:"Danielle",stars:5,title:"Blowout saver",body:"Stayed smooth after a long, steamy shower.\n\nI was skeptical about the waterproof claim, but it genuinely blocks all moisture. The satin interior feels luxurious against my hair.\n\nMy stylist asked what I've been doing differently because my hair is so much healthier."},{author:"Ella",stars:4.5,title:"Soft band",body:"No dents and super gentle on edges.\n\nAs someone with delicate edges, finding a shower cap that doesn't cause breakage has been a struggle. The wide band on this cap is perfect.\n\nIt stays in place without being too tight, which is rare to find."},{author:"Fiona",stars:5,title:"Looks luxe",body:"Finally a cap I'm not embarrassed to wear.\n\nThe quality is obviousit doesn't look like those cheap plastic ones from the drugstore. The pink color is adorable and the satin lining makes it feel premium.\n\nI even got compliments on it at the gym!"},{author:"Grace",stars:5,title:"Curl friendly",body:"Fits over braids without tugging.\n\nI have thick box braids and most shower caps are too small. This one has plenty of room to accommodate my hairstyle comfortably.\n\nThe waterproof layer is legitmy scalp and hair stay completely dry."},{author:"Hana",stars:4.8,title:"Travel staple",body:"Packs flat and keeps styles intact on trips.\n\nI travel for work constantly and this cap has been a game-changer. It takes up zero space in my luggage and protects my hair regardless of the hotel shower situation.\n\nCannot recommend enough for frequent travelers."},{author:"Isla",stars:5,title:"Steam proof",body:"Tested in a sauna showerno puffiness.\n\nMy bathroom gets insanely steamy and I've never found a cap that could handle it until now. The waterproof layer actually works.\n\nMy hair stays completely dry and frizz-free every single time."},{author:"Jade",stars:4.9,title:"Satin smooth",body:"Interior feels like a silk pillowcase.\n\nThe satin lining is what sets this apartit's gentle on my hair and doesn't cause any friction or breakage.\n\nMy hair feels just as smooth when I take it off as it did before I put it on."},{author:"Kara",stars:5,title:"Stretch fit",body:"Roomy enough for rollers and still sealed.\n\nI sometimes set my hair in large rollers and most caps can't accommodate them. This one stretches to fit but still creates a perfect seal around the edges.\n\nThe waterproof protection is impressive."},{author:"Lena",stars:5,title:"Worth the upgrade",body:"Feels premium compared to plastic caps.\n\nYes, it costs more than cheap shower caps, but the quality difference is massive. The materials are better, the construction is solid, and it actually works.\n\nI've had mine for 3 months and it still looks brand new."},{author:"Mara",stars:4.7,title:"Holds up",body:"Using daily for weeksstill perfect.\n\nI was worried about durability given the price, but this cap is built to last. The elastic hasn't stretched out and the waterproof layer is still effective.\n\nBest investment I've made for my hair care routine."},{author:"Nia",stars:5,title:"Edge-safe",body:"No rubbing on baby hairs.\n\nMy baby hairs are super fragile and most shower caps cause breakage around my hairline. This one is gentle enough that I don't have any issues.\n\nFinally found a shower cap that protects my edges while keeping my hair dry."},{author:"Opal",stars:5,title:"Great gift",body:"Bought for my momshe loves it.\n\nGot this as a gift for my mom who has curly hair and struggles with frizz. She's been using it every day and says it's the best shower cap she's ever owned.\n\nShe's already asked me to buy her a second one as a backup!"},{author:"Priya",stars:4.8,title:"Cute design",body:"Functional and actually stylish.\n\nI love that I don't have to hide this cap when someone walks into the bathroom. It looks like a luxury accessory, not something I need to be embarrassed about.\n\nThe fact that it actually works makes it even better."},{author:"Quinn",stars:5,title:"Frizz free",body:"Hair stays shiny even on wash day.\n\nI use this cap every time I wash my hair, and the difference in my hair health is noticeable. Less frizz, more shine, and my styles last so much longer.\n\nMy hairdresser commented on how healthy my ends look now."}],pdpTeaser:O,pdpTeasers:[O,{title:"Satin Overnight Heatless Curler Set",subtitle:"Wake up to curlsno heat, no damage",description:"A satin-wrapped rod + bonnet set designed for smooth, bouncy curls overnightwithout heat damage.",rating:4.8,reviews:50,pills:["Heatless curls","Overnight set","Satin smooth"],priceNow:16.99,priceWas:21.99,bullets:["Satin heatless curling rod","Luxury satin bonnet","2 matching satin scrunchies","Claw clip"],image:"/uploads/curler/1.webp",href:"/product/satin-overnight-curler",ctaLabel:"Shop the curler"},{title:"XL Microfibre Hair Towel",subtitle:"Dry hair faster, with less frizz",description:"Ultra-absorbent microfiber towel that cuts drying time in half while reducing frizz and breakage.",rating:4.8,reviews:50,pills:["Quick-dry","Anti-frizz","Travel-friendly"],priceNow:14.99,priceWas:19.99,bullets:["Ultra-absorbent microfiber","XL size with tulip design","Secure elastic loop","Frizz-reducing fabric"],image:"/uploads/towel/Hero.webp",href:"/product/lumelle-xl-microfibre-hair-towel",ctaLabel:"Shop the towel"}],faq:[{q:"Will it fit my hair?",a:"Customer review  5: Ive never bothered with shower caps as I have super long hair that goes past my butt so my hair would always get wet and wouldnt fit. This shower cap is perfect  my hair stays bone dry, it fits with plenty of room and the band fits snug around the head. 10/10 worth the price!"},{q:"Is it fully waterproof?",a:"Yes, the durable waterproof outer shell shields hair from moisture and humidity."},{q:"How do I wash it?",a:"Hand wash the shower cap in lukewarm water with mild soap, gently clean the satin lining, rinse well, and air-dry only. Avoid machine washing, tumble drying, or heat to keep the waterproof layer and satin in good condition."},{q:"Whats the return policy?",a:"30-day Luxe Guarantee with easy exchanges or returns."}]},N=[{name:"Shannon Mitchell",handle:"@shannon_mitch",avatarAlt:"Profile photo of Shannon Mitchell",avatarSrc:"/images/avatar-shannon.jpg",embedUrl:"https://www.tiktok.com/embed/v2/7562893092957719830?embed_source=lite",highlight:"Shower cap steam test",stats:"High watch time + saves",earnings:"Drives direct product clicks",quote:"Kept my blowout smooth after a steamy shower  no frizz at all.\n\nThe waterproof layer actually works, and the satin lining protects my hair perfectly. My followers were asking for the link immediately after I posted my review.\n\nI've been using it every day for two weeks now and it still looks brand new. Honestly impressed with how well it holds up.",badge:"Demo",videoUrl:"https://www.tiktok.com/@shannon_mitch/video/7562893092957719830"},{name:"Rachel",handle:"@rachelsummergreenie._",avatarAlt:"Profile photo of Louaira",avatarSrc:"/images/avatar-rachel.jpg",embedUrl:"https://www.tiktok.com/embed/v2/7543668112630058262?embed_source=lite",highlight:"Hair stays dry",stats:"Comments asking for link",earnings:"Repeat swipe-throughs",quote:"The satin lining makes it feel luxe and my hair stayed bone dry through my whole shower routine.\n\nI was skeptical at first, but it actually keeps all the steam out. Been using it daily for two weeks now and it's become a non-negotiable part of my routine.\n\nMy curls stay defined for days after using this cap. Worth every penny for the quality alone.",badge:"UGC",videoUrl:"https://www.tiktok.com/@rachelsummergreenie._/video/7543668112630058262"},{name:"Random Life UK",handle:"@randomlifeuk",avatarAlt:"Profile photo of Random Life UK",avatarSrc:"/images/avatar-randomlife.jpg",embedUrl:"https://www.tiktok.com/embed/v2/7544353160429587734?embed_source=lite",highlight:"Shower routine demo",stats:"Strong saves + shares",earnings:"Healthy AOV from add-ons",quote:"Fits comfortably and doesn't mess up my edges, which is huge for me.\n\nThe band is stretchy but still secure, so nothing gets in or out. My audience loved seeing how much volume I could fit inside while staying protected.\n\nI even showed how I can do a full wash routine with it on. Best shower cap I've ever owned, and I've tried plenty.",badge:"UGC",videoUrl:"https://www.tiktok.com/@randomlifeuk/video/7544353160429587734"},{name:"Winging Ma Life",handle:"@wingingmalife",avatarAlt:"Profile photo of Winging Ma Life",avatarSrc:"/images/avatar-shannon.jpg",embedUrl:"https://www.tiktok.com/embed/v2/7567328998158585110?embed_source=lite",highlight:"Unfiltered shower-cap demo",stats:'Saves from "wrap with me"',earnings:"Adds to cart after full watch",quote:"Loved how the satin lining kept my hair camera-readyno slip, no frizz even after a 20-minute shower.\n\nI showed my hair before and after in the video, and the difference was obvious. It's become a non-negotiable in my routine now.\n\nThe quality is seriously next level compared to those cheap plastic ones. My subscribers appreciated seeing something that actually works.",badge:"Demo",videoUrl:"https://www.tiktok.com/@wingingmalife/video/7567328998158585110"},{name:"By Latticia",handle:"@bylatticia",avatarAlt:"Profile photo of By Latticia",avatarSrc:"/images/avatar-shannon.jpg",embedUrl:"https://www.tiktok.com/embed/v2/7566245669250387222?embed_source=lite",highlight:"Get-ready-with-me feature",stats:"High completion rate",earnings:"Audience asked for links",quote:"Super easy to film withlooks luxe on camera and feels lightweight enough to forget I'm wearing it.\n\nThe material quality is obvious compared to cheap plastic caps. My engagement on this video was way higher than my usual routine content.\n\nI've already recommended it to all my friends who struggle with frizz. Love how easy it is to clean too.",badge:"UGC",videoUrl:"https://www.tiktok.com/@bylatticia/video/7566245669250387222"},{name:"Hannah Styles",handle:"@hannahh.styless",avatarAlt:"Profile photo of Hannah Styles",avatarSrc:"/images/avatar-randomlife.jpg",embedUrl:"https://www.tiktok.com/embed/v2/7575168979711397142?embed_source=lite",highlight:"Steam test on-camera",stats:"Comments about fit + seal",earnings:"Repeat link clicks",quote:"Held up through a long shower vlogno flyaways after, even with my thick curly hair.\n\nI made sure to test it properly on camera with lots of steam, and it passed. My subscribers appreciated seeing an honest, thorough demo.\n\nThis is the first shower cap that actually lives up to the hype. Already ordered two more as gifts for my sisters.",badge:"Demo",videoUrl:"https://www.tiktok.com/@hannahh.styless/video/7575168979711397142"}],C=({to:e,href:t,children:r,className:n,...i})=>{const s=e||t||"#";return _.jsx("a",{href:s,className:n,...i,children:r})};b.createContext({user:null});b.createContext({signedIn:!1,isLoading:!1,user:null});
/**
	 * @license lucide-react v0.548.0 - ISC
	 *
	 * This source code is licensed under the ISC license.
	 * See the LICENSE file in the root directory of this source tree.
	 */
const R=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()))(e);return t.charAt(0).toUpperCase()+t.slice(1)},A=(...e)=>e.filter((e,t,r)=>Boolean(e)&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim(),$=e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};
/**
	 * @license lucide-react v0.548.0 - ISC
	 *
	 * This source code is licensed under the ISC license.
	 * See the LICENSE file in the root directory of this source tree.
	 */
var L={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};
/**
	 * @license lucide-react v0.548.0 - ISC
	 *
	 * This source code is licensed under the ISC license.
	 * See the LICENSE file in the root directory of this source tree.
	 */const F=b.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:i="",children:s,iconNode:a,...o},l)=>b.createElement("svg",{ref:l,...L,width:t,height:t,stroke:e,strokeWidth:n?24*Number(r)/Number(t):r,className:A("lucide",i),...!s&&!$(o)&&{"aria-hidden":"true"},...o},[...a.map(([e,t])=>b.createElement(e,t)),...Array.isArray(s)?s:[s]])),M=(e,t)=>{const r=b.forwardRef(({className:r,...n},i)=>{return b.createElement(F,{ref:i,iconNode:t,className:A(`lucide-${s=R(e),s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,r),...n});var s});return r.displayName=R(e),r},D=M("book-open",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]),U=M("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),z=M("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);
/**
	 * @license lucide-react v0.548.0 - ISC
	 *
	 * This source code is licensed under the ISC license.
	 * See the LICENSE file in the root directory of this source tree.
	 */M("crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);M("droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]);
/**
	 * @license lucide-react v0.548.0 - ISC
	 *
	 * This source code is licensed under the ISC license.
	 * See the LICENSE file in the root directory of this source tree.
	 */
const B=M("gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);M("heart",[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]]);
/**
	 * @license lucide-react v0.548.0 - ISC
	 *
	 * This source code is licensed under the ISC license.
	 * See the LICENSE file in the root directory of this source tree.
	 */
const V=M("instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);M("leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]);
/**
	 * @license lucide-react v0.548.0 - ISC
	 *
	 * This source code is licensed under the ISC license.
	 * See the LICENSE file in the root directory of this source tree.
	 */
const q=M("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),H=M("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]),W=M("message-circle",[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]]),G=M("minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),K=M("music-2",[["circle",{cx:"8",cy:"18",r:"4",key:"1fc0mg"}],["path",{d:"M12 18V2l7 4",key:"g04rme"}]]),J=M("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]),Y=M("party-popper",[["path",{d:"M5.8 11.3 2 22l10.7-3.79",key:"gwxi1d"}],["path",{d:"M4 3h.01",key:"1vcuye"}],["path",{d:"M22 8h.01",key:"1mrtc2"}],["path",{d:"M15 2h.01",key:"1cjtqr"}],["path",{d:"M22 20h.01",key:"1mrys2"}],["path",{d:"m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10",key:"hbicv8"}],["path",{d:"m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11c-.11.7-.72 1.22-1.43 1.22H17",key:"1i94pl"}],["path",{d:"m11 2 .33.82c.34.86-.2 1.82-1.11 1.98C9.52 4.9 9 5.52 9 6.23V7",key:"1cofks"}],["path",{d:"M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z",key:"4kbmks"}]]),Q=M("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),X=M("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]),Z=M("shopping-bag",[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]]),ee=M("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]),te=M("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),re=e=>{const t=e=>{try{return encodeURI(e)}catch{return e}};if(e.startsWith("video://")||e.startsWith("data:")||e.startsWith("blob:"))return e;return["/uploads/luminele/page9-image","/uploads/luminele/hero-desktop"].some(t=>e.includes(t)),t(e)},ne=()=>"accepted"===(()=>{if("undefined"==typeof window)return null;try{const e=window.localStorage.getItem("lumelle_cookie_consent_v1");return"accepted"===e||"declined"===e?e:null}catch{return null}})(),ie="lumelle_anon_id",se="lumelle_session_id",ae=()=>"undefined"!=typeof crypto&&"function"==typeof crypto.randomUUID?crypto.randomUUID():`anon_${Math.random().toString(36).slice(2,10)}`,oe=e=>{try{return window.localStorage.getItem(e)}catch{return null}},le=(e,t)=>{try{return window.localStorage.setItem(e,t),!0}catch{return!1}},ce=()=>{const e=window;return e.__lumelleIdentity||(e.__lumelleIdentity={}),e.__lumelleIdentity};function ue(){if("undefined"==typeof window)return"server";const e=ne(),t=ce(),r=(((e?oe(ie)||(e=>{try{return document.cookie.match(new RegExp(`${e}=([^;]+)`))?.[1]??null}catch{return null}})(ie):null)||t[ie])??null)||ae();return e&&(le(ie,r),((e,t)=>{try{return document.cookie=`${e}=${t};path=/;SameSite=Lax;Max-Age=31536000`,!0}catch{return!1}})(ie,r)),t[ie]=r,r}function de(){if("undefined"==typeof window)return"server";const e=ne(),t=ce(),r=((e?oe(se):null)||t[se])??null,n=Number((e?oe(`${se}_ts`):null)||t[`${se}_ts`]||0),i=Date.now();if(r&&i-n<18e5)return r;const s=ae();return e&&(le(se,s),le(`${se}_ts`,String(i))),t[se]=s,t[`${se}_ts`]=String(i),s}const he={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_ADMIN_EMAILS:"you@example.com",VITE_ANALYTICS_ENABLED:"true",VITE_APP_URL:"https://choir-holly-assist-cases.trycloudflare.com",VITE_ASSET_BASE_URL:"https://tmsbyiwqzesmirbargxv.supabase.co/storage/v1/object/public/public",VITE_CLARITY_PROJECT_ID:"v846srjnkk",VITE_CLERK_PUBLISHABLE_KEY:"pk_test_Z29sZGVuLWZyb2ctNTMuY2xlcmsuYWNjb3VudHMuZGV2JA",VITE_CLOUDINARY_API_KEY:"162511853292628",VITE_CLOUDINARY_CLOUD_NAME:"dbowtimdn",VITE_CLOUDINARY_UPLOAD_PRESET:"",VITE_CONTENT_BRIEF_URL:"https://lumellebeauty.co.uk/content-brief.pdf",VITE_EXPERIMENTS_ENABLED:"true",VITE_HEATMAP_ENABLED:"true",VITE_META_PIXEL_ID:"1494559081624608",VITE_POSTHOG_HOST:"https://us.i.posthog.com",VITE_POSTHOG_KEY:"phc_smzowuKxqF1AR2Tms0mgF7y0KJolnNEouVBTbGuZwa",VITE_SHOPIFY_API_KEY:"24d62a0192ffbd2701399043b1a2085b",VITE_SHOPIFY_STOREFRONT_PUBLIC_TOKEN:"947d496da034c790f307d1d6ab8cb8de",VITE_SHOPIFY_STORE_DOMAIN:"lumelle-3.myshopify.com",VITE_SUPABASE_ANON_KEY:"sb_publishable_e0qvbW6GL0G_02IkjVLfng_dUPmSJd9",VITE_SUPABASE_URL:"https://tmsbyiwqzesmirbargxv.supabase.co",VITE_SUPPORT_EMAIL:"creators@lumellebeauty.co.uk",VITE_USE_REAL_COMMERCE:"true",VITE_USE_SERVER_CART:"0",VITE_WHATSAPP_INVITE_URL:"https://chat.whatsapp.com/your-invite-link"},fe="lumelle_exp_";let pe=null,ge=null;const me=[];function ve(){return"undefined"!=typeof window}function ye(e){try{return"true"===he?.[e]}catch{return!1}}function _e(){return ye("VITE_ANALYTICS_ENABLED")}function be(){try{const e="https://us.i.posthog.com";return e&&e.trim()?e.trim():void 0}catch{return}}async function we(){if(!ve())return;if(!ne())return;if(pe)return;(function(){try{return Boolean("phc_smzowuKxqF1AR2Tms0mgF7y0KJolnNEouVBTbGuZwa")}catch{return!1}})()&&(_e()||ye("VITE_EXPERIMENTS_ENABLED"))&&(ge||(ge=Promise.resolve().then(()=>Up).then(e=>{const t=e.default;t.init("phc_smzowuKxqF1AR2Tms0mgF7y0KJolnNEouVBTbGuZwa",{api_host:be(),capture_pageview:!1,capture_pageleave:!1,autocapture:!1,rageclick:!1,disable_session_recording:!0,disable_surveys:!0,disable_external_dependency_loading:!0});const r=ue(),n=de();return t.register({lumelle_anon_id:r,lumelle_session_id:n}),pe=t,function(){if(!pe)return;if(!_e())return void(me.length=0);for(;me.length>0;){const e=me.shift();if(!e)break;pe.capture(e.name,e.properties)}}(),t}).catch(e=>(console.warn("PostHog init failed",e),null))),await ge)}function xe(e,t){if(!ve())return;if(!_e())return;if(!ne())return;const r={...Ee(),...t??{}};pe?pe.capture(e,r):(me.push({name:e,properties:r}),we())}function ke(e,t){if(ve())try{sessionStorage.setItem(`${fe}${e}`,t)}catch{}}function Ee(){const e=function(){if(!ve())return{};const e={};try{for(let t=0;t<sessionStorage.length;t++){const r=sessionStorage.key(t);if(!r||!r.startsWith(fe))continue;const n=r.slice(12),i=sessionStorage.getItem(r);n&&i&&(e[n]=i)}}catch{}return e}(),t={};for(const[r,n]of Object.entries(e))t[`exp_${r}`]=n;return t}function Se(e,t="control"){const[r,n]=b.useState(()=>function(e){if(!ve())return null;try{return sessionStorage.getItem(`${fe}${e}`)}catch{return null}}(e)??t);return b.useEffect(()=>{let r=null,i=!1;const s=()=>{if(i)return;const r=function(e,t){return"string"==typeof e&&e?e:!0===e?"on":!1===e?"off":t}(function(e){return pe?.getFeatureFlag?.(e,{send_event:!1})}(e),t);n(r),ke(e,r)};return we().then(()=>{var e;i||(s(),e=s,r=pe?pe.onFeatureFlags(()=>e()):null)}),()=>{i=!0,r?.()}},[e,t]),r}const Te=({config:e,socialProof:t})=>{const r="hero_cta_copy",n="bold"===Se(r,"control")?"bold":"control",i=(e.gallery&&e.gallery.length>0?e.gallery.slice(0,5):[e.bgImage??e.image]).map(e=>encodeURI(re(e))),s=encodeURI(re(e.bgImage??e.gallery?.[0]??e.image)),a=encodeURI(re(e.image)),[o,l]=b.useState(0);b.useEffect(()=>{if(i.length<=1)return;const e=window.setInterval(()=>{l(e=>(e+1)%i.length)},5e3);return()=>window.clearInterval(e)},[i.length]),b.useEffect(()=>{!function(e,t,r){if(ke(e,t),!ve())return;const n=`lumelle_exp_exposed_${de()}:${e}`;try{if("1"===sessionStorage.getItem(n))return;sessionStorage.setItem(n,"1")}catch{}xe("experiment_exposure",{experiment_key:e,variant:t,page_path:window.location.pathname,...r??{}})}(r,n,{component:"HeroShop"})},[n]);const c="bold"===n?"Shop now":e.ctaLabel,u=e.ctaHref.startsWith("/"),d=t?.tagline??"Trusted by 10k users",h=Number.isFinite(t?.rating)?t?.rating:4.8;t?.ratingLabel??h.toFixed(1);const f=(()=>{const e=(t?.trustAvatars??[]).filter(e=>"string"==typeof e&&e.length>0).map(e=>re(e));return e.length>0?Array.from(new Set(e)).slice(0,5):[re("/images/avatar-shannon.jpg"),re("/images/avatar-rachel.jpg"),re("/images/avatar-randomlife.jpg"),re("/images/avatar-jade.jpg"),re("/images/avatar-maya.jpg")]})();return _.jsxs("section",{className:"relative min-h-[70vh] overflow-hidden bg-semantic-legacy-brand-blush/10 md:min-h-[76vh]",children:[_.jsxs("div",{className:"absolute inset-0",children:[_.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-white via-semantic-legacy-brand-blush/10 to-semantic-legacy-brand-blush/25"}),_.jsxs("div",{className:"absolute inset-0 hidden lg:block",children:[_.jsx("img",{src:s,alt:"",className:"h-full w-full brightness-95 object-cover object-right",width:2400,height:1350,loading:"eager",decoding:"async"}),_.jsx("div",{className:"absolute inset-0 pointer-events-none bg-gradient-to-r from-white/80 via-white/40 to-transparent"})]}),_.jsxs("div",{className:"absolute inset-0 lg:hidden",children:[_.jsx("div",{className:"absolute inset-0 flex transition-transform duration-700",style:{transform:`translateX(-${100*o}%)`,width:100*i.length+"%"},"aria-hidden":"true",children:i.map((t,r)=>_.jsx("img",{src:t,alt:"",className:"h-full w-full flex-[0_0_100%] brightness-95 object-cover scale-[1.08]",style:{objectPosition:e.objectPosition||"center center",objectFit:e.objectFit||"cover"},width:1920,height:1080,loading:0===r?"eager":"lazy",decoding:"async"},`${t}-${r}`))}),_.jsx("div",{className:"absolute inset-0 pointer-events-none backdrop-blur-0 md:backdrop-blur-[1px]",style:{backgroundImage:"linear-gradient(180deg, rgba(247,239,232,0.5) 0%, rgba(247,239,232,0.3) 32%, rgba(247,239,232,0.12) 55%, rgba(247,239,232,0) 78%)"}})]})]}),_.jsxs("div",{className:"absolute inset-0 z-10",children:[_.jsx("div",{className:"mx-auto flex h-full max-w-6xl items-center px-4 pb-[3.5rem] pt-[3.5rem] md:px-6",children:_.jsx("div",{className:"w-full",children:_.jsxs("div",{className:"mx-auto grid w-full max-w-5xl items-center gap-10 lg:max-w-none lg:grid-cols-2 lg:gap-16",children:[_.jsxs("div",{className:"mx-auto w-full max-w-xl p-5 text-center md:max-w-2xl lg:mx-0 lg:p-0 lg:text-left",children:[_.jsxs("div",{className:"inline-flex flex-nowrap items-center gap-3 rounded-full bg-white/30 px-6 py-2 text-semantic-text-primary backdrop-blur-md shadow-soft ring-1 ring-white/50 min-w-[300px] justify-center lg:justify-start",children:[_.jsx("div",{className:"flex -space-x-1.5 flex-shrink-0 pl-1",children:f.map((e,t)=>_.jsx("img",{src:e,alt:"Customer profile photo",className:"h-7 w-7 rounded-full border-2 border-white object-cover shadow-sm",loading:"lazy",width:28,height:28},`${e}-${t}`))}),_.jsx("span",{className:"text-[11px] font-semibold uppercase tracking-[0.2em] text-semantic-text-primary/80 whitespace-nowrap pl-1",children:d})]}),_.jsx("h1",{className:"mt-4 whitespace-pre-line font-heading text-3xl font-bold leading-tight text-semantic-text-primary sm:text-4xl md:text-5xl lg:text-6xl",children:e.headline}),_.jsx("p",{className:"mt-4 text-base text-semantic-text-primary/80 sm:text-lg",children:e.subhead}),_.jsx("div",{className:"mt-6 flex justify-center lg:justify-start",children:u?_.jsx(C,{to:e.ctaHref,"data-click-id":"hero-cta",onClick:()=>xe("cta_click",{click_id:"hero-cta",experiment_key:r,variant:n,href:e.ctaHref}),className:"inline-flex items-center justify-center rounded-full px-7 py-3 text-base font-semibold shadow-soft transition hover:-translate-y-0.5 "+("bold"===n?"bg-semantic-legacy-brand-cocoa text-white ring-2 ring-white/70":"bg-semantic-legacy-brand-cocoa text-white"),children:c}):_.jsx("a",{href:e.ctaHref,"data-click-id":"hero-cta",onClick:()=>xe("cta_click",{click_id:"hero-cta",experiment_key:r,variant:n,href:e.ctaHref}),className:"inline-flex items-center justify-center rounded-full px-7 py-3 text-base font-semibold shadow-soft transition hover:-translate-y-0.5 "+("bold"===n?"bg-semantic-legacy-brand-cocoa text-white ring-2 ring-white/70":"bg-semantic-legacy-brand-cocoa text-white"),children:c})}),_.jsxs("div",{className:"mt-3 flex items-center justify-center gap-1.5 lg:justify-start",children:[Array.from({length:5}).map((e,t)=>_.jsx(ee,{className:"h-4 w-4 text-amber-500 drop-shadow-[0_0_8px_rgba(255,255,255,0.9)]",fill:"currentColor",stroke:"white",strokeWidth:1},t)),_.jsx("span",{className:"ml-2 text-sm font-semibold text-semantic-text-primary",children:"4.8 (100)"})]})]}),_.jsx("div",{className:"hidden lg:flex lg:justify-center",children:_.jsx("div",{className:"w-full max-w-[520px] rounded-[2.75rem] border border-white/60 bg-white/75 p-6 shadow-soft backdrop-blur-md",children:_.jsx("div",{className:"overflow-hidden rounded-3xl bg-semantic-legacy-brand-blush/15",children:_.jsx("img",{src:a,alt:"Lumelle shower cap",className:"h-auto w-full object-contain",width:900,height:900,loading:"eager",decoding:"async"})})})})]})})}),_.jsxs("span",{className:"sr-only","aria-live":"polite",children:["Showing hero slide ",o+1," of ",i.length]})]})]})},je=[{label:"30 day money back guarantee"},{label:"Free shipping"},{label:"1000+ 5-star reviews"},{label:"Satin-lined & waterproof"}],Pe=()=>{const e=b.useRef(null),[t,r]=b.useState(18),[n,i]=b.useState(!1);return b.useEffect(()=>{const t=e.current;if(!t)return;if(window.matchMedia("(prefers-reduced-motion: reduce)").matches)return void r(0);const n=(t.scrollWidth+(t.parentElement?.getBoundingClientRect().width||window.innerWidth))/35;r(Number(Math.max(12,Math.min(32,n)).toFixed(1)))},[]),_.jsx("div",{className:"overflow-hidden bg-semantic-legacy-brand-blush text-semantic-text-primary",onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),onFocusCapture:()=>i(!0),onBlurCapture:()=>i(!1),onPointerDown:()=>i(!0),onPointerUp:()=>i(!1),onPointerCancel:()=>i(!1),children:_.jsx("div",{className:"relative",children:_.jsx("div",{ref:e,className:"flex min-w-max items-center gap-12 px-4 py-3 text-[11px] font-semibold uppercase tracking-[0.24em] md:text-xs",style:0===t?void 0:{animationName:"marquee",animationDuration:`${t}s`,animationTimingFunction:"linear",animationIterationCount:"infinite",animationPlayState:n?"paused":"running",willChange:"transform"},children:[...je,...je,...je].map((e,t)=>_.jsxs("span",{className:"inline-flex items-center gap-2 whitespace-nowrap",children:[e.label,_.jsx("span",{className:"h-1 w-1 rounded-full bg-semantic-legacy-brand-cocoa/35","aria-hidden":!0})]},`${e.label}-${t}`))})})})},Oe=({eyebrow:e,title:t,description:r,alignment:n="left",actions:i,className:s})=>{const a="center"===n?"items-center text-center":"items-start";return _.jsxs("div",{className:`flex flex-col gap-4 ${a} text-semantic-text-primary ${s??""}`,children:[e?_.jsx("span",{className:"inline-flex rounded-full bg-semantic-legacy-brand-blush/40 px-3 py-1 text-xs font-semibold uppercase tracking-[0.24em] text-semantic-text-primary/70",children:e}):null,_.jsxs("div",{className:"flex w-full flex-col gap-3 "+("center"===n?"items-center":""),children:[_.jsx("h2",{className:"font-heading text-3xl font-bold md:text-4xl whitespace-pre-line",children:t}),r?_.jsx("p",{className:"max-w-2xl text-base leading-relaxed text-semantic-text-primary/80 font-serif",children:r}):null]}),i?_.jsx("div",{className:"flex gap-3",children:i}):null]})},Ie=({slides:e=[]})=>{const t=b.useMemo(()=>e.filter(e=>e&&e.title&&e.copy&&e.image),[e]),r=b.useRef(null),[n,i]=b.useState(0);b.useEffect(()=>{i(0)},[t.length]),b.useEffect(()=>{const e=r.current;if(!e)return;let t=0;const n=()=>{const t=Array.from(e.children);if(0===t.length)return;const r=e.scrollLeft+e.clientWidth/2;let n=0,s=Number.POSITIVE_INFINITY;t.forEach((e,t)=>{const i=e.offsetLeft+e.clientWidth/2,a=Math.abs(r-i);a<s&&(s=a,n=t)}),i(e=>e===n?e:n)},s=()=>{cancelAnimationFrame(t),t=requestAnimationFrame(n)};return e.addEventListener("scroll",s,{passive:!0}),n(),()=>{e.removeEventListener("scroll",s),cancelAnimationFrame(t)}},[t.length]);const s=e=>{const n=(s=e,a=t.length-1,Math.max(0,Math.min(a,s)));var s,a;const o=r.current;if(!o)return;const l=o.querySelector(`[data-slide-index="${n}"]`);l?.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"}),i(n)};return 0===t.length?null:_.jsx("section",{className:"bg-white py-12 md:py-14",children:_.jsxs("div",{className:"mx-auto max-w-6xl px-4 md:px-6",children:[_.jsx(Oe,{eyebrow:"Why youll love it",title:"Effortless to put on, frizz-free when you take it off",description:"Your small daily luxury  designed to seal out steam and keep styles smooth.",alignment:"center"}),_.jsxs("div",{className:"mt-8 flex items-center justify-between gap-3",children:[_.jsx("div",{className:"text-xs font-semibold uppercase tracking-[0.28em] text-semantic-text-primary/60",children:"Swipe"}),_.jsxs("div",{className:"hidden items-center gap-2 md:flex",children:[_.jsx("button",{type:"button",onClick:()=>s(n-1),disabled:n<=0,className:"rounded-full border border-semantic-legacy-brand-blush/60 bg-white px-4 py-2 text-sm font-semibold text-semantic-text-primary disabled:opacity-50",children:"Prev"}),_.jsx("button",{type:"button",onClick:()=>s(n+1),disabled:n>=t.length-1,className:"rounded-full border border-semantic-legacy-brand-blush/60 bg-white px-4 py-2 text-sm font-semibold text-semantic-text-primary disabled:opacity-50",children:"Next"})]})]}),_.jsx("div",{ref:r,className:"mt-4 flex gap-4 overflow-x-auto pb-2 [scrollbar-width:none] [-ms-overflow-style:none] [&::-webkit-scrollbar]:hidden snap-x snap-mandatory",children:t.map((e,t)=>{const r=e.ctaHref||"/product/lumelle-shower-cap",n=r.startsWith("/"),i=encodeURI(re(e.image));let s;return s=n?_.jsx(C,{to:r,className:"inline-flex items-center justify-center rounded-full border border-semantic-legacy-brand-cocoa bg-white px-5 py-2.5 text-sm font-semibold text-semantic-text-primary transition hover:-translate-y-0.5 hover:bg-semantic-legacy-brand-blush/20",children:"Shop now"}):_.jsx("a",{href:r,target:"_blank",rel:"noreferrer",className:"inline-flex items-center justify-center rounded-full border border-semantic-legacy-brand-cocoa bg-white px-5 py-2.5 text-sm font-semibold text-semantic-text-primary transition hover:-translate-y-0.5 hover:bg-semantic-legacy-brand-blush/20",children:"Shop now"}),_.jsxs("article",{"data-slide-index":t,className:"snap-start w-[82%] flex-shrink-0 rounded-[2.25rem] border border-semantic-legacy-brand-blush/60 bg-white p-4 shadow-soft md:w-[360px]",children:[_.jsxs("div",{className:"relative overflow-hidden rounded-3xl bg-semantic-legacy-brand-blush/15",children:[_.jsx("img",{src:i,alt:e.title,className:"h-52 w-full object-cover",loading:"lazy",decoding:"async"}),e.tag?_.jsx("div",{className:"absolute left-3 top-3 rounded-full bg-white/80 px-3 py-1 text-[11px] font-semibold uppercase tracking-[0.22em] text-semantic-text-primary shadow-soft backdrop-blur",children:e.tag}):null]}),_.jsxs("div",{className:"mt-4 space-y-2 text-semantic-text-primary",children:[_.jsx("h3",{className:"font-heading text-xl font-bold leading-snug",children:e.title}),_.jsx("p",{className:"text-sm leading-relaxed text-semantic-text-primary/75",children:e.copy}),e.proof?_.jsx("p",{className:"text-xs text-semantic-text-primary/60",children:e.proof}):null]}),_.jsx("div",{className:"mt-4",children:s})]},`${e.title}-${t}`)})}),_.jsx("div",{className:"mt-5 flex items-center justify-center gap-2",children:t.map((e,t)=>_.jsx("button",{type:"button","aria-label":`Show ${e.title}`,"aria-current":t===n?"true":void 0,onClick:()=>s(t),className:"h-1 rounded-full transition-all "+(t===n?"w-6 bg-semantic-legacy-brand-cocoa":"w-1 bg-semantic-legacy-brand-cocoa/30")},`${e.title}-dot-${t}`))})]})})},Ne=({value:e,outOf:t=5,size:r=16})=>{const n=`half-${b.useId().replace(/:/g,"")}`,i=Math.floor(e),s=e-i>=.5,a=t-i-(s?1:0),o=({fill:e="currentColor"})=>_.jsx("svg",{width:r,height:r,viewBox:"0 0 24 24",fill:e,"aria-hidden":"true",className:"drop-shadow-[0_0_6px_rgba(255,255,255,0.85)]",style:{filter:"drop-shadow(0 0 6px rgba(255,255,255,0.85))"},children:_.jsx("path",{d:"M12 .587l3.668 7.431 8.2 1.193-5.934 5.786 1.401 8.163L12 18.897l-7.335 3.863 1.401-8.163L.132 9.211l8.2-1.193L12 .587z",stroke:"white",strokeWidth:"0.8"})}),l=()=>_.jsxs("svg",{width:r,height:r,viewBox:"0 0 24 24","aria-hidden":"true",className:"drop-shadow-[0_0_6px_rgba(255,255,255,0.85)]",style:{filter:"drop-shadow(0 0 6px rgba(255,255,255,0.85))"},children:[_.jsx("defs",{children:_.jsxs("linearGradient",{id:n,children:[_.jsx("stop",{offset:"50%",stopColor:"currentColor"}),_.jsx("stop",{offset:"50%",stopColor:"transparent"})]})}),_.jsx("path",{d:"M12 .587l3.668 7.431 8.2 1.193-5.934 5.786 1.401 8.163L12 18.897l-7.335 3.863 1.401-8.163L.132 9.211l8.2-1.193L12 .587z",fill:`url(#${n})`,stroke:"white",strokeWidth:"0.8"})]});return _.jsxs("span",{role:"img","aria-label":`Rating: ${e} out of ${t} stars`,className:"inline-flex items-center gap-1 rounded-full border border-white/70 bg-white/45 px-3 py-1 text-amber-500 shadow-[0_0_14px_rgba(255,255,255,0.8)] backdrop-blur-sm",children:[_.jsxs("span",{className:"sr-only",children:[e," out of ",t," stars"]}),Array.from({length:i}).map((e,t)=>_.jsx(o,{},`f-${t}`)),s?_.jsx(l,{}):null,Array.from({length:Math.max(0,a)}).map((e,t)=>_.jsx(o,{fill:"transparent"},`e-${t}`))]})},Ce=e=>`${e.toFixed(2)}`,Re=({teasers:e})=>{const t=b.useMemo(()=>e.length>0?e:[],[e]),[r,n]=b.useState(0);return b.useEffect(()=>{r<=t.length-1||n(0)},[r,t.length]),_.jsx("section",{className:"bg-white py-10","data-sticky-buy-target":!0,children:_.jsx("div",{className:"mx-auto max-w-5xl px-4 md:px-6",children:_.jsxs("div",{className:"relative overflow-hidden",children:[_.jsx("div",{className:"flex w-full transition-transform duration-700",style:{transform:`translateX(-${100*r}%)`},children:t.map((e,n)=>{const i=encodeURI(re(e.image)),s="number"==typeof e.priceWas&&e.priceWas>0&&e.priceWas>e.priceNow,a=s?Math.round(100*(1-e.priceNow/e.priceWas)):null,o=`${e.reviews.toLocaleString()}+ reviews`,l=e.href.startsWith("/"),c=t.length>1&&n!==r;return _.jsx("div",{className:"w-full flex-[0_0_100%]","aria-hidden":c,children:_.jsxs("div",{className:"grid gap-6 rounded-[2.5rem] border border-semantic-accent-cta/40 bg-white/95 p-6 shadow-soft md:grid-cols-[0.9fr_1fr]",children:[_.jsx("div",{className:"relative aspect-square overflow-hidden rounded-3xl bg-semantic-legacy-brand-blush/20",children:_.jsx("img",{src:i,alt:e.title,className:"h-full w-full object-cover",style:{objectPosition:e.objectPosition??"center",objectFit:e.objectFit??"cover"},loading:"lazy",decoding:"async"})}),_.jsxs("div",{className:"flex flex-col gap-4 text-left text-semantic-text-primary",children:[_.jsxs("div",{className:"space-y-2",children:[_.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-semantic-text-primary/60",children:"Product spotlight"}),_.jsx("h2",{className:"font-heading text-3xl font-bold leading-snug",children:e.title})]}),_.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-semantic-text-primary/80",children:[_.jsx(Ne,{value:e.rating,size:18}),_.jsxs("span",{className:"text-sm font-semibold",children:[e.rating.toFixed(1)," (",o,")"]})]}),_.jsx("p",{className:"text-base text-semantic-text-primary/80",children:e.description}),_.jsx("ul",{className:"space-y-1 text-sm text-semantic-text-primary/70",children:e.bullets.map(e=>_.jsxs("li",{className:"flex items-center gap-2",children:[_.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-semantic-accent-cta","aria-hidden":!0}),e]},e))}),_.jsxs("div",{className:"mt-3 flex flex-col gap-3 text-sm md:items-start",children:[s&&a&&a>0?_.jsxs("div",{className:"flex flex-wrap items-baseline gap-3",children:[_.jsxs("div",{className:"flex items-baseline gap-2",children:[_.jsxs("span",{className:"text-[21px] font-semibold leading-none text-rose-600",children:["-",a,"%"]}),_.jsx("span",{className:"text-3xl font-semibold text-semantic-text-primary",children:Ce(e.priceNow)})]}),_.jsxs("div",{className:"text-xs font-semibold text-semantic-text-primary/60",children:["RRP: ",_.jsx("span",{className:"line-through",children:Ce(e.priceWas)})]})]}):_.jsx("div",{className:"text-base font-semibold text-semantic-text-primary",children:Ce(e.priceNow)}),l?_.jsx(C,{to:e.href,tabIndex:c?-1:void 0,className:"inline-flex items-center justify-center rounded-full border-2 border-semantic-legacy-brand-cocoa bg-white px-7 py-2.5 text-sm font-extrabold uppercase tracking-[0.08em] text-semantic-text-primary shadow-[0_10px_18px_rgba(0,0,0,0.1)] transition hover:-translate-y-0.5 hover:shadow-[0_12px_24px_rgba(0,0,0,0.14)]",children:e.ctaLabel}):_.jsx("a",{href:e.href,target:"_blank",rel:"noreferrer",tabIndex:c?-1:void 0,className:"inline-flex items-center justify-center rounded-full border-2 border-semantic-legacy-brand-cocoa bg-white px-7 py-2.5 text-sm font-extrabold uppercase tracking-[0.08em] text-semantic-text-primary shadow-[0_10px_18px_rgba(0,0,0,0.1)] transition hover:-translate-y-0.5 hover:shadow-[0_12px_24px_rgba(0,0,0,0.14)]",children:e.ctaLabel})]})]})]})},e.href)})}),t.length>1?_.jsx("div",{className:"mt-4 flex items-center justify-center gap-2",children:t.map((e,t)=>_.jsx("button",{type:"button","aria-label":`Show ${e.title}`,"aria-current":t===r?"true":void 0,onClick:()=>n(t),className:"h-1.5 rounded-full transition-all "+(t===r?"w-6 bg-semantic-legacy-brand-cocoa":"w-1.5 bg-semantic-legacy-brand-cocoa/30 hover:bg-semantic-legacy-brand-cocoa/70")},e.href))}):null]})})})},Ae=({children:e,rootMargin:t="200px",once:r=!0,placeholder:n=null,className:i})=>{const s=b.useRef(null),[a,o]=b.useState(!1);return b.useEffect(()=>{const e=s.current;if(!e)return;if(a&&r)return;if("undefined"==typeof IntersectionObserver)return void o(!0);let n=null;try{n=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(o(!0),r&&n?.disconnect())})},{rootMargin:t}),n.observe(e)}catch{o(!0)}return()=>n?.disconnect()},[t,r,a]),_.jsx("div",{ref:s,className:i,children:a?e:n})},$e={eyebrow:"As seen on TikTok",title:"Creators using Lumelle",description:"Swipe to watch a few of our favourite videos.",alignment:"center"},Le=({heading:e,sectionId:t,tiktoks:r})=>{const n=b.useRef(null),[i,s]=b.useState(0),[a,o]=b.useState(!1),[l,c]=b.useState(new Set([0])),u=b.useRef({isDown:!1,startX:0,scrollLeft:0}),d=b.useCallback((e,t="smooth")=>{const r=n.current;if(!r)return;const i=r.querySelectorAll("[data-tiktok-card]");if(!i.length)return;const s=i[(e%i.length+i.length)%i.length],a=s.offsetLeft-(r.clientWidth-s.offsetWidth)/2;r.scrollTo({left:Math.max(0,a),behavior:t})},[]),h=e=>{d(i+("right"===e?1:-1))},f=()=>{u.current.isDown=!1};b.useEffect(()=>{o(!0);const e=n.current;if(!e)return;const t=()=>{const t=Array.from(e.querySelectorAll("[data-tiktok-card]"));if(!t.length)return;const r=e.scrollLeft+e.clientWidth/2;let n=0,i=Number.POSITIVE_INFINITY;t.forEach((e,t)=>{const s=e.offsetLeft+e.offsetWidth/2,a=Math.abs(s-r);a<i&&(i=a,n=t)}),s(n),c(e=>{if(e.has(n))return e;const r=new Set(e);return r.add(n),r.add(Math.max(0,n-1)),r.add(Math.min(t.length-1,n+1)),r})};return t(),e.addEventListener("scroll",t,{passive:!0}),()=>e.removeEventListener("scroll",t)},[]);const p={...$e,...e,alignment:e?.alignment??$e.alignment};return _.jsx("section",{id:t,className:"bg-white",children:_.jsxs("div",{className:"mx-auto max-w-6xl px-5 py-16 md:px-6",children:[_.jsx(Oe,{eyebrow:p.eyebrow,title:p.title??"",description:p.description,alignment:"right"===p.alignment?"center":p.alignment}),_.jsx("div",{className:"mt-6 rounded-3xl border border-semantic-accent-cta/40 bg-gradient-to-r from-[#FDEBE3] via-white to-[#FDEBE3] p-4 shadow-soft",children:_.jsxs("div",{ref:n,onMouseDown:e=>{const t=n.current;t&&(u.current.isDown=!0,u.current.startX=e.pageX-t.offsetLeft,u.current.scrollLeft=t.scrollLeft)},onMouseLeave:f,onMouseUp:f,onMouseMove:e=>{const t=n.current;if(!t||!u.current.isDown)return;e.preventDefault();const r=e.pageX-t.offsetLeft-u.current.startX;t.scrollLeft=u.current.scrollLeft-r},className:"relative flex snap-x snap-mandatory gap-3 overflow-x-auto px-1 pb-2 sm:px-2 lg:gap-4 lg:px-3 [scrollbar-width:none] [-ms-overflow-style:none] [&::-webkit-scrollbar]:hidden cursor-grab active:cursor-grabbing select-none",children:[(r??N).map((e,t)=>{const r=a&&l.has(t);return _.jsxs("article",{"data-tiktok-card":!0,className:"min-w-[min(72vw,300px)] snap-center lg:min-w-[min(340px,26vw)]",children:[_.jsx(Ae,{placeholder:_.jsx("div",{className:"relative overflow-hidden rounded-2xl border border-semantic-accent-cta/40 pb-[158%] shadow-soft bg-semantic-legacy-brand-blush/20"}),children:_.jsx("div",{className:"relative overflow-hidden rounded-2xl border border-semantic-accent-cta/40 pb-[158%] shadow-soft bg-black",children:r?_.jsx("iframe",{src:e.embedUrl.includes("lang=")?e.embedUrl:`${e.embedUrl}&lang=en`,title:`${e.name} TikTok embed`,loading:"lazy",allow:"encrypted-media; fullscreen; clipboard-write",sandbox:"allow-scripts allow-same-origin allow-presentation",allowFullScreen:!0,scrolling:"no",className:"absolute inset-0 h-full w-full",style:{border:0}}):_.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-semantic-legacy-brand-blush/20 text-semantic-text-primary/60 text-xs",children:"Loading"})})}),_.jsxs("div",{className:"mt-2 text-center text-sm text-semantic-text-primary/70",children:[e.name,"  ",e.handle]}),_.jsx("div",{className:"mt-1 text-center",children:_.jsxs("a",{href:e.videoUrl,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-2 rounded-full border border-semantic-legacy-brand-blush/60 px-3 py-1 text-xs font-semibold text-semantic-text-primary/80 hover:bg-semantic-legacy-brand-blush/40",children:["Watch on TikTok",_.jsxs("svg",{"aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"14",height:"14",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[_.jsx("path",{d:"M7 17L17 7"}),_.jsx("path",{d:"M7 7h10v10"})]})]})})]},`${e.handle}-${t}`)}),_.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 hidden items-center md:flex",children:_.jsx("button",{"aria-label":"Scroll videos left",onClick:()=>h("left"),className:"pointer-events-auto ml-1 inline-flex h-9 w-9 items-center justify-center rounded-full border border-semantic-legacy-brand-blush/60 bg-white text-semantic-text-primary shadow-soft hover:bg-semantic-legacy-brand-blush/40 focus-visible:outline focus-visible:outline-2 focus-visible:outline-semantic-legacy-brand-cocoa",children:_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:_.jsx("path",{d:"M15 18l-6-6 6-6"})})})}),_.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 hidden items-center md:flex",children:_.jsx("button",{"aria-label":"Scroll videos right",onClick:()=>h("right"),className:"pointer-events-auto mr-1 inline-flex h-9 w-9 items-center justify-center rounded-full border border-semantic-legacy-brand-blush/60 bg-white text-semantic-text-primary shadow-soft hover:bg-semantic-legacy-brand-blush/40 focus-visible:outline focus-visible:outline-2 focus-visible:outline-semantic-legacy-brand-cocoa",children:_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:_.jsx("path",{d:"M9 18l6-6-6-6"})})})})]})}),_.jsx("div",{className:"mt-4 flex items-center justify-center gap-1.5 text-sm text-semantic-text-primary/80",children:(r??N).map((e,t)=>_.jsx("button",{"aria-label":`Go to TikTok slide ${t+1}`,onClick:()=>d(t),className:"h-0.5 w-0.5 rounded-full transition "+(t===i?"bg-semantic-legacy-brand-cocoa":"bg-semantic-legacy-brand-cocoa/30")},t))}),_.jsxs("span",{className:"sr-only","aria-live":"polite",children:["Showing TikTok slide ",i+1," of ",(r??N).length]})]})})},Fe=(()=>{const e=String("").trim();if(!e)return null;const t=e.replace(/[^\d]/g,"");return t.length<8?null:t})(),Me="".trim()||"Hi Lumelle team  I need help with my order.",De="".trim()||null,Ue=((e,t)=>{if(!e)return null;const r=`https://wa.me/${e}`,n=(t??"").trim();return n?`${r}?text=${encodeURIComponent(n)}`:r})(Fe,Me)||De,ze={eyebrow:"Frequently asked",title:"Answers before you buy",description:"If you don't see your question here, reach out to us and we'll help right away.",alignment:"center"},Be={href:Ue,label:"Chat with WhatsApp concierge"},Ve=({items:e,heading:t,sectionId:r,ctaHref:n,ctaLabel:i,hideCta:s=!1})=>{const[a,o]=b.useState(""),[l,c]=b.useState(0),u=a.toLowerCase().trim(),d=u.length>0,h=b.useMemo(()=>u?e.filter(e=>`${e.q} ${e.a}`.toLowerCase().includes(u)):e,[e,u]),f=d?h:e,p={...ze,...t,alignment:t?.alignment??ze.alignment},g=s?null:{href:n??Be.href,label:i??Be.label};return _.jsx("section",{id:r??"faq",className:"bg-white py-16",children:_.jsxs("div",{className:"mx-auto max-w-6xl px-4 md:px-6",children:[_.jsx(Oe,{eyebrow:p.eyebrow,title:p.title??"",description:p.description,alignment:"right"===p.alignment?"center":p.alignment}),g?_.jsx("div",{className:"mt-6 flex justify-center",children:_.jsx("a",{href:g.href,target:"_blank",rel:"noreferrer",className:"inline-flex items-center justify-center rounded-2xl bg-semantic-legacy-brand-cocoa px-5 py-3 text-sm font-semibold text-white shadow-soft",children:g.label})}):null,_.jsx("div",{className:"mt-8 flex justify-center",children:_.jsxs("div",{className:"w-full max-w-xl",children:[_.jsx("label",{htmlFor:`${r??"faq"}-search`,className:"sr-only",children:"Search FAQs"}),_.jsxs("div",{className:"relative",children:[_.jsx(X,{className:"pointer-events-none absolute left-4 top-1/2 h-4 w-4 -translate-y-1/2 text-semantic-text-primary/55","aria-hidden":"true"}),_.jsx("input",{id:`${r??"faq"}-search`,type:"search",value:a,onChange:e=>o(e.target.value),placeholder:"Search questions",className:"w-full rounded-full border border-semantic-legacy-brand-blush/60 bg-white px-11 py-3 text-sm text-semantic-text-primary placeholder:text-semantic-text-primary/45 shadow-soft focus:outline-none focus:ring-2 focus:ring-semantic-legacy-brand-cocoa/25",autoComplete:"off"}),d?_.jsx("button",{type:"button",onClick:()=>o(""),"aria-label":"Clear search",className:"absolute right-3 top-1/2 inline-flex h-8 w-8 -translate-y-1/2 items-center justify-center rounded-full border border-semantic-legacy-brand-blush/60 bg-white text-semantic-text-primary shadow-sm hover:bg-brand-porcelain/60",children:_.jsx(te,{className:"h-4 w-4","aria-hidden":"true"})}):null]}),d?_.jsx("p",{className:"mt-3 text-center text-xs text-semantic-text-primary/60",children:h.length?`Showing ${h.length} result${1===h.length?"":"s"}.`:"No results."}):null]})}),_.jsxs("div",{className:"mt-8 space-y-4",children:[f.map((t,n)=>{const i=e.indexOf(t),s=i>=0?i:n,a=l===s;return _.jsxs("div",{id:`${r??"faq"}-item-${s+1}`,className:`rounded-3xl border bg-white/95 p-5 shadow-sm transition ${a?"border-semantic-legacy-brand-cocoa/30 shadow-lg":"border-semantic-accent-cta/40"} scroll-mt-24`,children:[_.jsxs("button",{type:"button",onClick:()=>c(a?-1:s),className:"flex w-full items-center justify-between gap-4 text-left","aria-expanded":a,children:[_.jsx("span",{className:"text-base font-semibold text-semantic-text-primary",children:t.q}),a?_.jsx(G,{className:"h-5 w-5 text-semantic-text-primary"}):_.jsx(Q,{className:"h-5 w-5 text-semantic-text-primary/60"})]}),a?t.a.toLowerCase().startsWith("customer review")?_.jsxs("div",{className:"mt-3 space-y-2 rounded-2xl bg-semantic-legacy-brand-blush/15 p-4",children:[_.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-semantic-text-primary",children:[_.jsx("span",{className:"rounded-full bg-semantic-accent-cta/70 px-3 py-1 text-xs font-semibold uppercase tracking-[0.16em] text-semantic-text-primary",children:"Customer review"}),_.jsx("span",{className:"text-sm font-semibold text-semantic-text-primary",children:""})]}),_.jsx("p",{className:"text-sm leading-relaxed text-semantic-text-primary/85",children:t.a.replace(/^customer review\s*?\s*5:\s*/i,"")})]}):_.jsx("p",{className:"mt-3 text-sm leading-relaxed text-semantic-text-primary/75",children:t.a}):null]},`${t.q}-${s}`)}),d&&!h.length&&_.jsx("p",{className:"rounded-2xl border border-dashed border-semantic-accent-cta/60 bg-white/80 p-4 text-center text-sm text-semantic-text-primary/70",children:"No answers matched that searchreset the filter or send us a quick WhatsApp message."})]})]})})},qe="undefined"!=typeof window,He={current:null},We={current:!1};function Ge(){!We.current&&function(){if(We.current=!0,qe)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>He.current=e.matches;e.addEventListener("change",t),t()}else He.current=!1}();const[e]=b.useState(He.current);return e}const Ke="undefined"!=typeof window?b.useLayoutEffect:b.useEffect,Je="undefined"==typeof window;function Ye(e,{defaultValue:t=!1,initializeWithValue:r=!0}={}){const n=e=>Je?t:window.matchMedia(e).matches,[i,s]=b.useState(()=>r?n(e):t),a=()=>{s(n(e))};return Ke(()=>{const t=window.matchMedia(e);return a(),"function"==typeof t.addEventListener?(t.addEventListener("change",a),()=>{t.removeEventListener("change",a)}):(t.addListener?.(a),()=>{t.removeListener?.(a)})},[e]),i}const Qe=[{author:"Kara",body:"Roomy enough for rollers and still sealed.",stars:5},{author:"Shanice",body:"Zero frizz even on wash day steam.",stars:5},{author:"Jules",body:"Luxe feel, dries fast, still looks cute.",stars:5},{author:"Amari",body:"Finally a cap that fits my braids.",stars:5},{author:"Bri",body:"Elastic is comfy and doesnt dent my forehead.",stars:4.8},{author:"Tay",body:"Worth it for silk press protection alone.",stars:5}],Xe=({review:e,showReviewerPhotos:t})=>{const r=e.author.split(/\s+/).filter(Boolean).slice(0,2).map(e=>e[0]?.toUpperCase()).join("");return _.jsxs("div",{className:"pointer-events-none relative flex h-full w-full flex-col justify-between overflow-hidden rounded-2xl bg-white px-5 py-6 shadow-soft",children:[_.jsx("div",{className:"pointer-events-none absolute inset-0 rounded-2xl bg-[radial-gradient(600px_circle_at_50%_0%,rgba(251,199,178,0.25),transparent_70%)]"}),_.jsx("div",{className:"pointer-events-none absolute inset-0 rounded-2xl ring-1 ring-inset ring-semantic-legacy-brand-blush/30"}),_.jsx("div",{className:"pointer-events-none absolute inset-x-6 bottom-0 h-px bg-gradient-to-r from-transparent via-semantic-accent-cta/40 to-transparent"}),_.jsx("svg",{"aria-hidden":"true",viewBox:"0 0 24 24",className:"pointer-events-none absolute right-4 top-4 h-5 w-5 text-semantic-accent-cta/30",fill:"none",children:_.jsx("path",{d:"M12 3l1.25 5.1L18 9.4l-4.75 1.3L12 16l-1.25-5.3L6 9.4l4.75-1.3L12 3Z",stroke:"currentColor",strokeWidth:"1.2",strokeLinejoin:"round"})}),_.jsx("div",{className:"relative flex justify-center",children:_.jsx(Ne,{value:e.stars??5,size:14})}),_.jsx("div",{className:"relative mt-4 flex-1",children:_.jsx("p",{className:"text-base leading-relaxed text-center text-semantic-text-primary font-medium",children:e.body})}),_.jsxs("div",{className:"relative mt-4 flex items-center justify-center gap-3",children:[_.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-gradient-to-br from-semantic-accent-cta to-semantic-accent-cta/70 text-xs font-semibold text-white shadow-soft",children:r}),_.jsx("p",{className:"text-sm font-medium text-semantic-text-primary",children:e.author})]})]})},Ze=b.memo(({cards:e,activeIndex:t,onActiveIndexChange:r,prefersReducedMotion:n,showReviewerPhotos:i})=>{const s=Ye("(max-width: 640px)"),a=Ye("(max-width: 1024px)"),o=s?300:a?400:480,l=s?380:a?280:320,c=b.useRef(null),u=b.useRef(!1),d=b.useRef(null),h=t=>Math.min(Math.max(t,0),Math.max(0,e.length-1));return b.useEffect(()=>{(e=>{const t=c.current;if(!t)return;const r=h(e);u.current=!0,d.current&&window.clearTimeout(d.current),t.scrollTo({left:r*(o+16),behavior:n?"auto":"smooth"}),d.current=window.setTimeout(()=>{u.current=!1},n?0:450)})(t)},[t,o,e.length]),b.useEffect(()=>{const e=c.current;if(!e)return;let t=0;const n=()=>{u.current||(cancelAnimationFrame(t),t=requestAnimationFrame(()=>{const t=h(Math.round(e.scrollLeft/(o+16)));r(t)}))};return e.addEventListener("scroll",n,{passive:!0}),()=>{e.removeEventListener("scroll",n),cancelAnimationFrame(t)}},[16,o,r]),b.useEffect(()=>()=>{d.current&&window.clearTimeout(d.current)},[]),_.jsx("div",{className:"w-full",children:_.jsxs("div",{className:"relative",children:[_.jsx("div",{ref:c,className:"flex w-full gap-4 overflow-x-auto px-4 pb-4 pt-3 md:pt-5 [-ms-overflow-style:none] [scrollbar-width:none] [&::-webkit-scrollbar]:hidden",style:{scrollSnapType:"x mandatory",scrollPaddingLeft:"16px",scrollPaddingRight:"16px",touchAction:"pan-x"},"aria-label":"Customer reviews",children:e.map((e,t)=>_.jsx("div",{className:"shrink-0 snap-start",style:{width:`${o}px`},children:_.jsx("div",{className:"rounded-2xl bg-gradient-to-br from-semantic-legacy-brand-blush/50 via-white to-semantic-accent-cta/40 p-[1px] shadow-[0_12px_35px_rgba(85,54,42,0.08)]",children:_.jsx("div",{style:{height:`${l}px`},children:_.jsx(Xe,{review:e,showReviewerPhotos:i})})})},`review-${e.author}-${t}`))}),_.jsx("div",{"aria-hidden":"true",className:"pointer-events-none absolute inset-y-0 left-0 w-8 bg-gradient-to-r from-semantic-bg-subtle via-semantic-bg-subtle/70 to-transparent md:w-16 md:block"}),_.jsx("div",{"aria-hidden":"true",className:"pointer-events-none absolute inset-y-0 right-0 w-8 bg-gradient-to-l from-semantic-bg-subtle via-semantic-bg-subtle/70 to-transparent md:w-16 md:block"})]})})});function et({reviews:e,showReviewerPhotos:t=!1}){const r=Ge(),[n,i]=b.useState(0),s=b.useMemo(()=>e?.length?e:Qe,[e]),a=b.useMemo(()=>s.slice(0,12),[s]),o=e=>Math.min(Math.max(e,0),Math.max(0,a.length-1)),l=b.useMemo(()=>{const e=a[o(n)];return e?`Review ${o(n)+1} of ${a.length}: ${e.author}`:`Review 1 of ${a.length}`},[n,a]);return _.jsxs("div",{className:"relative w-full overflow-visible",role:"region","aria-label":"Customer reviews carousel","aria-roledescription":"carousel",tabIndex:0,onKeyDown:e=>{"ArrowLeft"===e.key&&(e.preventDefault(),i(e=>o(e-1))),"ArrowRight"===e.key&&(e.preventDefault(),i(e=>o(e+1)))},children:[_.jsx("p",{className:"sr-only","aria-live":"polite",children:l}),_.jsx(Ze,{cards:a,activeIndex:n,onActiveIndexChange:i,prefersReducedMotion:Boolean(r),showReviewerPhotos:t})]})}const tt={eyebrow:"Loved by thousands",title:"Customer Stories",description:"Real experiences from people who use it every day.",alignment:"center"},rt=({eyebrow:e,title:t,description:r,rating:n,count:i,tagline:s})=>{const a=n?n.toFixed(1):void 0,o=i&&!s?(e=>Number.isFinite(e)?e>=1e6?Math.round(e/1e5)/10+"M+":e>=1e4?`${Math.round(e/1e3)}k+`:e>=1e3?Math.round(e/100)/10+"k+":`${e}+`:"")(i):void 0;return _.jsxs("div",{className:"hidden lg:flex lg:flex-col lg:items-start lg:gap-4 lg:text-left",children:[e?_.jsx("span",{className:"inline-flex rounded-full bg-semantic-legacy-brand-blush/40 px-3 py-1 text-xs font-semibold uppercase tracking-[0.24em] text-semantic-text-primary/70",children:e}):null,t?_.jsx("h2",{className:"font-heading text-4xl font-bold text-semantic-text-primary whitespace-pre-line",children:t}):null,r?_.jsx("p",{className:"max-w-md text-base leading-relaxed text-semantic-text-primary/80 font-serif",children:r}):null,a||o||s?_.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-3 text-sm text-semantic-text-primary/80",children:[a?_.jsxs("span",{className:"inline-flex items-center gap-2",children:[_.jsx(Ne,{value:n??5,size:18}),_.jsx("span",{className:"font-semibold text-semantic-text-primary text-base",children:a})]}):null,o?_.jsxs("span",{className:"inline-flex items-center rounded-full bg-white/75 px-4 py-1.5 font-semibold text-base ring-1 ring-semantic-legacy-brand-blush/50 backdrop-blur",children:[o," reviews"]}):null,s?_.jsx("span",{className:"inline-flex items-center rounded-full bg-white/60 px-4 py-1.5 text-semantic-text-primary/70 text-base ring-1 ring-semantic-legacy-brand-blush/40 backdrop-blur",children:s}):null]}):null]})},nt=({reviews:e,heading:t,summary:r,sectionId:n,showReviewerPhotos:i})=>{const s={...tt,...t,alignment:t?.alignment??tt.alignment},a=((e,t)=>{const r=(()=>{if(!e.length)return;const t=e.reduce((e,t)=>e+(Number.isFinite(t.stars)?t.stars:5),0);return Math.round(t/e.length*10)/10})();return{rating:t?.rating??r,count:t?.count,tagline:t?.tagline}})(e,r);return _.jsxs("section",{id:n??"reviews",className:"relative overflow-hidden bg-semantic-bg-subtle py-12 md:py-14 lg:py-16",children:[_.jsxs("div",{"aria-hidden":"true",className:"pointer-events-none absolute inset-0",children:[_.jsx("div",{className:"absolute -top-28 left-1/2 h-[480px] w-[480px] -translate-x-1/2 rounded-full bg-semantic-accent-cta/25 blur-3xl"}),_.jsx("div",{className:"absolute -bottom-32 right-[-120px] h-[520px] w-[520px] rounded-full bg-semantic-legacy-brand-blush/30 blur-3xl"})]}),_.jsx("div",{className:"relative mx-auto max-w-6xl px-4 md:px-6",children:_.jsxs("div",{className:"lg:grid lg:grid-cols-12 lg:items-center lg:gap-10",children:[_.jsxs("div",{className:"lg:col-span-5",children:[_.jsx(Oe,{eyebrow:s.eyebrow,title:s.title??"",description:s.description,alignment:"right"===s.alignment?"center":s.alignment,className:"gap-3 md:gap-4 lg:hidden"}),_.jsx(rt,{eyebrow:s.eyebrow,title:s.title,description:s.description,rating:a.rating,count:a.count,tagline:a.tagline})]}),_.jsx("div",{className:"mt-4 md:mt-6 lg:col-span-7 lg:mt-0 lg:-mr-10",children:_.jsx(et,{reviews:e,showReviewerPhotos:i})})]})})]})},it=b.createContext(void 0);var st={},at={};function ot(e,t,r,n){return new(r||(r=Promise))(function(i,s){function a(e){try{l(n.next(e))}catch(xo){s(xo)}}function o(e){try{l(n.throw(e))}catch(xo){s(xo)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(a,o)}l((n=n.apply(e,t||[])).next())})}"function"==typeof SuppressedError&&SuppressedError;let lt=class extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}},ct=class extends lt{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}},ut=class extends lt{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}},dt=class extends lt{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}};var ht;!function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"}(ht||(ht={}));const ft=Object.freeze(Object.defineProperty({__proto__:null,get FunctionRegion(){return ht},FunctionsClient:class{constructor(e,{headers:t={},customFetch:r,region:n=ht.Any}={}){this.url=e,this.headers=t,this.region=n,this.fetch=(e=>e?(...t)=>e(...t):(...e)=>fetch(...e))(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return ot(this,arguments,void 0,function*(e,t={}){var r;let n,i;try{const{headers:s,method:a,body:o,signal:l,timeout:c}=t;let u={},{region:d}=t;d||(d=this.region);const h=new URL(`${this.url}/${e}`);let f;d&&"any"!==d&&(u["x-region"]=d,h.searchParams.set("forceFunctionRegion",d)),o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)?"undefined"!=typeof Blob&&o instanceof Blob||o instanceof ArrayBuffer?(u["Content-Type"]="application/octet-stream",f=o):"string"==typeof o?(u["Content-Type"]="text/plain",f=o):"undefined"!=typeof FormData&&o instanceof FormData?f=o:(u["Content-Type"]="application/json",f=JSON.stringify(o)):f=o;let p=l;c&&(i=new AbortController,n=setTimeout(()=>i.abort(),c),l?(p=i.signal,l.addEventListener("abort",()=>i.abort())):p=i.signal);const g=yield this.fetch(h.toString(),{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},u),this.headers),s),body:f,signal:p}).catch(e=>{throw new ct(e)}),m=g.headers.get("x-relay-error");if(m&&"true"===m)throw new ut(g);if(!g.ok)throw new dt(g);let v,y=(null!==(r=g.headers.get("Content-Type"))&&void 0!==r?r:"text/plain").split(";")[0].trim();return v="application/json"===y?yield g.json():"application/octet-stream"===y||"application/pdf"===y?yield g.blob():"text/event-stream"===y?g:"multipart/form-data"===y?yield g.formData():yield g.text(),{data:v,error:null,response:g}}catch(s){return{data:null,error:s,response:s instanceof dt||s instanceof ut?s.context:void 0}}finally{n&&clearTimeout(n)}})}},FunctionsError:lt,FunctionsFetchError:ct,FunctionsHttpError:dt,FunctionsRelayError:ut},Symbol.toStringTag,{value:"Module"})),pt=n(ft);var gt={},mt=function(e,t){return mt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},mt(e,t)};function vt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}mt(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var yt=function(){return yt=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},yt.apply(this,arguments)};function _t(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r}function bt(e,t,r,n){var i,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(s<3?i(a):s>3?i(t,r,a):i(t,r))||a);return s>3&&a&&Object.defineProperty(t,r,a),a}function wt(e,t){return function(r,n){t(r,n,e)}}function xt(e,t,r,n,i,s){function a(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var o,l=n.kind,c="getter"===l?"get":"setter"===l?"set":"value",u=!t&&e?n.static?e:e.prototype:null,d=t||(u?Object.getOwnPropertyDescriptor(u,n.name):{}),h=!1,f=r.length-1;f>=0;f--){var p={};for(var g in n)p[g]="access"===g?{}:n[g];for(var g in n.access)p.access[g]=n.access[g];p.addInitializer=function(e){if(h)throw new TypeError("Cannot add initializers after decoration has completed");s.push(a(e||null))};var m=(0,r[f])("accessor"===l?{get:d.get,set:d.set}:d[c],p);if("accessor"===l){if(void 0===m)continue;if(null===m||"object"!=typeof m)throw new TypeError("Object expected");(o=a(m.get))&&(d.get=o),(o=a(m.set))&&(d.set=o),(o=a(m.init))&&i.unshift(o)}else(o=a(m))&&("field"===l?i.unshift(o):d[c]=o)}u&&Object.defineProperty(u,n.name,d),h=!0}function kt(e,t,r){for(var n=arguments.length>2,i=0;i<t.length;i++)r=n?t[i].call(e,r):t[i].call(e);return n?r:void 0}function Et(e){return"symbol"==typeof e?e:"".concat(e)}function St(e,t,r){return"symbol"==typeof t&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function Tt(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function jt(e,t,r,n){return new(r||(r=Promise))(function(i,s){function a(e){try{l(n.next(e))}catch(xo){s(xo)}}function o(e){try{l(n.throw(e))}catch(xo){s(xo)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(a,o)}l((n=n.apply(e,t||[])).next())})}function Pt(e,t){var r,n,i,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=o(0),a.throw=o(1),a.return=o(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,o[0]&&(s=0)),s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(xo){o=[6,xo],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}var Ot=Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]};function It(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||Ot(t,e,r)}function Nt(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ct(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,s=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=s.next()).done;)a.push(n.value)}catch(o){i={error:o}}finally{try{n&&!n.done&&(r=s.return)&&r.call(s)}finally{if(i)throw i.error}}return a}function Rt(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Ct(arguments[t]));return e}function At(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var s=arguments[t],a=0,o=s.length;a<o;a++,i++)n[i]=s[a];return n}function $t(e,t,r){if(r||2===arguments.length)for(var n,i=0,s=t.length;i<s;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))}function Lt(e){return this instanceof Lt?(this.v=e,this):new Lt(e)}function Ft(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,i=r.apply(e,t||[]),s=[];return n=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",function(e){return function(t){return Promise.resolve(t).then(e,c)}}),n[Symbol.asyncIterator]=function(){return this},n;function a(e,t){i[e]&&(n[e]=function(t){return new Promise(function(r,n){s.push([e,t,r,n])>1||o(e,t)})},t&&(n[e]=t(n[e])))}function o(e,t){try{!function(e){e.value instanceof Lt?Promise.resolve(e.value.v).then(l,c):u(s[0][2],e)}(i[e](t))}catch(xo){u(s[0][3],xo)}}function l(e){o("next",e)}function c(e){o("throw",e)}function u(e,t){e(t),s.shift(),s.length&&o(s[0][0],s[0][1])}}function Mt(e){var t,r;return t={},n("next"),n("throw",function(e){throw e}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,i){t[n]=e[n]?function(t){return(r=!r)?{value:Lt(e[n](t)),done:!1}:i?i(t):t}:i}}function Dt(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=Nt(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise(function(n,i){(function(e,t,r,n){Promise.resolve(n).then(function(t){e({value:t,done:r})},t)})(n,i,(t=e[r](t)).done,t.value)})}}}function Ut(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var zt=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},Bt=function(e){return Bt=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},Bt(e)};function Vt(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=Bt(e),n=0;n<r.length;n++)"default"!==r[n]&&Ot(t,e,r[n]);return zt(t,e),t}function qt(e){return e&&e.__esModule?e:{default:e}}function Ht(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)}function Wt(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r}function Gt(e,t){if(null===t||"object"!=typeof t&&"function"!=typeof t)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof e?t===e:e.has(t)}function Kt(e,t,r){if(null!=t){if("object"!=typeof t&&"function"!=typeof t)throw new TypeError("Object expected.");var n,i;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(void 0===n){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose],r&&(i=n)}if("function"!=typeof n)throw new TypeError("Object not disposable.");i&&(n=function(){try{i.call(this)}catch(xo){return Promise.reject(xo)}}),e.stack.push({value:t,dispose:n,async:r})}else r&&e.stack.push({async:!0});return t}var Jt="function"==typeof SuppressedError?SuppressedError:function(e,t,r){var n=new Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n};function Yt(e){function t(t){e.error=e.hasError?new Jt(t,e.error,"An error was suppressed during disposal."):t,e.hasError=!0}var r,n=0;return function i(){for(;r=e.stack.pop();)try{if(!r.async&&1===n)return n=0,e.stack.push(r),Promise.resolve().then(i);if(r.dispose){var s=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(s).then(i,function(e){return t(e),i()})}else n|=1}catch(xo){t(xo)}if(1===n)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}()}function Qt(e,t){return"string"==typeof e&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(e,r,n,i,s){return r?t?".jsx":".js":!n||i&&s?n+i+"."+s.toLowerCase()+"js":e}):e}const Xt={__extends:vt,__assign:yt,__rest:_t,__decorate:bt,__param:wt,__esDecorate:xt,__runInitializers:kt,__propKey:Et,__setFunctionName:St,__metadata:Tt,__awaiter:jt,__generator:Pt,__createBinding:Ot,__exportStar:It,__values:Nt,__read:Ct,__spread:Rt,__spreadArrays:At,__spreadArray:$t,__await:Lt,__asyncGenerator:Ft,__asyncDelegator:Mt,__asyncValues:Dt,__makeTemplateObject:Ut,__importStar:Vt,__importDefault:qt,__classPrivateFieldGet:Ht,__classPrivateFieldSet:Wt,__classPrivateFieldIn:Gt,__addDisposableResource:Kt,__disposeResources:Yt,__rewriteRelativeImportExtension:Qt},Zt=n(Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:Kt,get __assign(){return yt},__asyncDelegator:Mt,__asyncGenerator:Ft,__asyncValues:Dt,__await:Lt,__awaiter:jt,__classPrivateFieldGet:Ht,__classPrivateFieldIn:Gt,__classPrivateFieldSet:Wt,__createBinding:Ot,__decorate:bt,__disposeResources:Yt,__esDecorate:xt,__exportStar:It,__extends:vt,__generator:Pt,__importDefault:qt,__importStar:Vt,__makeTemplateObject:Ut,__metadata:Tt,__param:wt,__propKey:Et,__read:Ct,__rest:_t,__rewriteRelativeImportExtension:Qt,__runInitializers:kt,__setFunctionName:St,__spread:Rt,__spreadArray:$t,__spreadArrays:At,__values:Nt,default:Xt},Symbol.toStringTag,{value:"Module"})));var er,tr,rr,nr,ir,sr,ar,or={},lr={},cr={},ur={},dr={},hr={};function fr(){if(er)return hr;er=1,Object.defineProperty(hr,"__esModule",{value:!0});class e extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}return hr.default=e,hr}function pr(){if(tr)return dr;tr=1,Object.defineProperty(dr,"__esModule",{value:!0});const e=Zt.__importDefault(fr());return dr.default=class{constructor(e){var t,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=null!==(t=e.shouldThrowOnError)&&void 0!==t&&t,this.signal=e.signal,this.isMaybeSingle=null!==(r=e.isMaybeSingle)&&void 0!==r&&r,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(t,r){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),"GET"!==this.method&&"HEAD"!==this.method&&this.headers.set("Content-Type","application/json");let n=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async t=>{var r,n,i,s;let a=null,o=null,l=null,c=t.status,u=t.statusText;if(t.ok){if("HEAD"!==this.method){const e=await t.text();""===e||(o="text/csv"===this.headers.get("Accept")||this.headers.get("Accept")&&(null===(r=this.headers.get("Accept"))||void 0===r?void 0:r.includes("application/vnd.pgrst.plan+text"))?e:JSON.parse(e))}const e=null===(n=this.headers.get("Prefer"))||void 0===n?void 0:n.match(/count=(exact|planned|estimated)/),s=null===(i=t.headers.get("content-range"))||void 0===i?void 0:i.split("/");e&&s&&s.length>1&&(l=parseInt(s[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(o)&&(o.length>1?(a={code:"PGRST116",details:`Results contain ${o.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},o=null,l=null,c=406,u="Not Acceptable"):o=1===o.length?o[0]:null)}else{const r=await t.text();try{a=JSON.parse(r),Array.isArray(a)&&404===t.status&&(o=[],a=null,c=200,u="OK")}catch(Tu){404===t.status&&""===r?(c=204,u="No Content"):a={message:r}}if(a&&this.isMaybeSingle&&(null===(s=null==a?void 0:a.details)||void 0===s?void 0:s.includes("0 rows"))&&(a=null,c=200,u="OK"),a&&this.shouldThrowOnError)throw new e.default(a)}return{error:a,data:o,count:l,status:c,statusText:u}});return this.shouldThrowOnError||(n=n.catch(e=>{var t,r,n,i,s,a;let o="";const l=null==e?void 0:e.cause;if(l){const s=null!==(t=null==l?void 0:l.message)&&void 0!==t?t:"",a=null!==(r=null==l?void 0:l.code)&&void 0!==r?r:"";o=`${null!==(n=null==e?void 0:e.name)&&void 0!==n?n:"FetchError"}: ${null==e?void 0:e.message}`,o+=`\n\nCaused by: ${null!==(i=null==l?void 0:l.name)&&void 0!==i?i:"Error"}: ${s}`,a&&(o+=` (${a})`),(null==l?void 0:l.stack)&&(o+=`\n${l.stack}`)}else o=null!==(s=null==e?void 0:e.stack)&&void 0!==s?s:"";return{error:{message:`${null!==(a=null==e?void 0:e.name)&&void 0!==a?a:"FetchError"}: ${null==e?void 0:e.message}`,details:o,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),n.then(t,r)}returns(){return this}overrideTypes(){return this}},dr}function gr(){if(rr)return ur;rr=1,Object.defineProperty(ur,"__esModule",{value:!0});const e=Zt.__importDefault(pr());let t=class extends e.default{select(e){let t=!1;const r=(null!=e?e:"*").split("").map(e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:n,referencedTable:i=n}={}){const s=i?`${i}.order`:"order",a=this.url.searchParams.get(s);return this.url.searchParams.set(s,`${a?`${a},`:""}${e}.${t?"asc":"desc"}${void 0===r?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const n=void 0===r?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:n=r}={}){const i=void 0===n?"offset":`${n}.offset`,s=void 0===n?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(s,""+(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return"GET"===this.method?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:n=!1,wal:i=!1,format:s="text"}={}){var a;const o=[e?"analyze":null,t?"verbose":null,r?"settings":null,n?"buffers":null,i?"wal":null].filter(Boolean).join("|"),l=null!==(a=this.headers.get("Accept"))&&void 0!==a?a:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${s}; for="${l}"; options=${o};`),this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};return ur.default=t,ur}function mr(){if(nr)return cr;nr=1,Object.defineProperty(cr,"__esModule",{value:!0});const e=Zt.__importDefault(gr()),t=new RegExp("[,()]");let r=class extends e.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,r){const n=Array.from(new Set(r)).map(e=>"string"==typeof e&&t.test(e)?`"${e}"`:`${e}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return"string"==typeof t?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:n}={}){let i="";"plain"===n?i="pl":"phrase"===n?i="ph":"websearch"===n&&(i="w");const s=void 0===r?"":`(${r})`;return this.url.searchParams.append(e,`${i}fts${s}.${t}`),this}match(e){return Object.entries(e).forEach(([e,t])=>{this.url.searchParams.append(e,`eq.${t}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}};return cr.default=r,cr}function vr(){if(ir)return lr;ir=1,Object.defineProperty(lr,"__esModule",{value:!0});const e=Zt.__importDefault(mr());return lr.default=class{constructor(e,{headers:t={},schema:r,fetch:n}){this.url=e,this.headers=new Headers(t),this.schema=r,this.fetch=n}select(t,r){const{head:n=!1,count:i}=null!=r?r:{},s=n?"HEAD":"GET";let a=!1;const o=(null!=t?t:"*").split("").map(e=>/\s/.test(e)&&!a?"":('"'===e&&(a=!a),e)).join("");return this.url.searchParams.set("select",o),i&&this.headers.append("Prefer",`count=${i}`),new e.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:r,defaultToNull:n=!0}={}){var i;if(r&&this.headers.append("Prefer",`count=${r}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const e=t.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(e.length>0){const t=[...new Set(e)].map(e=>`"${e}"`);this.url.searchParams.set("columns",t.join(","))}}return new e.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:null!==(i=this.fetch)&&void 0!==i?i:fetch})}upsert(t,{onConflict:r,ignoreDuplicates:n=!1,count:i,defaultToNull:s=!0}={}){var a;if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),void 0!==r&&this.url.searchParams.set("on_conflict",r),i&&this.headers.append("Prefer",`count=${i}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const e=t.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(e.length>0){const t=[...new Set(e)].map(e=>`"${e}"`);this.url.searchParams.set("columns",t.join(","))}}return new e.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:null!==(a=this.fetch)&&void 0!==a?a:fetch})}update(t,{count:r}={}){var n;return r&&this.headers.append("Prefer",`count=${r}`),new e.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:null!==(n=this.fetch)&&void 0!==n?n:fetch})}delete({count:t}={}){var r;return t&&this.headers.append("Prefer",`count=${t}`),new e.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:null!==(r=this.fetch)&&void 0!==r?r:fetch})}},lr}function yr(){if(ar)return gt;ar=1,Object.defineProperty(gt,"__esModule",{value:!0}),gt.PostgrestError=gt.PostgrestBuilder=gt.PostgrestTransformBuilder=gt.PostgrestFilterBuilder=gt.PostgrestQueryBuilder=gt.PostgrestClient=void 0;const e=Zt,t=e.__importDefault(function(){if(sr)return or;sr=1,Object.defineProperty(or,"__esModule",{value:!0});const e=Zt,t=e.__importDefault(vr()),r=e.__importDefault(mr());return or.default=class e{constructor(e,{headers:t={},schema:r,fetch:n}={}){this.url=e,this.headers=new Headers(t),this.schemaName=r,this.fetch=n}from(e){if(!e||"string"!=typeof e||""===e.trim())throw new Error("Invalid relation name: relation must be a non-empty string.");const r=new URL(`${this.url}/${e}`);return new t.default(r,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new e(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(e,t={},{head:n=!1,get:i=!1,count:s}={}){var a;let o;const l=new URL(`${this.url}/rpc/${e}`);let c;n||i?(o=n?"HEAD":"GET",Object.entries(t).filter(([e,t])=>void 0!==t).map(([e,t])=>[e,Array.isArray(t)?`{${t.join(",")}}`:`${t}`]).forEach(([e,t])=>{l.searchParams.append(e,t)})):(o="POST",c=t);const u=new Headers(this.headers);return s&&u.set("Prefer",`count=${s}`),new r.default({method:o,url:l,headers:u,schema:this.schemaName,body:c,fetch:null!==(a=this.fetch)&&void 0!==a?a:fetch})}},or}());gt.PostgrestClient=t.default;const r=e.__importDefault(vr());gt.PostgrestQueryBuilder=r.default;const n=e.__importDefault(mr());gt.PostgrestFilterBuilder=n.default;const i=e.__importDefault(gr());gt.PostgrestTransformBuilder=i.default;const s=e.__importDefault(pr());gt.PostgrestBuilder=s.default;const a=e.__importDefault(fr());return gt.PostgrestError=a.default,gt.default={PostgrestClient:t.default,PostgrestQueryBuilder:r.default,PostgrestFilterBuilder:n.default,PostgrestTransformBuilder:i.default,PostgrestBuilder:s.default,PostgrestError:a.default},gt}class _r{constructor(){}static detectEnvironment(){var e;if("undefined"!=typeof WebSocket)return{type:"native",constructor:WebSocket};if("undefined"!=typeof globalThis&&void 0!==globalThis.WebSocket)return{type:"native",constructor:globalThis.WebSocket};if("undefined"!=typeof global&&void 0!==global.WebSocket)return{type:"native",constructor:global.WebSocket};if("undefined"!=typeof globalThis&&void 0!==globalThis.WebSocketPair&&void 0===globalThis.WebSocket)return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if("undefined"!=typeof globalThis&&globalThis.EdgeRuntime||"undefined"!=typeof navigator&&(null===(e=navigator.userAgent)||void 0===e?void 0:e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if("undefined"!=typeof process){const e=process.versions;if(e&&e.node){const t=e.node,r=parseInt(t.replace(/^v/,"").split(".")[0]);return r>=22?void 0!==globalThis.WebSocket?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${r} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${r} detected without native WebSocket support.`,workaround:'For Node.js < 22, install "ws" package and provide it via the transport option:\nimport ws from "ws"\nnew RealtimeClient(url, { transport: ws })'}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`\n\nSuggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){return new(this.getWebSocketConstructor())(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return"native"===e.type||"ws"===e.type}catch(_n){return!1}}}const br="1.0.0",wr=br,xr=1e4;var kr,Er,Sr,Tr,jr,Pr;!function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"}(kr||(kr={})),function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"}(Er||(Er={})),function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"}(Sr||(Sr={})),function(e){e.websocket="websocket"}(Tr||(Tr={})),function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"}(jr||(jr={}));class Or{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=null!=e?e:[]}encode(e,t){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&"string"==typeof e.payload.event)return t(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return t(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(e){var t;return this._isArrayBuffer(null===(t=e.payload)||void 0===t?void 0:t.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var t,r;const n=null!==(r=null===(t=e.payload)||void 0===t?void 0:t.payload)&&void 0!==r?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,n)}_encodeJsonUserBroadcastPush(e){var t,r;const n=null!==(r=null===(t=e.payload)||void 0===t?void 0:t.payload)&&void 0!==r?r:{},i=(new TextEncoder).encode(JSON.stringify(n)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,i)}_encodeUserBroadcastPush(e,t,r){var n,i;const s=e.topic,a=null!==(n=e.ref)&&void 0!==n?n:"",o=null!==(i=e.join_ref)&&void 0!==i?i:"",l=e.payload.event,c=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},u=0===Object.keys(c).length?"":JSON.stringify(c);if(o.length>255)throw new Error(`joinRef length ${o.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`ref length ${a.length} exceeds maximum of 255`);if(s.length>255)throw new Error(`topic length ${s.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`userEvent length ${l.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`metadata length ${u.length} exceeds maximum of 255`);const d=this.USER_BROADCAST_PUSH_META_LENGTH+o.length+a.length+s.length+l.length+u.length,h=new ArrayBuffer(this.HEADER_LENGTH+d);let f=new DataView(h),p=0;f.setUint8(p++,this.KINDS.userBroadcastPush),f.setUint8(p++,o.length),f.setUint8(p++,a.length),f.setUint8(p++,s.length),f.setUint8(p++,l.length),f.setUint8(p++,u.length),f.setUint8(p++,t),Array.from(o,e=>f.setUint8(p++,e.charCodeAt(0))),Array.from(a,e=>f.setUint8(p++,e.charCodeAt(0))),Array.from(s,e=>f.setUint8(p++,e.charCodeAt(0))),Array.from(l,e=>f.setUint8(p++,e.charCodeAt(0))),Array.from(u,e=>f.setUint8(p++,e.charCodeAt(0)));var g=new Uint8Array(h.byteLength+r.byteLength);return g.set(new Uint8Array(h),0),g.set(new Uint8Array(r),h.byteLength),g.buffer}decode(e,t){if(this._isArrayBuffer(e)){return t(this._binaryDecode(e))}if("string"==typeof e){const r=JSON.parse(e),[n,i,s,a,o]=r;return t({join_ref:n,ref:i,topic:s,event:a,payload:o})}return t({})}_binaryDecode(e){const t=new DataView(e),r=t.getUint8(0),n=new TextDecoder;if(r===this.KINDS.userBroadcast)return this._decodeUserBroadcast(e,t,n)}_decodeUserBroadcast(e,t,r){const n=t.getUint8(1),i=t.getUint8(2),s=t.getUint8(3),a=t.getUint8(4);let o=this.HEADER_LENGTH+4;const l=r.decode(e.slice(o,o+n));o+=n;const c=r.decode(e.slice(o,o+i));o+=i;const u=r.decode(e.slice(o,o+s));o+=s;const d=e.slice(o,e.byteLength),h=a===this.JSON_ENCODING?JSON.parse(r.decode(d)):d,f={type:this.BROADCAST_EVENT,event:c,payload:h};return s>0&&(f.meta=JSON.parse(u)),{join_ref:null,ref:null,topic:l,event:this.BROADCAST_EVENT,payload:f}}_isArrayBuffer(e){var t;return e instanceof ArrayBuffer||"ArrayBuffer"===(null===(t=null==e?void 0:e.constructor)||void 0===t?void 0:t.name)}_pick(e,t){return e&&"object"==typeof e?Object.fromEntries(Object.entries(e).filter(([e])=>t.includes(e))):{}}}class Ir{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}!function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"}(Pr||(Pr={}));const Nr=(e,t,r={})=>{var n;const i=null!==(n=r.skipTypes)&&void 0!==n?n:[];return t?Object.keys(t).reduce((r,n)=>(r[n]=Cr(n,e,t,i),r),{}):{}},Cr=(e,t,r,n)=>{const i=t.find(t=>t.name===e),s=null==i?void 0:i.type,a=r[e];return s&&!n.includes(s)?Rr(s,a):Ar(a)},Rr=(e,t)=>{if("_"===e.charAt(0)){const r=e.slice(1,e.length);return Mr(t,r)}switch(e){case Pr.bool:return $r(t);case Pr.float4:case Pr.float8:case Pr.int2:case Pr.int4:case Pr.int8:case Pr.numeric:case Pr.oid:return Lr(t);case Pr.json:case Pr.jsonb:return Fr(t);case Pr.timestamp:return Dr(t);case Pr.abstime:case Pr.date:case Pr.daterange:case Pr.int4range:case Pr.int8range:case Pr.money:case Pr.reltime:case Pr.text:case Pr.time:case Pr.timestamptz:case Pr.timetz:case Pr.tsrange:case Pr.tstzrange:default:return Ar(t)}},Ar=e=>e,$r=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},Lr=e=>{if("string"==typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},Fr=e=>{if("string"==typeof e)try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},Mr=(e,t)=>{if("string"!=typeof e)return e;const r=e.length-1,n=e[r];if("{"===e[0]&&"}"===n){let n;const i=e.slice(1,r);try{n=JSON.parse("["+i+"]")}catch(Fo){n=i?i.split(","):[]}return n.map(e=>Rr(t,e))}return e},Dr=e=>"string"==typeof e?e.replace(" ","T"):e,Ur=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),""===t.pathname||"/"===t.pathname?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class zr{constructor(e,t,r={},n=1e4){this.channel=e,this.event=t,this.payload=r,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t(null===(r=this.receivedResp)||void 0===r?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(t=>t.status===e).forEach(e=>e.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Br;!function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"}(Br||(Br={}));let Vr=class e{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(null==r?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},t=>{const{onJoin:r,onLeave:n,onSync:i}=this.caller;this.joinRef=this.channel._joinRef(),this.state=e.syncState(this.state,t,r,n),this.pendingDiffs.forEach(t=>{this.state=e.syncDiff(this.state,t,r,n)}),this.pendingDiffs=[],i()}),this.channel._on(n.diff,{},t=>{const{onJoin:r,onLeave:n,onSync:i}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(t):(this.state=e.syncDiff(this.state,t,r,n),i())}),this.onJoin((e,t,r)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:r})}),this.onLeave((e,t,r)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:r})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,n){const i=this.cloneDeep(e),s=this.transformState(t),a={},o={};return this.map(i,(e,t)=>{s[e]||(o[e]=t)}),this.map(s,(e,t)=>{const r=i[e];if(r){const n=t.map(e=>e.presence_ref),i=r.map(e=>e.presence_ref),s=t.filter(e=>i.indexOf(e.presence_ref)<0),l=r.filter(e=>n.indexOf(e.presence_ref)<0);s.length>0&&(a[e]=s),l.length>0&&(o[e]=l)}else a[e]=t}),this.syncDiff(i,{joins:a,leaves:o},r,n)}static syncDiff(e,t,r,n){const{joins:i,leaves:s}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),n||(n=()=>{}),this.map(i,(t,n)=>{var i;const s=null!==(i=e[t])&&void 0!==i?i:[];if(e[t]=this.cloneDeep(n),s.length>0){const r=e[t].map(e=>e.presence_ref),n=s.filter(e=>r.indexOf(e.presence_ref)<0);e[t].unshift(...n)}r(t,s,n)}),this.map(s,(t,r)=>{let i=e[t];if(!i)return;const s=r.map(e=>e.presence_ref);i=i.filter(e=>s.indexOf(e.presence_ref)<0),e[t]=i,n(t,i,r),0===i.length&&delete e[t]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const n=e[r];return t[r]="metas"in n?n.metas.map(e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e)):n,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var qr,Hr,Wr;!function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"}(qr||(qr={})),function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"}(Hr||(Hr={})),function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"}(Wr||(Wr={}));const Gr=Er;let Kr=class e{constructor(e,t={config:{}},r){var n,i;if(this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=Er.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new zr(this,Sr.join,this.params,this.timeout),this.rejoinTimer=new Ir(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Er.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(e=>e.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Er.closed,this.socket._remove(this)}),this._onError(e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=Er.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Er.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=Er.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Sr.reply,{},(e,t)=>{this._trigger(this._replyEventName(t),e)}),this.presence=new Vr(this),this.broadcastEndpointURL=Ur(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(null===(i=null===(n=this.params.config)||void 0===n?void 0:n.broadcast)||void 0===i?void 0:i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var n,i,s;if(this.socket.isConnected()||this.socket.connect(),this.state==Er.closed){const{config:{broadcast:a,presence:o,private:l}}=this.params,c=null!==(i=null===(n=this.bindings.postgres_changes)||void 0===n?void 0:n.map(e=>e.filter))&&void 0!==i?i:[],u=!!this.bindings[Hr.PRESENCE]&&this.bindings[Hr.PRESENCE].length>0||!0===(null===(s=this.params.config.presence)||void 0===s?void 0:s.enabled),d={},h={broadcast:a,presence:Object.assign(Object.assign({},o),{enabled:u}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(e=>null==t?void 0:t(Wr.CHANNEL_ERROR,e)),this._onClose(()=>null==t?void 0:t(Wr.CLOSED)),this.updateJoinPayload(Object.assign({config:h},d)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:r})=>{var n;if(this.socket._isManualToken()||this.socket.setAuth(),void 0!==r){const i=this.bindings.postgres_changes,s=null!==(n=null==i?void 0:i.length)&&void 0!==n?n:0,a=[];for(let n=0;n<s;n++){const s=i[n],{filter:{event:o,schema:l,table:c,filter:u}}=s,d=r&&r[n];if(!(d&&d.event===o&&e.isFilterValueEqual(d.schema,l)&&e.isFilterValueEqual(d.table,c)&&e.isFilterValueEqual(d.filter,u)))return this.unsubscribe(),this.state=Er.errored,void(null==t||t(Wr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes")));a.push(Object.assign(Object.assign({},s),{id:d.id}))}return this.bindings.postgres_changes=a,void(t&&t(Wr.SUBSCRIBED))}null==t||t(Wr.SUBSCRIBED)}).receive("error",e=>{this.state=Er.errored,null==t||t(Wr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(e).join(", ")||"error")))}).receive("timeout",()=>{null==t||t(Wr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this.state===Er.joined&&e===Hr.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,t,r)}async httpSend(e,t,r={}){var n;const i=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(null==t)return Promise.reject("Payload is required for httpSend()");const s={method:"POST",headers:{Authorization:i,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:t,private:this.private}]})},a=await this._fetchWithTimeout(this.broadcastEndpointURL,s,null!==(n=r.timeout)&&void 0!==n?n:this.timeout);if(202===a.status)return{success:!0};let o=a.statusText;try{const e=await a.json();o=e.error||e.message||o}catch(l){}return Promise.reject(new Error(o))}async send(e,t={}){var r,n;if(this._canPush()||"broadcast"!==e.type)return new Promise(r=>{var n,i,s;const a=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null===(s=null===(i=null===(n=this.params)||void 0===n?void 0:n.config)||void 0===i?void 0:i.broadcast)||void 0===s?void 0:s.ack)||r("ok"),a.receive("ok",()=>r("ok")),a.receive("error",()=>r("error")),a.receive("timeout",()=>r("timed out"))});{console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:s,payload:a}=e,o={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:a,private:this.private}]})};try{const e=await this._fetchWithTimeout(this.broadcastEndpointURL,o,null!==(r=t.timeout)&&void 0!==r?r:this.timeout);return await(null===(n=e.body)||void 0===n?void 0:n.cancel()),e.ok?"ok":"error"}catch(i){return"AbortError"===i.name?"timed out":"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Er.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Sr.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(n=>{r=new zr(this,Sr.leave,{},e),r.receive("ok",()=>{t(),n("ok")}).receive("timeout",()=>{t(),n("timed out")}).receive("error",()=>{n("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{null==r||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Er.closed,this.bindings={}}async _fetchWithTimeout(e,t,r){const n=new AbortController,i=setTimeout(()=>n.abort(),r),s=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:n.signal}));return clearTimeout(i),s}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new zr(this,e,t,r);return this._canPush()?n.send():this._addToPushBuffer(n),n}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>100){const e=this.pushBuffer.shift();e&&(e.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${e.event}`,e.payload))}}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var n,i;const s=e.toLocaleLowerCase(),{close:a,error:o,leave:l,join:c}=Sr;if(r&&[a,o,l,c].indexOf(s)>=0&&r!==this._joinRef())return;let u=this._onMessage(s,t,r);if(t&&!u)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?null===(n=this.bindings.postgres_changes)||void 0===n||n.filter(e=>{var t,r,n;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(n=null===(r=e.filter)||void 0===r?void 0:r.event)||void 0===n?void 0:n.toLocaleLowerCase())===s}).map(e=>e.callback(u,r)):null===(i=this.bindings[s])||void 0===i||i.filter(e=>{var r,n,i,a,o,l;if(["broadcast","presence","postgres_changes"].includes(s)){if("id"in e){const s=e.id,a=null===(r=e.filter)||void 0===r?void 0:r.event;return s&&(null===(n=t.ids)||void 0===n?void 0:n.includes(s))&&("*"===a||(null==a?void 0:a.toLocaleLowerCase())===(null===(i=t.data)||void 0===i?void 0:i.type.toLocaleLowerCase()))}{const r=null===(o=null===(a=null==e?void 0:e.filter)||void 0===a?void 0:a.event)||void 0===o?void 0:o.toLocaleLowerCase();return"*"===r||r===(null===(l=null==t?void 0:t.event)||void 0===l?void 0:l.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===s}).map(e=>{if("object"==typeof u&&"ids"in u){const e=u.data,{schema:t,table:r,commit_timestamp:n,type:i,errors:s}=e,a={schema:t,table:r,commit_timestamp:n,eventType:i,new:{},old:{},errors:s};u=Object.assign(Object.assign({},a),this._getPayloadRecords(e))}e.callback(u,r)})}_isClosed(){return this.state===Er.closed}_isJoined(){return this.state===Er.joined}_isJoining(){return this.state===Er.joining}_isLeaving(){return this.state===Er.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const n=e.toLocaleLowerCase(),i={type:n,filter:t,callback:r};return this.bindings[n]?this.bindings[n].push(i):this.bindings[n]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(t=>{var i;return!((null===(i=t.type)||void 0===i?void 0:i.toLocaleLowerCase())===n&&e.isEqual(t.filter,r))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}static isFilterValueEqual(e,t){return(null!=e?e:void 0)===(null!=t?t:void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Sr.close,{},e)}_onError(e){this._on(Sr.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Er.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=Nr(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=Nr(e.columns,e.old_record)),t}};const Jr=()=>{},Yr=25e3,Qr=10,Xr=100,Zr=[1e3,2e3,5e3,1e4];const en=Object.freeze(Object.defineProperty({__proto__:null,REALTIME_CHANNEL_STATES:Gr,get REALTIME_LISTEN_TYPES(){return Hr},get REALTIME_POSTGRES_CHANGES_LISTEN_EVENT(){return qr},get REALTIME_PRESENCE_LISTEN_EVENTS(){return Br},get REALTIME_SUBSCRIBE_STATES(){return Wr},RealtimeChannel:Kr,RealtimeClient:class{constructor(e,t){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=xr,this.transport=null,this.heartbeatIntervalMs=Yr,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Jr,this.ref=0,this.reconnectTimer=null,this.vsn=wr,this.logger=Jr,this.conn=null,this.sendBuffer=[],this.serializer=new Or,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=e=>e?(...t)=>e(...t):(...e)=>fetch(...e),!(null===(r=null==t?void 0:t.params)||void 0===r?void 0:r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${Tr.websocket}`,this.httpEndpoint=Ur(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(null==t?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||null!==this.conn&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=_r.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;if(t.includes("Node.js"))throw new Error(`${t}\n\nTo use Realtime in Node.js, you need to provide a WebSocket implementation:\n\nOption 1: Use Node.js 22+ which has native WebSocket support\nOption 2: Install and provide the "ws" package:\n\n  npm install ws\n\n  import ws from "ws"\n  const client = new RealtimeClient(url, {\n    ...options,\n    transport: ws\n  })`);throw new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},"function"==typeof this.conn.close&&(e?this.conn.close(e,null!=t?t:""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case kr.connecting:return jr.Connecting;case kr.open:return jr.Open;case kr.closing:return jr.Closing;default:return jr.Closed}}isConnected(){return this.connectionState()===jr.Open}isConnecting(){return"connecting"===this._connectionState}isDisconnecting(){return"disconnecting"===this._connectionState}channel(e,t={config:{}}){const r=`realtime:${e}`,n=this.getChannels().find(e=>e.topic===r);if(n)return n;{const r=new Kr(`realtime:${e}`,t,this);return this.channels.push(r),r}}push(e){const{topic:t,event:r,payload:n,ref:i}=e,s=()=>{this.encode(e,e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)})};this.log("push",`${t} ${r} (${i})`,n),this.isConnected()?s():this.sendBuffer.push(s)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(xo){this.log("error","error in heartbeat callback",xo)}return this._wasManualDisconnect=!1,null===(e=this.conn)||void 0===e||e.close(1e3,"heartbeat timeout"),void setTimeout(()=>{var e;this.isConnected()||null===(e=this.reconnectTimer)||void 0===e||e.scheduleTimeout()},Xr)}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(xo){this.log("error","error in heartbeat callback",xo)}this._setAuthSafely("heartbeat")}else try{this.heartbeatCallback("disconnected")}catch(xo){this.log("error","error in heartbeat callback",xo)}}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(t=>t.topic===e&&(t._isJoined()||t._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,e=>{if("phoenix"===e.topic&&"phx_reply"===e.event)try{this.heartbeatCallback("ok"===e.payload.status?"ok":"error")}catch(xo){this.log("error","error in heartbeat callback",xo)}e.ref&&e.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:t,event:r,payload:n,ref:i}=e,s=i?`(${i})`:"",a=n.status||"";this.log("receive",`${a} ${t} ${r} ${s}`.trim(),n),this.channels.filter(e=>e._isMember(t)).forEach(e=>e._trigger(r,n,i)),this._triggerStateCallbacks("message",e)})}_clearTimer(e){var t;"heartbeat"===e&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):"reconnect"===e&&(null===(t=this.reconnectTimer)||void 0===t||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===kr.open||this.conn.readyState===kr.connecting)try{this.conn.close()}catch(xo){this.log("error","Error closing connection",xo)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`);(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(e=>{this.log("error","error waiting for auth on connect",e),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||null===(t=this.reconnectTimer)||void 0===t||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Sr.error))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const r=e.match(/\?/)?"&":"?";return`${e}${r}${new URLSearchParams(t)}`}_workerObjectUrl(e){let t;if(e)t=e;else{const e=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});t=URL.createObjectURL(e)}return t}_setConnectionState(e,t=!1){this._connectionState=e,"connecting"===e?this._wasManualDisconnect=!1:"disconnecting"===e&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t,r=!1;if(e)t=e,r=!0;else if(this.accessToken)try{t=await this.accessToken()}catch(xo){this.log("error","Error fetching access token from callback",xo),t=this.accessTokenValue}else t=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(e=>{const r={access_token:t,version:"realtime-js/2.87.1"};t&&e.updateJoinPayload(r),e.joinedOnce&&e._isJoined()&&e._push(Sr.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(t=>{this.log("error",`Error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(t)}catch(xo){this.log("error",`error in ${e} callback`,xo)}})}catch(xo){this.log("error",`error triggering ${e} callbacks`,xo)}}_setupReconnectionTimer(){this.reconnectTimer=new Ir(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Qr)},this.reconnectAfterMs)}_initializeOptions(e){var t,r,n,i,s,a,o,l,c,u,d,h;switch(this.transport=null!==(t=null==e?void 0:e.transport)&&void 0!==t?t:null,this.timeout=null!==(r=null==e?void 0:e.timeout)&&void 0!==r?r:xr,this.heartbeatIntervalMs=null!==(n=null==e?void 0:e.heartbeatIntervalMs)&&void 0!==n?n:Yr,this.worker=null!==(i=null==e?void 0:e.worker)&&void 0!==i&&i,this.accessToken=null!==(s=null==e?void 0:e.accessToken)&&void 0!==s?s:null,this.heartbeatCallback=null!==(a=null==e?void 0:e.heartbeatCallback)&&void 0!==a?a:Jr,this.vsn=null!==(o=null==e?void 0:e.vsn)&&void 0!==o?o:wr,(null==e?void 0:e.params)&&(this.params=e.params),(null==e?void 0:e.logger)&&(this.logger=e.logger),((null==e?void 0:e.logLevel)||(null==e?void 0:e.log_level))&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=null!==(l=null==e?void 0:e.reconnectAfterMs)&&void 0!==l?l:e=>Zr[e-1]||1e4,this.vsn){case br:this.encode=null!==(c=null==e?void 0:e.encode)&&void 0!==c?c:(e,t)=>t(JSON.stringify(e)),this.decode=null!==(u=null==e?void 0:e.decode)&&void 0!==u?u:(e,t)=>t(JSON.parse(e));break;case"2.0.0":this.encode=null!==(d=null==e?void 0:e.encode)&&void 0!==d?d:this.serializer.encode.bind(this.serializer),this.decode=null!==(h=null==e?void 0:e.decode)&&void 0!==h?h:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if("undefined"!=typeof window&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=null==e?void 0:e.workerUrl}}},RealtimePresence:Vr,WebSocketFactory:_r},Symbol.toStringTag,{value:"Module"})),tn=n(en);function rn(e,t,r,n){return new(r||(r=Promise))(function(i,s){function a(e){try{l(n.next(e))}catch(xo){s(xo)}}function o(e){try{l(n.throw(e))}catch(xo){s(xo)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(a,o)}l((n=n.apply(e,t||[])).next())})}"function"==typeof SuppressedError&&SuppressedError;class nn extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function sn(e){return"object"==typeof e&&null!==e&&"__isStorageError"in e}class an extends nn{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class on extends nn{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}const ln=e=>e?(...t)=>e(...t):(...e)=>fetch(...e),cn=e=>{if(Array.isArray(e))return e.map(e=>cn(e));if("function"==typeof e||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([e,r])=>{const n=e.replace(/([-_][a-z])/gi,e=>e.toUpperCase().replace(/[-_]/g,""));t[n]=cn(r)}),t},un=e=>{var t;return e.msg||e.message||e.error_description||("string"==typeof e.error?e.error:null===(t=e.error)||void 0===t?void 0:t.message)||JSON.stringify(e)},dn=(e,t,r)=>rn(void 0,void 0,void 0,function*(){const n=yield Response;e instanceof n&&!(null==r?void 0:r.noResolveJson)?e.json().then(r=>{const n=e.status||500,i=(null==r?void 0:r.statusCode)||n+"";t(new an(un(r),n,i))}).catch(e=>{t(new on(un(e),e))}):t(new on(un(e),e))}),hn=(e,t,r,n)=>{const i={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"!==e&&n?((e=>{if("object"!=typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)})(n)?(i.headers=Object.assign({"Content-Type":"application/json"},null==t?void 0:t.headers),i.body=JSON.stringify(n)):i.body=n,(null==t?void 0:t.duplex)&&(i.duplex=t.duplex),Object.assign(Object.assign({},i),r)):i};function fn(e,t,r,n,i,s){return rn(this,void 0,void 0,function*(){return new Promise((a,o)=>{e(r,hn(t,n,i,s)).then(e=>{if(!e.ok)throw e;return(null==n?void 0:n.noResolveJson)?e:e.json()}).then(e=>a(e)).catch(e=>dn(e,o,n))})})}function pn(e,t,r,n){return rn(this,void 0,void 0,function*(){return fn(e,"GET",t,r,n)})}function gn(e,t,r,n,i){return rn(this,void 0,void 0,function*(){return fn(e,"POST",t,n,i,r)})}function mn(e,t,r,n,i){return rn(this,void 0,void 0,function*(){return fn(e,"PUT",t,n,i,r)})}function vn(e,t,r,n,i){return rn(this,void 0,void 0,function*(){return fn(e,"DELETE",t,n,i,r)})}class yn{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}execute(){return rn(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(sn(e))return{data:null,error:e};throw e}})}}var _n;class bn{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[_n]="BlobDownloadBuilder",this.promise=null}asStream(){return new yn(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return rn(this,void 0,void 0,function*(){try{const e=yield this.downloadFn();return{data:yield e.blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(sn(e))return{data:null,error:e};throw e}})}}_n=Symbol.toStringTag;const wn={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},xn={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class kn{constructor(e,t={},r,n){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=r,this.fetch=ln(n)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,r,n){return rn(this,void 0,void 0,function*(){try{let i;const s=Object.assign(Object.assign({},xn),n);let a=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(s.upsert)});const o=s.metadata;if("undefined"!=typeof Blob&&r instanceof Blob)i=new FormData,i.append("cacheControl",s.cacheControl),o&&i.append("metadata",this.encodeMetadata(o)),i.append("",r);else if("undefined"!=typeof FormData&&r instanceof FormData)i=r,i.has("cacheControl")||i.append("cacheControl",s.cacheControl),o&&!i.has("metadata")&&i.append("metadata",this.encodeMetadata(o));else{i=r,a["cache-control"]=`max-age=${s.cacheControl}`,a["content-type"]=s.contentType,o&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(o)));("undefined"!=typeof ReadableStream&&i instanceof ReadableStream||i&&"object"==typeof i&&"pipe"in i&&"function"==typeof i.pipe)&&!s.duplex&&(s.duplex="half")}(null==n?void 0:n.headers)&&(a=Object.assign(Object.assign({},a),n.headers));const l=this._removeEmptyFolders(t),c=this._getFinalPath(l),u=yield("PUT"==e?mn:gn)(this.fetch,`${this.url}/object/${c}`,i,Object.assign({headers:a},(null==s?void 0:s.duplex)?{duplex:s.duplex}:{}));return{data:{path:l,id:u.Id,fullPath:u.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(sn(i))return{data:null,error:i};throw i}})}upload(e,t,r){return rn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,n){return rn(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),s=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${s}`);a.searchParams.set("token",t);try{let e;const t=Object.assign({upsert:xn.upsert},n),s=Object.assign(Object.assign({},this.headers),{"x-upsert":String(t.upsert)});"undefined"!=typeof Blob&&r instanceof Blob?(e=new FormData,e.append("cacheControl",t.cacheControl),e.append("",r)):"undefined"!=typeof FormData&&r instanceof FormData?(e=r,e.append("cacheControl",t.cacheControl)):(e=r,s["cache-control"]=`max-age=${t.cacheControl}`,s["content-type"]=t.contentType);return{data:{path:i,fullPath:(yield mn(this.fetch,a.toString(),e,{headers:s})).Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(sn(o))return{data:null,error:o};throw o}})}createSignedUploadUrl(e,t){return rn(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const n=Object.assign({},this.headers);(null==t?void 0:t.upsert)&&(n["x-upsert"]="true");const i=yield gn(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:n}),s=new URL(this.url+i.url),a=s.searchParams.get("token");if(!a)throw new nn("No token returned by API");return{data:{signedUrl:s.toString(),path:e,token:a},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(sn(r))return{data:null,error:r};throw r}})}update(e,t,r){return rn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return rn(this,void 0,void 0,function*(){try{return{data:yield gn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==r?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(sn(n))return{data:null,error:n};throw n}})}copy(e,t,r){return rn(this,void 0,void 0,function*(){try{return{data:{path:(yield gn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==r?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(sn(n))return{data:null,error:n};throw n}})}createSignedUrl(e,t,r){return rn(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e),i=yield gn(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:t},(null==r?void 0:r.transform)?{transform:r.transform}:{}),{headers:this.headers});const s=(null==r?void 0:r.download)?`&download=${!0===r.download?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${s}`)},{data:i,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(sn(n))return{data:null,error:n};throw n}})}createSignedUrls(e,t,r){return rn(this,void 0,void 0,function*(){try{const n=yield gn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=(null==r?void 0:r.download)?`&download=${!0===r.download?"":r.download}`:"";return{data:n.map(e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI(`${this.url}${e.signedURL}${i}`):null})),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(sn(n))return{data:null,error:n};throw n}})}download(e,t){const r=void 0!==(null==t?void 0:t.transform)?"render/image/authenticated":"object",n=this.transformOptsToQueryString((null==t?void 0:t.transform)||{}),i=n?`?${n}`:"",s=this._getFinalPath(e);return new bn(()=>pn(this.fetch,`${this.url}/${r}/${s}${i}`,{headers:this.headers,noResolveJson:!0}),this.shouldThrowOnError)}info(e){return rn(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const e=yield pn(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:cn(e),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(sn(r))return{data:null,error:r};throw r}})}exists(e){return rn(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield function(e,t,r,n){return rn(this,void 0,void 0,function*(){return fn(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(sn(r)&&r instanceof on){const e=r.originalError;if([400,404].includes(null==e?void 0:e.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){const r=this._getFinalPath(e),n=[],i=(null==t?void 0:t.download)?`download=${!0===t.download?"":t.download}`:"";""!==i&&n.push(i);const s=void 0!==(null==t?void 0:t.transform)?"render/image":"object",a=this.transformOptsToQueryString((null==t?void 0:t.transform)||{});""!==a&&n.push(a);let o=n.join("&");return""!==o&&(o=`?${o}`),{data:{publicUrl:encodeURI(`${this.url}/${s}/public/${r}${o}`)}}}remove(e){return rn(this,void 0,void 0,function*(){try{return{data:yield vn(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(sn(t))return{data:null,error:t};throw t}})}list(e,t,r){return rn(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},wn),t),{prefix:e||""});return{data:yield gn(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(sn(n))return{data:null,error:n};throw n}})}listV2(e,t){return rn(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield gn(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},t),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(sn(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return"undefined"!=typeof Buffer?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const En="2.87.1",Sn={"X-Client-Info":`storage-js/${En}`};class Tn{constructor(e,t={},r,n){this.shouldThrowOnError=!1;const i=new URL(e);if(null==n?void 0:n.useNewHostname){/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase."))}this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Sn),t),this.fetch=ln(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return rn(this,void 0,void 0,function*(){try{const t=this.listBucketOptionsToQueryString(e);return{data:yield pn(this.fetch,`${this.url}/bucket${t}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(sn(t))return{data:null,error:t};throw t}})}getBucket(e){return rn(this,void 0,void 0,function*(){try{return{data:yield pn(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(sn(t))return{data:null,error:t};throw t}})}createBucket(e){return rn(this,arguments,void 0,function*(e,t={public:!1}){try{return{data:yield gn(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(sn(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return rn(this,void 0,void 0,function*(){try{return{data:yield mn(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(sn(r))return{data:null,error:r};throw r}})}emptyBucket(e){return rn(this,void 0,void 0,function*(){try{return{data:yield gn(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(sn(t))return{data:null,error:t};throw t}})}deleteBucket(e){return rn(this,void 0,void 0,function*(){try{return{data:yield vn(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(sn(t))return{data:null,error:t};throw t}})}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}}var jn=class extends Error{constructor(e,t){super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown="CommitStateUnknownException"===t.icebergType||[500,502,504].includes(t.status)&&!0===t.icebergType?.includes("CommitState")}isNotFound(){return 404===this.status}isConflict(){return 409===this.status}isAuthenticationTimeout(){return 419===this.status}};function Pn(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:r,path:n,query:i,body:s,headers:a}){const o=function(e,t,r){const n=new URL(t,e);if(r)for(const[i,s]of Object.entries(r))void 0!==s&&n.searchParams.set(i,s);return n.toString()}(e.baseUrl,n,i),l=await async function(e){return e&&"none"!==e.type?"bearer"===e.type?{Authorization:`Bearer ${e.token}`}:"header"===e.type?{[e.name]:e.value}:"custom"===e.type?await e.getHeaders():{}:{}}(e.auth),c=await t(o,{method:r,headers:{...s?{"Content-Type":"application/json"}:{},...l,...a},body:s?JSON.stringify(s):void 0}),u=await c.text(),d=(c.headers.get("content-type")||"").includes("application/json"),h=d&&u?JSON.parse(u):u;if(!c.ok){const e=d?h:void 0,t=e?.error;throw new jn(t?.message??`Request failed with status ${c.status}`,{status:c.status,icebergType:t?.type,icebergCode:t?.code,details:e})}return{status:c.status,headers:c.headers,data:h}}}}function On(e){return e.join("")}var In=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:On(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(e=>({namespace:e}))}async createNamespace(e,t){const r={namespace:e.namespace,properties:t?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${On(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${On(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${On(e.namespace)}`}),!0}catch(t){if(t instanceof jn&&404===t.status)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(r){if(r instanceof jn&&409===r.status)return;throw r}}};function Nn(e){return e.join("")}var Cn=class{constructor(e,t="",r){this.client=e,this.prefix=t,this.accessDelegation=r}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Nn(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const r={};this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation);return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Nn(e.namespace)}/tables`,body:t,headers:r})).data.metadata}async updateTable(e,t){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Nn(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Nn(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String(t?.purge??!1)}})}async loadTable(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Nn(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Nn(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(r){if(r instanceof jn&&404===r.status)return!1;throw r}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(r){if(r instanceof jn&&409===r.status)return await this.loadTable({namespace:e.namespace,name:t.name});throw r}}},Rn=class{constructor(e){let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const r=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=Pn({baseUrl:r,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=e.accessDelegation?.join(","),this.namespaceOps=new In(this.client,t),this.tableOps=new Cn(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}};class An{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Sn),t),this.fetch=ln(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return rn(this,void 0,void 0,function*(){try{return{data:yield gn(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(sn(t))return{data:null,error:t};throw t}})}listBuckets(e){return rn(this,void 0,void 0,function*(){try{const t=new URLSearchParams;void 0!==(null==e?void 0:e.limit)&&t.set("limit",e.limit.toString()),void 0!==(null==e?void 0:e.offset)&&t.set("offset",e.offset.toString()),(null==e?void 0:e.sortColumn)&&t.set("sortColumn",e.sortColumn),(null==e?void 0:e.sortOrder)&&t.set("sortOrder",e.sortOrder),(null==e?void 0:e.search)&&t.set("search",e.search);const r=t.toString(),n=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`;return{data:yield pn(this.fetch,n,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(sn(t))return{data:null,error:t};throw t}})}deleteBucket(e){return rn(this,void 0,void 0,function*(){try{return{data:yield vn(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(sn(t))return{data:null,error:t};throw t}})}from(e){if(!(e=>!(!e||"string"!=typeof e)&&(!(0===e.length||e.length>100)&&(e.trim()===e&&(!e.includes("/")&&!e.includes("\\")&&/^[\w!.\*'() &$@=;:+,?-]+$/.test(e)))))(e))throw new nn("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const t=new Rn({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:()=>rn(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(t,{get(e,t){const n=e[t];return"function"!=typeof n?n:(...t)=>rn(this,void 0,void 0,function*(){try{return{data:yield n.apply(e,t),error:null}}catch(i){if(r)throw i;return{data:null,error:i}}})}})}}const $n={"X-Client-Info":`storage-js/${En}`,"Content-Type":"application/json"};class Ln extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Fn(e){return"object"==typeof e&&null!==e&&"__isStorageVectorsError"in e}class Mn extends Ln{constructor(e,t,r){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Dn extends Ln{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}}var Un;!function(e){e.InternalError="InternalError",e.S3VectorConflictException="S3VectorConflictException",e.S3VectorNotFoundException="S3VectorNotFoundException",e.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",e.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",e.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"}(Un||(Un={}));const zn=e=>e?(...t)=>e(...t):(...e)=>fetch(...e),Bn=e=>{if("object"!=typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)},Vn=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e);function qn(e,t,r,n,i,s){return rn(this,void 0,void 0,function*(){return new Promise((a,o)=>{e(r,((e,t,r,n)=>{const i={method:e,headers:(null==t?void 0:t.headers)||{}};return n?(Bn(n)?(i.headers=Object.assign({"Content-Type":"application/json"},null==t?void 0:t.headers),i.body=JSON.stringify(n)):i.body=n,Object.assign(Object.assign({},i),r)):i})(t,n,i,s)).then(e=>{if(!e.ok)throw e;if(null==n?void 0:n.noResolveJson)return e;const t=e.headers.get("content-type");return t&&t.includes("application/json")?e.json():{}}).then(e=>a(e)).catch(e=>((e,t,r)=>rn(void 0,void 0,void 0,function*(){if(e&&"object"==typeof e&&"status"in e&&"ok"in e&&"number"==typeof e.status&&!(null==r?void 0:r.noResolveJson)){const r=e.status||500,n=e;if("function"==typeof n.json)n.json().then(e=>{const n=(null==e?void 0:e.statusCode)||(null==e?void 0:e.code)||r+"";t(new Mn(Vn(e),r,n))}).catch(()=>{const e=r+"",i=n.statusText||`HTTP ${r} error`;t(new Mn(i,r,e))});else{const e=r+"",i=n.statusText||`HTTP ${r} error`;t(new Mn(i,r,e))}}else t(new Dn(Vn(e),e))}))(e,o,n))})})}function Hn(e,t,r,n,i){return rn(this,void 0,void 0,function*(){return qn(e,"POST",t,n,i,r)})}class Wn{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},$n),t),this.fetch=zn(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return rn(this,void 0,void 0,function*(){try{return{data:(yield Hn(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Fn(t))return{data:null,error:t};throw t}})}getIndex(e,t){return rn(this,void 0,void 0,function*(){try{return{data:yield Hn(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Fn(r))return{data:null,error:r};throw r}})}listIndexes(e){return rn(this,void 0,void 0,function*(){try{return{data:yield Hn(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Fn(t))return{data:null,error:t};throw t}})}deleteIndex(e,t){return rn(this,void 0,void 0,function*(){try{return{data:(yield Hn(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Fn(r))return{data:null,error:r};throw r}})}}class Gn{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},$n),t),this.fetch=zn(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return rn(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Hn(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Fn(t))return{data:null,error:t};throw t}})}getVectors(e){return rn(this,void 0,void 0,function*(){try{return{data:yield Hn(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Fn(t))return{data:null,error:t};throw t}})}listVectors(e){return rn(this,void 0,void 0,function*(){try{if(void 0!==e.segmentCount){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(void 0!==e.segmentIndex&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error("segmentIndex must be between 0 and "+(e.segmentCount-1))}return{data:yield Hn(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Fn(t))return{data:null,error:t};throw t}})}queryVectors(e){return rn(this,void 0,void 0,function*(){try{return{data:yield Hn(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Fn(t))return{data:null,error:t};throw t}})}deleteVectors(e){return rn(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Hn(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Fn(t))return{data:null,error:t};throw t}})}}class Kn{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},$n),t),this.fetch=zn(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return rn(this,void 0,void 0,function*(){try{return{data:(yield Hn(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Fn(t))return{data:null,error:t};throw t}})}getBucket(e){return rn(this,void 0,void 0,function*(){try{return{data:yield Hn(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Fn(t))return{data:null,error:t};throw t}})}listBuckets(){return rn(this,arguments,void 0,function*(e={}){try{return{data:yield Hn(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Fn(t))return{data:null,error:t};throw t}})}deleteBucket(e){return rn(this,void 0,void 0,function*(){try{return{data:(yield Hn(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Fn(t))return{data:null,error:t};throw t}})}}class Jn extends Kn{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new Yn(this.url,this.headers,e,this.fetch)}createBucket(e){const t=Object.create(null,{createBucket:{get:()=>super.createBucket}});return rn(this,void 0,void 0,function*(){return t.createBucket.call(this,e)})}getBucket(e){const t=Object.create(null,{getBucket:{get:()=>super.getBucket}});return rn(this,void 0,void 0,function*(){return t.getBucket.call(this,e)})}listBuckets(){const e=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return rn(this,arguments,void 0,function*(t={}){return e.listBuckets.call(this,t)})}deleteBucket(e){const t=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return rn(this,void 0,void 0,function*(){return t.deleteBucket.call(this,e)})}}class Yn extends Wn{constructor(e,t,r,n){super(e,t,n),this.vectorBucketName=r}createIndex(e){const t=Object.create(null,{createIndex:{get:()=>super.createIndex}});return rn(this,void 0,void 0,function*(){return t.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return rn(this,arguments,void 0,function*(t={}){return e.listIndexes.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const t=Object.create(null,{getIndex:{get:()=>super.getIndex}});return rn(this,void 0,void 0,function*(){return t.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const t=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return rn(this,void 0,void 0,function*(){return t.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new Qn(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class Qn extends Gn{constructor(e,t,r,n,i){super(e,t,i),this.vectorBucketName=r,this.indexName=n}putVectors(e){const t=Object.create(null,{putVectors:{get:()=>super.putVectors}});return rn(this,void 0,void 0,function*(){return t.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const t=Object.create(null,{getVectors:{get:()=>super.getVectors}});return rn(this,void 0,void 0,function*(){return t.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return rn(this,arguments,void 0,function*(t={}){return e.listVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const t=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return rn(this,void 0,void 0,function*(){return t.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const t=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return rn(this,void 0,void 0,function*(){return t.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}const Xn=n(Object.freeze(Object.defineProperty({__proto__:null,StorageAnalyticsClient:An,StorageApiError:an,StorageClient:class extends Tn{constructor(e,t={},r,n){super(e,t,r,n)}from(e){return new kn(this.url,this.headers,e,this.fetch)}get vectors(){return new Jn(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new An(this.url+"/iceberg",this.headers,this.fetch)}},StorageError:nn,StorageUnknownError:on,StorageVectorsApiError:Mn,StorageVectorsClient:Jn,StorageVectorsError:Ln,get StorageVectorsErrorCode(){return Un},StorageVectorsUnknownError:Dn,VectorBucketApi:Kn,VectorBucketScope:Yn,VectorDataApi:Gn,VectorIndexApi:Wn,VectorIndexScope:Qn,isPlainObject:Bn,isStorageError:sn,isStorageVectorsError:Fn,normalizeToFloat32:e=>Array.from(new Float32Array(e)),resolveFetch:zn,resolveResponse:()=>Response,validateVectorDimension:(e,t)=>{if(void 0!==t&&e.float32.length!==t)throw new Error(`Vector dimension mismatch: expected ${t}, got ${e.float32.length}`)}},Symbol.toStringTag,{value:"Module"})));var Zn,ei,ti={},ri={};function ni(){return Zn||(Zn=1,Object.defineProperty(ri,"__esModule",{value:!0}),ri.version=void 0,ri.version="2.87.1"),ri}function ii(){return ei||(ei=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_REALTIME_OPTIONS=e.DEFAULT_AUTH_OPTIONS=e.DEFAULT_DB_OPTIONS=e.DEFAULT_GLOBAL_OPTIONS=e.DEFAULT_HEADERS=void 0;const t=ni();let r="";r="undefined"!=typeof Deno?"deno":"undefined"!=typeof document?"web":"undefined"!=typeof navigator&&"ReactNative"===navigator.product?"react-native":"node",e.DEFAULT_HEADERS={"X-Client-Info":`supabase-js-${r}/${t.version}`},e.DEFAULT_GLOBAL_OPTIONS={headers:e.DEFAULT_HEADERS},e.DEFAULT_DB_OPTIONS={schema:"public"},e.DEFAULT_AUTH_OPTIONS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},e.DEFAULT_REALTIME_OPTIONS={}}(ti)),ti}var si,ai={};function oi(){return si||(si=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.fetchWithAuth=e.resolveHeadersConstructor=e.resolveFetch=void 0;e.resolveFetch=e=>e?(...t)=>e(...t):(...e)=>fetch(...e);e.resolveHeadersConstructor=()=>Headers;e.fetchWithAuth=(t,r,n)=>{const i=(0,e.resolveFetch)(n),s=(0,e.resolveHeadersConstructor)();return async(e,n)=>{var a;const o=null!==(a=await r())&&void 0!==a?a:t;let l=new s(null==n?void 0:n.headers);return l.has("apikey")||l.set("apikey",t),l.has("Authorization")||l.set("Authorization",`Bearer ${o}`),i(e,Object.assign(Object.assign({},n),{headers:l}))}}}(ai)),ai}var li,ci={};function ui(){if(li)return ci;function e(e){return e.endsWith("/")?e:e+"/"}li=1,Object.defineProperty(ci,"__esModule",{value:!0}),ci.isBrowser=void 0,ci.uuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})},ci.ensureTrailingSlash=e,ci.applySettingDefaults=function(e,t){var r,n;const{db:i,auth:s,realtime:a,global:o}=e,{db:l,auth:c,realtime:u,global:d}=t,h={db:Object.assign(Object.assign({},l),i),auth:Object.assign(Object.assign({},c),s),realtime:Object.assign(Object.assign({},u),a),storage:{},global:Object.assign(Object.assign(Object.assign({},d),o),{headers:Object.assign(Object.assign({},null!==(r=null==d?void 0:d.headers)&&void 0!==r?r:{}),null!==(n=null==o?void 0:o.headers)&&void 0!==n?n:{})}),accessToken:async()=>""};e.accessToken?h.accessToken=e.accessToken:delete h.accessToken;return h},ci.validateSupabaseUrl=function(t){const r=null==t?void 0:t.trim();if(!r)throw new Error("supabaseUrl is required.");if(!r.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(e(r))}catch(_n){throw Error("Invalid supabaseUrl: Provided URL is malformed.")}};return ci.isBrowser=()=>"undefined"!=typeof window,ci}var di={};function hi(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r}"function"==typeof SuppressedError&&SuppressedError;const fi="2.87.1",pi=3e4,gi=9e4,mi={"X-Client-Info":`gotrue-js/${fi}`},vi="X-Supabase-Api-Version",yi={timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"},_i=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;let bi=class extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}};function wi(e){return"object"==typeof e&&null!==e&&"__isAuthError"in e}let xi=class extends bi{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}};function ki(e){return wi(e)&&"AuthApiError"===e.name}let Ei=class extends bi{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}},Si=class extends bi{constructor(e,t,r,n){super(e,r,n),this.name=t,this.status=r}},Ti=class extends Si{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}};function ji(e){return wi(e)&&"AuthSessionMissingError"===e.name}let Pi=class extends Si{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}},Oi=class extends Si{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}},Ii=class extends Si{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}};function Ni(e){return wi(e)&&"AuthImplicitGrantRedirectError"===e.name}let Ci=class extends Si{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},Ri=class extends Si{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}};function Ai(e){return wi(e)&&"AuthRetryableFetchError"===e.name}let $i=class extends Si{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}};let Li=class extends Si{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}};const Fi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Mi=" \t\n\r=".split(""),Di=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Mi.length;t+=1)e[Mi[t].charCodeAt(0)]=-2;for(let t=0;t<Fi.length;t+=1)e[Fi[t].charCodeAt(0)]=t;return e})();function Ui(e,t,r){if(null!==e)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;r(Fi[e]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;r(Fi[e]),t.queuedBits-=6}}function zi(e,t,r){const n=Di[e];if(!(n>-1)){if(-2===n)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8}function Bi(e){const t=[],r=e=>{t.push(String.fromCodePoint(e))},n={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=e=>{!function(e,t,r){if(0===t.utf8seq){if(e<=127)return void r(e);for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(2===t.utf8seq)t.codepoint=31&e;else if(3===t.utf8seq)t.codepoint=15&e;else{if(4!==t.utf8seq)throw new Error("Invalid UTF-8 sequence");t.codepoint=7&e}t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|63&e,t.utf8seq-=1,0===t.utf8seq&&r(t.codepoint)}}(e,n,r)};for(let a=0;a<e.length;a+=1)zi(e.charCodeAt(a),i,s);return t.join("")}function Vi(e,t){if(!(e<=127)){if(e<=2047)return t(192|e>>6),void t(128|63&e);if(e<=65535)return t(224|e>>12),t(128|e>>6&63),void t(128|63&e);if(e<=1114111)return t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),void t(128|63&e);throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}t(e)}function qi(e){const t=[],r={queue:0,queuedBits:0},n=e=>{t.push(e)};for(let i=0;i<e.length;i+=1)zi(e.charCodeAt(i),r,n);return new Uint8Array(t)}function Hi(e){const t=[];return function(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const t=1024*(n-55296)&65535;n=65536+(e.charCodeAt(r+1)-56320&65535|t),r+=1}Vi(n,t)}}(e,e=>t.push(e)),new Uint8Array(t)}function Wi(e){const t=[],r={queue:0,queuedBits:0},n=e=>{t.push(e)};return e.forEach(e=>Ui(e,r,n)),Ui(null,r,n),t.join("")}const Gi=()=>"undefined"!=typeof window&&"undefined"!=typeof document,Ki={tested:!1,writable:!1},Ji=()=>{if(!Gi())return!1;try{if("object"!=typeof globalThis.localStorage)return!1}catch(xo){return!1}if(Ki.tested)return Ki.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Ki.tested=!0,Ki.writable=!0}catch(xo){Ki.tested=!0,Ki.writable=!1}return Ki.writable};const Yi=e=>e?(...t)=>e(...t):(...e)=>fetch(...e),Qi=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Xi=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch(_n){return r}},Zi=async(e,t)=>{await e.removeItem(t)};class es{constructor(){this.promise=new es.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}function ts(e){const t=e.split(".");if(3!==t.length)throw new Li("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!_i.test(t[r]))throw new Li("JWT not in base64url format");return{header:JSON.parse(Bi(t[0])),payload:JSON.parse(Bi(t[1])),signature:qi(t[2]),raw:{header:t[0],payload:t[1]}}}function rs(e){return("0"+e.toString(16)).substr(-2)}async function ns(e){if(!("undefined"!=typeof crypto&&void 0!==crypto.subtle&&"undefined"!=typeof TextEncoder))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const t=await async function(e){const t=(new TextEncoder).encode(e),r=await crypto.subtle.digest("SHA-256",t),n=new Uint8Array(r);return Array.from(n).map(e=>String.fromCharCode(e)).join("")}(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function is(e,t,r=!1){const n=function(){const e=new Uint32Array(56);if("undefined"==typeof crypto){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length;let r="";for(let n=0;n<56;n++)r+=e.charAt(Math.floor(Math.random()*t));return r}return crypto.getRandomValues(e),Array.from(e,rs).join("")}();let i=n;r&&(i+="/PASSWORD_RECOVERY"),await Qi(e,`${t}-code-verifier`,i);const s=await ns(n);return[s,n===s?"plain":"s256"]}es.promiseConstructor=Promise;const ss=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;const as=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function os(e){if(!as.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function ls(){return new Proxy({},{get:(e,t)=>{if("__isUserNotAvailableProxy"===t)return!0;if("symbol"==typeof t){const e=t.toString();if("Symbol(Symbol.toPrimitive)"===e||"Symbol(Symbol.toStringTag)"===e||"Symbol(util.inspect.custom)"===e)return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function cs(e){return JSON.parse(JSON.stringify(e))}const us=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),ds=[502,503,504];async function hs(e){var t,r;if(!("object"==typeof(r=e)&&null!==r&&"status"in r&&"ok"in r&&"json"in r&&"function"==typeof r.json))throw new Ri(us(e),0);if(ds.includes(e.status))throw new Ri(us(e),e.status);let n,i;try{n=await e.json()}catch(xo){throw new Ei(us(xo),xo)}const s=function(e){const t=e.headers.get(vi);if(!t)return null;if(!t.match(ss))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch(xo){return null}}(e);if(s&&s.getTime()>=yi.timestamp&&"object"==typeof n&&n&&"string"==typeof n.code?i=n.code:"object"==typeof n&&n&&"string"==typeof n.error_code&&(i=n.error_code),i){if("weak_password"===i)throw new $i(us(n),e.status,(null===(t=n.weak_password)||void 0===t?void 0:t.reasons)||[]);if("session_not_found"===i)throw new Ti}else if("object"==typeof n&&n&&"object"==typeof n.weak_password&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((e,t)=>e&&"string"==typeof t,!0))throw new $i(us(n),e.status,n.weak_password.reasons);throw new xi(us(n),e.status||500,i)}async function fs(e,t,r,n){var i;const s=Object.assign({},null==n?void 0:n.headers);s[vi]||(s[vi]=yi.name),(null==n?void 0:n.jwt)&&(s.Authorization=`Bearer ${n.jwt}`);const a=null!==(i=null==n?void 0:n.query)&&void 0!==i?i:{};(null==n?void 0:n.redirectTo)&&(a.redirect_to=n.redirectTo);const o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",l=await async function(e,t,r,n,i,s){const a=((e,t,r,n)=>{const i={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"===e?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null==t?void 0:t.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),r))})(t,n,i,s);let o;try{o=await e(r,Object.assign({},a))}catch(xo){throw console.error(xo),new Ri(us(xo),0)}o.ok||await hs(o);if(null==n?void 0:n.noResolveJson)return o;try{return await o.json()}catch(xo){await hs(xo)}}(e,t,r+o,{headers:s,noResolveJson:null==n?void 0:n.noResolveJson},{},null==n?void 0:n.body);return(null==n?void 0:n.xform)?null==n?void 0:n.xform(l):{data:Object.assign({},l),error:null}}function ps(e){var t;let r=null;var n;(function(e){return e.access_token&&e.refresh_token&&e.expires_in})(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=(n=e.expires_in,Math.round(Date.now()/1e3)+n)));return{data:{session:r,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function gs(e){const t=ps(e);return!t.error&&e.weak_password&&"object"==typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"==typeof e.weak_password.message&&e.weak_password.reasons.reduce((e,t)=>e&&"string"==typeof t,!0)&&(t.data.weak_password=e.weak_password),t}function ms(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function vs(e){return{data:e,error:null}}function ys(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:i,verification_type:s}=e,a=hi(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:r,hashed_token:n,redirect_to:i,verification_type:s},user:Object.assign({},a)},error:null}}function _s(e){return e}const bs=["global","local","others"];let ws=class{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=Yi(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,t=bs[0]){if(bs.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${bs.join(", ")}`);try{return await fs(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(wi(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await fs(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:ms})}catch(r){if(wi(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=hi(e,["options"]),n=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(n.new_email=null==r?void 0:r.newEmail,delete n.newEmail),await fs(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:ys,redirectTo:null==t?void 0:t.redirectTo})}catch(t){if(wi(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await fs(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:ms})}catch(t){if(wi(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,n,i,s,a,o;try{const l={nextPage:null,lastPage:0,total:0},c=await fs(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:null!==(r=null===(t=null==e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==r?r:"",per_page:null!==(i=null===(n=null==e?void 0:e.perPage)||void 0===n?void 0:n.toString())&&void 0!==i?i:""},xform:_s});if(c.error)throw c.error;const u=await c.json(),d=null!==(s=c.headers.get("x-total-count"))&&void 0!==s?s:0,h=null!==(o=null===(a=c.headers.get("link"))||void 0===a?void 0:a.split(","))&&void 0!==o?o:[];return h.length>0&&(h.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),r=JSON.parse(e.split(";")[1].split("=")[1]);l[`${r}Page`]=t}),l.total=parseInt(d)),{data:Object.assign(Object.assign({},u),l),error:null}}catch(l){if(wi(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){os(e);try{return await fs(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ms})}catch(t){if(wi(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){os(e);try{return await fs(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:ms})}catch(r){if(wi(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){os(e);try{return await fs(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:ms})}catch(r){if(wi(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){os(e.userId);try{const{data:t,error:r}=await fs(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:r}}catch(t){if(wi(t))return{data:null,error:t};throw t}}async _deleteFactor(e){os(e.userId),os(e.id);try{return{data:await fs(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(wi(t))return{data:null,error:t};throw t}}async _listOAuthClients(e){var t,r,n,i,s,a,o;try{const l={nextPage:null,lastPage:0,total:0},c=await fs(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:null!==(r=null===(t=null==e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==r?r:"",per_page:null!==(i=null===(n=null==e?void 0:e.perPage)||void 0===n?void 0:n.toString())&&void 0!==i?i:""},xform:_s});if(c.error)throw c.error;const u=await c.json(),d=null!==(s=c.headers.get("x-total-count"))&&void 0!==s?s:0,h=null!==(o=null===(a=c.headers.get("link"))||void 0===a?void 0:a.split(","))&&void 0!==o?o:[];return h.length>0&&(h.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),r=JSON.parse(e.split(";")[1].split("=")[1]);l[`${r}Page`]=t}),l.total=parseInt(d)),{data:Object.assign(Object.assign({},u),l),error:null}}catch(l){if(wi(l))return{data:{clients:[]},error:l};throw l}}async _createOAuthClient(e){try{return await fs(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:e=>({data:e,error:null})})}catch(t){if(wi(t))return{data:null,error:t};throw t}}async _getOAuthClient(e){try{return await fs(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:e=>({data:e,error:null})})}catch(t){if(wi(t))return{data:null,error:t};throw t}}async _updateOAuthClient(e,t){try{return await fs(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:t,headers:this.headers,xform:e=>({data:e,error:null})})}catch(r){if(wi(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await fs(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(t){if(wi(t))return{data:null,error:t};throw t}}async _regenerateOAuthClientSecret(e){try{return await fs(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:e=>({data:e,error:null})})}catch(t){if(wi(t))return{data:null,error:t};throw t}}};function xs(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const ks={debug:!!(globalThis&&Ji()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"))};class Es extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}let Ss=class extends Es{};class Ts extends Es{}async function js(e,t,r){ks.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),ks.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async n=>{if(!n){if(0===t)throw ks.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Ss(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(ks.debug)try{const e=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(e,null,"  "))}catch(xo){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",xo)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}ks.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,n.name);try{return await r()}finally{ks.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,n.name)}}))}const Ps={};function Os(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function Is(e){const t=(new TextEncoder).encode(e);return"0x"+Array.from(t,e=>e.toString(16).padStart(2,"0")).join("")}class Ns extends Error{constructor({message:e,code:t,cause:r,name:n}){var i;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=null!==(i=null!=n?n:r instanceof Error?r.name:void 0)&&void 0!==i?i:"Unknown Error",this.code=t}}class Cs extends Ns{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}function Rs({error:e,options:t}){var r,n,i;const{publicKey:s}=t;if(!s)throw Error("options was missing required publicKey property");if("AbortError"===e.name){if(t.signal instanceof AbortSignal)return new Ns({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if("ConstraintError"===e.name){if(!0===(null===(r=s.authenticatorSelection)||void 0===r?void 0:r.requireResidentKey))return new Ns({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if("conditional"===t.mediation&&"required"===(null===(n=s.authenticatorSelection)||void 0===n?void 0:n.userVerification))return new Ns({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if("required"===(null===(i=s.authenticatorSelection)||void 0===i?void 0:i.userVerification))return new Ns({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if("InvalidStateError"===e.name)return new Ns({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if("NotAllowedError"===e.name)return new Ns({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if("NotSupportedError"===e.name){return 0===s.pubKeyCredParams.filter(e=>"public-key"===e.type).length?new Ns({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new Ns({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e})}if("SecurityError"===e.name){const t=window.location.hostname;if(!Us(t))return new Ns({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e});if(s.rp.id!==t)return new Ns({message:`The RP ID "${s.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else if("TypeError"===e.name){if(s.user.id.byteLength<1||s.user.id.byteLength>64)return new Ns({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if("UnknownError"===e.name)return new Ns({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Ns({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function As({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if("AbortError"===e.name){if(t.signal instanceof AbortSignal)return new Ns({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if("NotAllowedError"===e.name)return new Ns({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if("SecurityError"===e.name){const t=window.location.hostname;if(!Us(t))return new Ns({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e});if(r.rpId!==t)return new Ns({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else if("UnknownError"===e.name)return new Ns({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Ns({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}const $s=new class{createNewAbortSignal(){if(this.controller){const e=new Error("Cancelling existing WebAuthn API call for new one");e.name="AbortError",this.controller.abort(e)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}};function Ls(e){if(!e)throw new Error("Credential creation options are required");if("undefined"!=typeof PublicKeyCredential&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&"function"==typeof PublicKeyCredential.parseCreationOptionsFromJSON)return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,i=hi(e,["challenge","user","excludeCredentials"]),s=qi(t).buffer,a=Object.assign(Object.assign({},r),{id:qi(r.id).buffer}),o=Object.assign(Object.assign({},i),{challenge:s,user:a});if(n&&n.length>0){o.excludeCredentials=new Array(n.length);for(let e=0;e<n.length;e++){const t=n[e];o.excludeCredentials[e]=Object.assign(Object.assign({},t),{id:qi(t.id).buffer,type:t.type||"public-key",transports:t.transports})}}return o}function Fs(e){if(!e)throw new Error("Credential request options are required");if("undefined"!=typeof PublicKeyCredential&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&"function"==typeof PublicKeyCredential.parseRequestOptionsFromJSON)return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=hi(e,["challenge","allowCredentials"]),i=qi(t).buffer,s=Object.assign(Object.assign({},n),{challenge:i});if(r&&r.length>0){s.allowCredentials=new Array(r.length);for(let e=0;e<r.length;e++){const t=r[e];s.allowCredentials[e]=Object.assign(Object.assign({},t),{id:qi(t.id).buffer,type:t.type||"public-key",transports:t.transports})}}return s}function Ms(e){var t;if("toJSON"in e&&"function"==typeof e.toJSON)return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:Wi(new Uint8Array(e.response.attestationObject)),clientDataJSON:Wi(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:null!==(t=r.authenticatorAttachment)&&void 0!==t?t:void 0}}function Ds(e){var t;if("toJSON"in e&&"function"==typeof e.toJSON)return e.toJSON();const r=e,n=e.getClientExtensionResults(),i=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Wi(new Uint8Array(i.authenticatorData)),clientDataJSON:Wi(new Uint8Array(i.clientDataJSON)),signature:Wi(new Uint8Array(i.signature)),userHandle:i.userHandle?Wi(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:null!==(t=r.authenticatorAttachment)&&void 0!==t?t:void 0}}function Us(e){return"localhost"===e||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function zs(){var e,t;return!!(Gi()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&"function"==typeof(null===(e=null===navigator||void 0===navigator?void 0:navigator.credentials)||void 0===e?void 0:e.create)&&"function"==typeof(null===(t=null===navigator||void 0===navigator?void 0:navigator.credentials)||void 0===t?void 0:t.get))}const Bs={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Vs={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function qs(...e){const t=e=>null!==e&&"object"==typeof e&&!Array.isArray(e),r=e=>e instanceof ArrayBuffer||ArrayBuffer.isView(e),n={};for(const i of e)if(i)for(const e in i){const s=i[e];if(void 0!==s)if(Array.isArray(s))n[e]=s;else if(r(s))n[e]=s;else if(t(s)){const r=n[e];t(r)?n[e]=qs(r,s):n[e]=qs(s)}else n[e]=s}return n}class Hs{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:t,friendlyName:r,signal:n},i){try{const{data:s,error:a}=await this.client.mfa.challenge({factorId:e,webauthn:t});if(!s)return{data:null,error:a};const o=null!=n?n:$s.createNewAbortSignal();if("create"===s.webauthn.type){const{user:e}=s.webauthn.credential_options.publicKey;e.name||(e.name=`${e.id}:${r}`),e.displayName||(e.displayName=e.name)}switch(s.webauthn.type){case"create":{const t=function(e,t){return qs(Bs,e,t||{})}(s.webauthn.credential_options.publicKey,null==i?void 0:i.create),{data:r,error:n}=await async function(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Cs("Browser returned unexpected credential type",t)}:{data:null,error:new Cs("Empty credential response",t)}}catch(t){return{data:null,error:Rs({error:t,options:e})}}}({publicKey:t,signal:o});return r?{data:{factorId:e,challengeId:s.id,webauthn:{type:s.webauthn.type,credential_response:r}},error:null}:{data:null,error:n}}case"request":{const t=function(e,t){return qs(Vs,e,t||{})}(s.webauthn.credential_options.publicKey,null==i?void 0:i.request),{data:r,error:n}=await async function(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Cs("Browser returned unexpected credential type",t)}:{data:null,error:new Cs("Empty credential response",t)}}catch(t){return{data:null,error:As({error:t,options:e})}}}(Object.assign(Object.assign({},s.webauthn.credential_options),{publicKey:t,signal:o}));return r?{data:{factorId:e,challengeId:s.id,webauthn:{type:s.webauthn.type,credential_response:r}},error:null}:{data:null,error:n}}}}catch(s){return wi(s)?{data:null,error:s}:{data:null,error:new Ei("Unexpected error in challenge",s)}}}async _verify({challengeId:e,factorId:t,webauthn:r}){return this.client.mfa.verify({factorId:t,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:t=("undefined"!=typeof window?window.location.hostname:void 0),rpOrigins:r=("undefined"!=typeof window?[window.location.origin]:void 0),signal:n}={}},i){if(!t)return{data:null,error:new bi("rpId is required for WebAuthn authentication")};try{if(!zs())return{data:null,error:new Ei("Browser does not support WebAuthn",null)};const{data:s,error:a}=await this.challenge({factorId:e,webauthn:{rpId:t,rpOrigins:r},signal:n},{request:i});if(!s)return{data:null,error:a};const{webauthn:o}=s;return this._verify({factorId:e,challengeId:s.challengeId,webauthn:{type:o.type,rpId:t,rpOrigins:r,credential_response:o.credential_response}})}catch(s){return wi(s)?{data:null,error:s}:{data:null,error:new Ei("Unexpected error in authenticate",s)}}}async _register({friendlyName:e,webauthn:{rpId:t=("undefined"!=typeof window?window.location.hostname:void 0),rpOrigins:r=("undefined"!=typeof window?[window.location.origin]:void 0),signal:n}={}},i){if(!t)return{data:null,error:new bi("rpId is required for WebAuthn registration")};try{if(!zs())return{data:null,error:new Ei("Browser does not support WebAuthn",null)};const{data:s,error:a}=await this._enroll({friendlyName:e});if(!s)return await this.client.mfa.listFactors().then(t=>{var r;return null===(r=t.data)||void 0===r?void 0:r.all.find(t=>"webauthn"===t.factor_type&&t.friendly_name===e&&"unverified"!==t.status)}).then(e=>e?this.client.mfa.unenroll({factorId:null==e?void 0:e.id}):void 0),{data:null,error:a};const{data:o,error:l}=await this._challenge({factorId:s.id,friendlyName:s.friendly_name,webauthn:{rpId:t,rpOrigins:r},signal:n},{create:i});return o?this._verify({factorId:s.id,challengeId:o.challengeId,webauthn:{rpId:t,rpOrigins:r,type:o.webauthn.type,credential_response:o.webauthn.credential_response}}):{data:null,error:l}}catch(s){return wi(s)?{data:null,error:s}:{data:null,error:new Ei("Unexpected error in register",s)}}}}!function(){if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(xo){"undefined"!=typeof self&&(self.globalThis=self)}}();const Ws={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:mi,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function Gs(e,t,r){return await r()}const Ks={};let Js=class e{get jwks(){var e,t;return null!==(t=null===(e=Ks[this.storageKey])||void 0===e?void 0:e.jwks)&&void 0!==t?t:{keys:[]}}set jwks(e){Ks[this.storageKey]=Object.assign(Object.assign({},Ks[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return null!==(t=null===(e=Ks[this.storageKey])||void 0===e?void 0:e.cachedAt)&&void 0!==t?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Ks[this.storageKey]=Object.assign(Object.assign({},Ks[this.storageKey]),{cachedAt:e})}constructor(t){var r,n,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const s=Object.assign(Object.assign({},Ws),t);if(this.storageKey=s.storageKey,this.instanceID=null!==(r=e.nextInstanceID[this.storageKey])&&void 0!==r?r:0,e.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!s.debug,"function"==typeof s.debug&&(this.logger=s.debug),this.instanceID>0&&Gi()){const e=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(e),this.logDebugMessages&&console.trace(e)}if(this.persistSession=s.persistSession,this.autoRefreshToken=s.autoRefreshToken,this.admin=new ws({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=Yi(s.fetch),this.lock=s.lock||Gs,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,this.throwOnError=s.throwOnError,s.lock?this.lock=s.lock:this.persistSession&&Gi()&&(null===(n=null===globalThis||void 0===globalThis?void 0:globalThis.navigator)||void 0===n?void 0:n.locks)?this.lock=js:this.lock=Gs,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Hs(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:Ji()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=xs(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=xs(this.memoryStorage)),Gi()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(xo){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",xo)}null===(i=this.broadcastChannel)||void 0===i||i.addEventListener("message",async e=>{this._debug("received broadcast notification from other tab or client",e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${fi}) ${(new Date).toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))()),await this.initializePromise}async _initialize(){var e;try{let t={},r="none";if(Gi()&&(t=function(e){const t={},r=new URL(e);if(r.hash&&"#"===r.hash[0])try{new URLSearchParams(r.hash.substring(1)).forEach((e,r)=>{t[r]=e})}catch(xo){}return r.searchParams.forEach((e,r)=>{t[r]=e}),t}(window.location.href),this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce")),Gi()&&this.detectSessionInUrl&&"none"!==r){const{data:n,error:i}=await this._getSessionFromURL(t,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),Ni(i)){const t=null===(e=i.details)||void 0===e?void 0:e.code;if("identity_already_exists"===t||"identity_not_found"===t||"single_identity_not_deletable"===t)return{error:i}}return await this._removeSession(),{error:i}}const{session:s,redirectType:a}=n;return this._debug("#_initialize()","detected session in URL",s,"redirect type",a),await this._saveSession(s),setTimeout(async()=>{"recovery"===a?await this._notifyAllSubscribers("PASSWORD_RECOVERY",s):await this._notifyAllSubscribers("SIGNED_IN",s)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return wi(t)?this._returnResult({error:t}):this._returnResult({error:new Ei("Unexpected error during initialization",t)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,n;try{const i=await fs(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:null!==(r=null===(t=null==e?void 0:e.options)||void 0===t?void 0:t.data)&&void 0!==r?r:{},gotrue_meta_security:{captcha_token:null===(n=null==e?void 0:e.options)||void 0===n?void 0:n.captchaToken}},xform:ps}),{data:s,error:a}=i;if(a||!s)return this._returnResult({data:{user:null,session:null},error:a});const o=s.session,l=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",o)),this._returnResult({data:{user:l,session:o},error:null})}catch(i){if(wi(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(e){var t,r,n;try{let i;if("email"in e){const{email:r,password:n,options:s}=e;let a=null,o=null;"pkce"===this.flowType&&([a,o]=await is(this.storage,this.storageKey)),i=await fs(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:null==s?void 0:s.emailRedirectTo,body:{email:r,password:n,data:null!==(t=null==s?void 0:s.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken},code_challenge:a,code_challenge_method:o},xform:ps})}else{if(!("phone"in e))throw new Oi("You must provide either an email or phone number and a password");{const{phone:t,password:s,options:a}=e;i=await fs(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:t,password:s,data:null!==(r=null==a?void 0:a.data)&&void 0!==r?r:{},channel:null!==(n=null==a?void 0:a.channel)&&void 0!==n?n:"sms",gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken}},xform:ps})}}const{data:s,error:a}=i;if(a||!s)return await Zi(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:a});const o=s.session,l=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",o)),this._returnResult({data:{user:l,session:o},error:null})}catch(i){if(await Zi(this.storage,`${this.storageKey}-code-verifier`),wi(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(e){try{let t;if("email"in e){const{email:r,password:n,options:i}=e;t=await fs(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:r,password:n,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}},xform:gs})}else{if(!("phone"in e))throw new Oi("You must provide either an email or phone number and a password");{const{phone:r,password:n,options:i}=e;t=await fs(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:r,password:n,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}},xform:gs})}}const{data:r,error:n}=t;if(n)return this._returnResult({data:{user:null,session:null},error:n});if(!r||!r.session||!r.user){const e=new Pi;return this._returnResult({data:{user:null,session:null},error:e})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:n})}catch(t){if(wi(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOAuth(e){var t,r,n,i;return await this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(r=e.options)||void 0===r?void 0:r.scopes,queryParams:null===(n=e.options)||void 0===n?void 0:n.queryParams,skipBrowserRedirect:null===(i=e.options)||void 0===i?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(e){var t,r,n,i,s,a,o,l,c,u,d;let h,f;if("message"in e)h=e.message,f=e.signature;else{const{chain:u,wallet:d,statement:p,options:g}=e;let m;if(Gi())if("object"==typeof d)m=d;else{const e=window;if(!("ethereum"in e)||"object"!=typeof e.ethereum||!("request"in e.ethereum)||"function"!=typeof e.ethereum.request)throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.");m=e.ethereum}else{if("object"!=typeof d||!(null==g?void 0:g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");m=d}const v=new URL(null!==(t=null==g?void 0:g.url)&&void 0!==t?t:window.location.href),y=await m.request({method:"eth_requestAccounts"}).then(e=>e).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!y||0===y.length)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const _=Os(y[0]);let b=null===(r=null==g?void 0:g.signInWithEthereum)||void 0===r?void 0:r.chainId;if(!b){const e=await m.request({method:"eth_chainId"});b=parseInt(e,16)}h=function(e){var t;const{chainId:r,domain:n,expirationTime:i,issuedAt:s=new Date,nonce:a,notBefore:o,requestId:l,resources:c,scheme:u,uri:d,version:h}=e;if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(a&&a.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${a}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if("1"!==h)throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${h}`);if(null===(t=e.statement)||void 0===t?void 0:t.includes("\n"))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`);const f=`${u?`${u}://${n}`:n} wants you to sign in with your Ethereum account:\n${Os(e.address)}\n\n${e.statement?`${e.statement}\n`:""}`;let p=`URI: ${d}\nVersion: ${h}\nChain ID: ${r}${a?`\nNonce: ${a}`:""}\nIssued At: ${s.toISOString()}`;if(i&&(p+=`\nExpiration Time: ${i.toISOString()}`),o&&(p+=`\nNot Before: ${o.toISOString()}`),l&&(p+=`\nRequest ID: ${l}`),c){let e="\nResources:";for(const t of c){if(!t||"string"!=typeof t)throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${t}`);e+=`\n- ${t}`}p+=e}return`${f}\n${p}`}({domain:v.host,address:_,statement:p,uri:v.href,version:"1",chainId:b,nonce:null===(n=null==g?void 0:g.signInWithEthereum)||void 0===n?void 0:n.nonce,issuedAt:null!==(s=null===(i=null==g?void 0:g.signInWithEthereum)||void 0===i?void 0:i.issuedAt)&&void 0!==s?s:new Date,expirationTime:null===(a=null==g?void 0:g.signInWithEthereum)||void 0===a?void 0:a.expirationTime,notBefore:null===(o=null==g?void 0:g.signInWithEthereum)||void 0===o?void 0:o.notBefore,requestId:null===(l=null==g?void 0:g.signInWithEthereum)||void 0===l?void 0:l.requestId,resources:null===(c=null==g?void 0:g.signInWithEthereum)||void 0===c?void 0:c.resources}),f=await m.request({method:"personal_sign",params:[Is(h),_]})}try{const{data:t,error:r}=await fs(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:h,signature:f},(null===(u=e.options)||void 0===u?void 0:u.captchaToken)?{gotrue_meta_security:{captcha_token:null===(d=e.options)||void 0===d?void 0:d.captchaToken}}:null),xform:ps});if(r)throw r;if(!t||!t.session||!t.user){const e=new Pi;return this._returnResult({data:{user:null,session:null},error:e})}return t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),this._returnResult({data:Object.assign({},t),error:r})}catch(p){if(wi(p))return this._returnResult({data:{user:null,session:null},error:p});throw p}}async signInWithSolana(e){var t,r,n,i,s,a,o,l,c,u,d,h;let f,p;if("message"in e)f=e.message,p=e.signature;else{const{chain:d,wallet:h,statement:g,options:m}=e;let v;if(Gi())if("object"==typeof h)v=h;else{const e=window;if(!("solana"in e)||"object"!=typeof e.solana||!("signIn"in e.solana&&"function"==typeof e.solana.signIn||"signMessage"in e.solana&&"function"==typeof e.solana.signMessage))throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.");v=e.solana}else{if("object"!=typeof h||!(null==m?void 0:m.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");v=h}const y=new URL(null!==(t=null==m?void 0:m.url)&&void 0!==t?t:window.location.href);if("signIn"in v&&v.signIn){const e=await v.signIn(Object.assign(Object.assign(Object.assign({issuedAt:(new Date).toISOString()},null==m?void 0:m.signInWithSolana),{version:"1",domain:y.host,uri:y.href}),g?{statement:g}:null));let t;if(Array.isArray(e)&&e[0]&&"object"==typeof e[0])t=e[0];else{if(!(e&&"object"==typeof e&&"signedMessage"in e&&"signature"in e))throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");t=e}if(!("signedMessage"in t&&"signature"in t&&("string"==typeof t.signedMessage||t.signedMessage instanceof Uint8Array)&&t.signature instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields");f="string"==typeof t.signedMessage?t.signedMessage:(new TextDecoder).decode(t.signedMessage),p=t.signature}else{if(!("signMessage"in v&&"function"==typeof v.signMessage&&"publicKey"in v&&"object"==typeof v&&v.publicKey&&"toBase58"in v.publicKey&&"function"==typeof v.publicKey.toBase58))throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");f=[`${y.host} wants you to sign in with your Solana account:`,v.publicKey.toBase58(),...g?["",g,""]:[""],"Version: 1",`URI: ${y.href}`,`Issued At: ${null!==(n=null===(r=null==m?void 0:m.signInWithSolana)||void 0===r?void 0:r.issuedAt)&&void 0!==n?n:(new Date).toISOString()}`,...(null===(i=null==m?void 0:m.signInWithSolana)||void 0===i?void 0:i.notBefore)?[`Not Before: ${m.signInWithSolana.notBefore}`]:[],...(null===(s=null==m?void 0:m.signInWithSolana)||void 0===s?void 0:s.expirationTime)?[`Expiration Time: ${m.signInWithSolana.expirationTime}`]:[],...(null===(a=null==m?void 0:m.signInWithSolana)||void 0===a?void 0:a.chainId)?[`Chain ID: ${m.signInWithSolana.chainId}`]:[],...(null===(o=null==m?void 0:m.signInWithSolana)||void 0===o?void 0:o.nonce)?[`Nonce: ${m.signInWithSolana.nonce}`]:[],...(null===(l=null==m?void 0:m.signInWithSolana)||void 0===l?void 0:l.requestId)?[`Request ID: ${m.signInWithSolana.requestId}`]:[],...(null===(u=null===(c=null==m?void 0:m.signInWithSolana)||void 0===c?void 0:c.resources)||void 0===u?void 0:u.length)?["Resources",...m.signInWithSolana.resources.map(e=>`- ${e}`)]:[]].join("\n");const e=await v.signMessage((new TextEncoder).encode(f),"utf8");if(!(e&&e instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");p=e}}try{const{data:t,error:r}=await fs(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:f,signature:Wi(p)},(null===(d=e.options)||void 0===d?void 0:d.captchaToken)?{gotrue_meta_security:{captcha_token:null===(h=e.options)||void 0===h?void 0:h.captchaToken}}:null),xform:ps});if(r)throw r;if(!t||!t.session||!t.user){const e=new Pi;return this._returnResult({data:{user:null,session:null},error:e})}return t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),this._returnResult({data:Object.assign({},t),error:r})}catch(g){if(wi(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}}async _exchangeCodeForSession(e){const t=await Xi(this.storage,`${this.storageKey}-code-verifier`),[r,n]=(null!=t?t:"").split("/");try{const{data:t,error:i}=await fs(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:ps});if(await Zi(this.storage,`${this.storageKey}-code-verifier`),i)throw i;if(!t||!t.session||!t.user){const e=new Pi;return this._returnResult({data:{user:null,session:null,redirectType:null},error:e})}return t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),this._returnResult({data:Object.assign(Object.assign({},t),{redirectType:null!=n?n:null}),error:i})}catch(i){if(await Zi(this.storage,`${this.storageKey}-code-verifier`),wi(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(e){try{const{options:t,provider:r,token:n,access_token:i,nonce:s}=e,a=await fs(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:n,access_token:i,nonce:s,gotrue_meta_security:{captcha_token:null==t?void 0:t.captchaToken}},xform:ps}),{data:o,error:l}=a;if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!o||!o.session||!o.user){const e=new Pi;return this._returnResult({data:{user:null,session:null},error:e})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:o,error:l})}catch(t){if(wi(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOtp(e){var t,r,n,i,s;try{if("email"in e){const{email:n,options:i}=e;let s=null,a=null;"pkce"===this.flowType&&([s,a]=await is(this.storage,this.storageKey));const{error:o}=await fs(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:n,data:null!==(t=null==i?void 0:i.data)&&void 0!==t?t:{},create_user:null===(r=null==i?void 0:i.shouldCreateUser)||void 0===r||r,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken},code_challenge:s,code_challenge_method:a},redirectTo:null==i?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}if("phone"in e){const{phone:t,options:r}=e,{data:a,error:o}=await fs(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:t,data:null!==(n=null==r?void 0:r.data)&&void 0!==n?n:{},create_user:null===(i=null==r?void 0:r.shouldCreateUser)||void 0===i||i,gotrue_meta_security:{captcha_token:null==r?void 0:r.captchaToken},channel:null!==(s=null==r?void 0:r.channel)&&void 0!==s?s:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:null==a?void 0:a.message_id},error:o})}throw new Oi("You must provide either an email or phone number.")}catch(a){if(await Zi(this.storage,`${this.storageKey}-code-verifier`),wi(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async verifyOtp(e){var t,r;try{let n,i;"options"in e&&(n=null===(t=e.options)||void 0===t?void 0:t.redirectTo,i=null===(r=e.options)||void 0===r?void 0:r.captchaToken);const{data:s,error:a}=await fs(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:n,xform:ps});if(a)throw a;if(!s){throw new Error("An error occurred on token verification.")}const o=s.session,l=s.user;return(null==o?void 0:o.access_token)&&(await this._saveSession(o),await this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",o)),this._returnResult({data:{user:l,session:o},error:null})}catch(n){if(wi(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithSSO(e){var t,r,n,i,s;try{let a=null,o=null;"pkce"===this.flowType&&([a,o]=await is(this.storage,this.storageKey));const l=await fs(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(r=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==r?r:void 0}),(null===(n=null==e?void 0:e.options)||void 0===n?void 0:n.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:o}),headers:this.headers,xform:vs});return(null===(i=l.data)||void 0===i?void 0:i.url)&&Gi()&&!(null===(s=e.options)||void 0===s?void 0:s.skipBrowserRedirect)&&window.location.assign(l.data.url),this._returnResult(l)}catch(a){if(await Zi(this.storage,`${this.storageKey}-code-verifier`),wi(a))return this._returnResult({data:null,error:a});throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new Ti;const{error:n}=await fs(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return this._returnResult({data:{user:null,session:null},error:n})})}catch(e){if(wi(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:r,type:n,options:i}=e,{error:s}=await fs(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:n,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}},redirectTo:null==i?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:s})}if("phone"in e){const{phone:r,type:n,options:i}=e,{data:s,error:a}=await fs(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:n,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:null==s?void 0:s.message_id},error:a})}throw new Oi("You must provide either an email or phone number and a type")}catch(t){if(wi(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async getSession(){await this.initializePromise;return await this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await r}catch(xo){}})()),r}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const e=t();for(this.pendingInLock.push((async()=>{try{await e}catch(xo){}})()),await e;this.pendingInLock.length;){const e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let e=null;const t=await Xi(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),null!==t&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=!!e.expires_at&&1e3*e.expires_at-Date.now()<gi;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const t=await Xi(this.userStorage,this.storageKey+"-user");(null==t?void 0:t.user)?e.user=t.user:e.user=ls()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const t={value:this.suppressGetSessionWarning};e.user=function(e,t){return new Proxy(e,{get:(e,r,n)=>{if("__isInsecureUserWarningProxy"===r)return!0;if("symbol"==typeof r){const t=r.toString();if("Symbol(Symbol.toPrimitive)"===t||"Symbol(Symbol.toStringTag)"===t||"Symbol(util.inspect.custom)"===t||"Symbol(nodejs.util.inspect.custom)"===t)return Reflect.get(e,r,n)}return t.value||"string"!=typeof r||(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(e,r,n)}})}(e.user,t),t.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:n},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const t=await this._acquireLock(-1,async()=>await this._getUser());return t.data.user&&(this.suppressGetSessionWarning=!0),t}async _getUser(e){try{return e?await fs(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ms}):await this._useSession(async e=>{var t,r,n;const{data:i,error:s}=e;if(s)throw s;return(null===(t=i.session)||void 0===t?void 0:t.access_token)||this.hasCustomAuthorizationHeader?await fs(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:null!==(n=null===(r=i.session)||void 0===r?void 0:r.access_token)&&void 0!==n?n:void 0,xform:ms}):{data:{user:null},error:new Ti}})}catch(t){if(wi(t))return ji(t)&&(await this._removeSession(),await Zi(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:t});throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:n,error:i}=r;if(i)throw i;if(!n.session)throw new Ti;const s=n.session;let a=null,o=null;"pkce"===this.flowType&&null!=e.email&&([a,o]=await is(this.storage,this.storageKey));const{data:l,error:c}=await fs(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:null==t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:o}),jwt:s.access_token,xform:ms});if(c)throw c;return s.user=l.user,await this._saveSession(s),await this._notifyAllSubscribers("USER_UPDATED",s),this._returnResult({data:{user:s.user},error:null})})}catch(r){if(await Zi(this.storage,`${this.storageKey}-code-verifier`),wi(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Ti;const t=Date.now()/1e3;let r=t,n=!0,i=null;const{payload:s}=ts(e.access_token);if(s.exp&&(r=s.exp,n=r<=t),n){const{data:t,error:r}=await this._callRefreshToken(e.refresh_token);if(r)return this._returnResult({data:{user:null,session:null},error:r});if(!t)return{data:{user:null,session:null},error:null};i=t}else{const{data:n,error:s}=await this._getUser(e.access_token);if(s)throw s;i={access_token:e.access_token,refresh_token:e.refresh_token,user:n.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(t){if(wi(t))return this._returnResult({data:{session:null,user:null},error:t});throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:n,error:i}=t;if(i)throw i;e=null!==(r=n.session)&&void 0!==r?r:void 0}if(!(null==e?void 0:e.refresh_token))throw new Ti;const{data:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):n?this._returnResult({data:{user:n.user,session:n},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(t){if(wi(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async _getSessionFromURL(e,t){try{if(!Gi())throw new Ii("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Ii(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if("pkce"===this.flowType)throw new Ci("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===this.flowType)throw new Ii("Not a valid implicit grant flow url.")}if("pkce"===t){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Ci("No code detected.");const{data:t,error:r}=await this._exchangeCodeForSession(e.code);if(r)throw r;const n=new URL(window.location.href);return n.searchParams.delete("code"),window.history.replaceState(window.history.state,"",n.toString()),{data:{session:t.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:n,access_token:i,refresh_token:s,expires_in:a,expires_at:o,token_type:l}=e;if(!(i&&a&&s&&l))throw new Ii("No session defined in URL");const c=Math.round(Date.now()/1e3),u=parseInt(a);let d=c+u;o&&(d=parseInt(o));const h=d-c;1e3*h<=pi&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${h}s, should have been closer to ${u}s`);const f=d-u;c-f>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",f,d,c):c-f<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",f,d,c);const{data:p,error:g}=await this._getUser(i);if(g)throw g;const m={provider_token:r,provider_refresh_token:n,access_token:i,expires_in:u,expires_at:d,refresh_token:s,token_type:l,user:p.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:m,redirectType:e.type},error:null})}catch(r){if(wi(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(e){return Boolean(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Xi(this.storage,`${this.storageKey}-code-verifier`);return!(!e.code||!t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:n,error:i}=t;if(i)return this._returnResult({error:i});const s=null===(r=n.session)||void 0===r?void 0:r.access_token;if(s){const{error:t}=await this.admin.signOut(s,e);if(t&&(!ki(t)||404!==t.status&&401!==t.status&&403!==t.status))return this._returnResult({error:t})}return"others"!==e&&(await this._removeSession(),await Zi(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const t=Symbol("auth-callback"),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>{await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})})(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,n;try{const{data:{session:n},error:i}=t;if(i)throw i;await(null===(r=this.stateChangeEmitters.get(e))||void 0===r?void 0:r.callback("INITIAL_SESSION",n)),this._debug("INITIAL_SESSION","callback id",e,"session",n)}catch(i){await(null===(n=this.stateChangeEmitters.get(e))||void 0===n?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,t={}){let r=null,n=null;"pkce"===this.flowType&&([r,n]=await is(this.storage,this.storageKey,!0));try{return await fs(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:n,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(await Zi(this.storage,`${this.storageKey}-code-verifier`),wi(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:null!==(e=t.user.identities)&&void 0!==e?e:[]},error:null})}catch(t){if(wi(t))return this._returnResult({data:null,error:t});throw t}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var t;try{const{data:r,error:n}=await this._useSession(async t=>{var r,n,i,s,a;const{data:o,error:l}=t;if(l)throw l;const c=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:null===(r=e.options)||void 0===r?void 0:r.redirectTo,scopes:null===(n=e.options)||void 0===n?void 0:n.scopes,queryParams:null===(i=e.options)||void 0===i?void 0:i.queryParams,skipBrowserRedirect:!0});return await fs(this.fetch,"GET",c,{headers:this.headers,jwt:null!==(a=null===(s=o.session)||void 0===s?void 0:s.access_token)&&void 0!==a?a:void 0})});if(n)throw n;return Gi()&&!(null===(t=e.options)||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(null==r?void 0:r.url),this._returnResult({data:{provider:e.provider,url:null==r?void 0:r.url},error:null})}catch(r){if(wi(r))return this._returnResult({data:{provider:e.provider,url:null},error:r});throw r}}async linkIdentityIdToken(e){return await this._useSession(async t=>{var r;try{const{error:n,data:{session:i}}=t;if(n)throw n;const{options:s,provider:a,token:o,access_token:l,nonce:c}=e,u=await fs(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:null!==(r=null==i?void 0:i.access_token)&&void 0!==r?r:void 0,body:{provider:a,id_token:o,access_token:l,nonce:c,link_identity:!0,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken}},xform:ps}),{data:d,error:h}=u;return h?this._returnResult({data:{user:null,session:null},error:h}):d&&d.session&&d.user?(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("USER_UPDATED",d.session)),this._returnResult({data:d,error:h})):this._returnResult({data:{user:null,session:null},error:new Pi})}catch(n){if(await Zi(this.storage,`${this.storageKey}-code-verifier`),wi(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,n;const{data:i,error:s}=t;if(s)throw s;return await fs(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:null!==(n=null===(r=i.session)||void 0===r?void 0:r.access_token)&&void 0!==n?n:void 0})})}catch(t){if(wi(t))return this._returnResult({data:null,error:t});throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await function(e,t){const r=new Promise((r,n)=>{(async()=>{for(let i=0;i<1/0;i++)try{const n=await e(i);if(!t(i,null,n))return void r(n)}catch(xo){if(!t(i,xo))return void n(xo)}})()});return r}(async r=>(r>0&&await async function(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}(200*Math.pow(2,r-1)),this._debug(t,"refreshing attempt",r),await fs(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ps})),(e,t)=>{const n=200*Math.pow(2,e);return t&&Ai(t)&&Date.now()+n-r<pi})}catch(r){if(this._debug(t,"error",r),wi(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(t,"end")}}_isValidSession(e){return"object"==typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),Gi()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await Xi(this.storage,this.storageKey);if(i&&this.userStorage){let t=await Xi(this.userStorage,this.storageKey+"-user");this.storage.isServer||!Object.is(this.storage,this.userStorage)||t||(t={user:i.user},await Qi(this.userStorage,this.storageKey+"-user",t)),i.user=null!==(e=null==t?void 0:t.user)&&void 0!==e?e:ls()}else if(i&&!i.user&&!i.user){const e=await Xi(this.storage,this.storageKey+"-user");e&&(null==e?void 0:e.user)?(i.user=e.user,await Zi(this.storage,this.storageKey+"-user"),await Qi(this.storage,this.storageKey,i)):i.user=ls()}if(this._debug(r,"session from storage",i),!this._isValidSession(i))return this._debug(r,"session is not valid"),void(null!==i&&await this._removeSession());const s=1e3*(null!==(t=i.expires_at)&&void 0!==t?t:1/0)-Date.now()<gi;if(this._debug(r,`session has${s?"":" not"} expired with margin of 90000s`),s){if(this.autoRefreshToken&&i.refresh_token){const{error:e}=await this._callRefreshToken(i.refresh_token);e&&(console.error(e),Ai(e)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else if(i.user&&!0===i.user.__isUserNotAvailableProxy)try{const{data:e,error:t}=await this._getUser(i.access_token);!t&&(null==e?void 0:e.user)?(i.user=e.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(n){console.error("Error getting user data:",n),this._debug(r,"error getting user data, skipping SIGNED_IN notification",n)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){return this._debug(r,"error",i),void console.error(i)}finally{this._debug(r,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new Ti;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new es;const{data:t,error:r}=await this._refreshAccessToken(e);if(r)throw r;if(!t.session)throw new Ti;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);const n={data:t.session,error:null};return this.refreshingDeferred.resolve(n),n}catch(i){if(this._debug(n,"error",i),wi(i)){const e={data:null,error:i};return Ai(i)||await this._removeSession(),null===(t=this.refreshingDeferred)||void 0===t||t.resolve(e),e}throw null===(r=this.refreshingDeferred)||void 0===r||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(e,t,r=!0){const n=`#_notifyAllSubscribers(${e})`;this._debug(n,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const n=[],i=Array.from(this.stateChangeEmitters.values()).map(async r=>{try{await r.callback(e,t)}catch(xo){n.push(xo)}});if(await Promise.all(i),n.length>0){for(let e=0;e<n.length;e+=1)console.error(n[e]);throw n[0]}}finally{this._debug(n,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Zi(this.storage,`${this.storageKey}-code-verifier`);const t=Object.assign({},e),r=t.user&&!0===t.user.__isUserNotAvailableProxy;if(this.userStorage){!r&&t.user&&await Qi(this.userStorage,this.storageKey+"-user",{user:t.user});const e=Object.assign({},t);delete e.user;const n=cs(e);await Qi(this.storage,this.storageKey,n)}else{const e=cs(t);await Qi(this.storage,this.storageKey,e)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Zi(this.storage,this.storageKey),await Zi(this.storage,this.storageKey+"-code-verifier"),await Zi(this.storage,this.storageKey+"-user"),this.userStorage&&await Zi(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Gi()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(xo){console.error("removing visibilitychange callback failed",xo)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),pi);this.autoRefreshTicker=e,e&&"object"==typeof e&&"function"==typeof e.unref?e.unref():"undefined"!=typeof Deno&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const n=Math.floor((1e3*r.expires_at-e)/pi);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),n<=3&&await this._callRefreshToken(r.refresh_token)})}catch(xo){console.error("Auto refresh tick failed with error. This is likely a transient error.",xo)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(xo){if(!(xo.isAcquireTimeout||xo instanceof Es))throw xo;this._debug("auto refresh token tick lock not available")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Gi()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{"visible"===document.visibilityState?await this._recoverAndRefresh():this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")}))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const n=[`provider=${encodeURIComponent(t)}`];if((null==r?void 0:r.redirectTo)&&n.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),(null==r?void 0:r.scopes)&&n.push(`scopes=${encodeURIComponent(r.scopes)}`),"pkce"===this.flowType){const[e,t]=await is(this.storage,this.storageKey),r=new URLSearchParams({code_challenge:`${encodeURIComponent(e)}`,code_challenge_method:`${encodeURIComponent(t)}`});n.push(r.toString())}if(null==r?void 0:r.queryParams){const e=new URLSearchParams(r.queryParams);n.push(e.toString())}return(null==r?void 0:r.skipBrowserRedirect)&&n.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${n.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:n,error:i}=t;return i?this._returnResult({data:null,error:i}):await fs(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:null===(r=null==n?void 0:n.session)||void 0===r?void 0:r.access_token})})}catch(t){if(wi(t))return this._returnResult({data:null,error:t});throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,n;const{data:i,error:s}=t;if(s)return this._returnResult({data:null,error:s});const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:"totp"===e.factorType?{issuer:e.issuer}:{}),{data:o,error:l}=await fs(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:null===(r=null==i?void 0:i.session)||void 0===r?void 0:r.access_token});return l?this._returnResult({data:null,error:l}):("totp"===e.factorType&&"totp"===o.type&&(null===(n=null==o?void 0:o.totp)||void 0===n?void 0:n.qr_code)&&(o.totp.qr_code=`data:image/svg+xml;utf-8,${o.totp.qr_code}`),this._returnResult({data:o,error:null}))})}catch(t){if(wi(t))return this._returnResult({data:null,error:t});throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:n,error:i}=t;if(i)return this._returnResult({data:null,error:i});const s=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:"create"===e.webauthn.type?Ms(e.webauthn.credential_response):Ds(e.webauthn.credential_response)})}:{code:e.code}),{data:a,error:o}=await fs(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:s,headers:this.headers,jwt:null===(r=null==n?void 0:n.session)||void 0===r?void 0:r.access_token});return o?this._returnResult({data:null,error:o}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),this._returnResult({data:a,error:o}))})}catch(t){if(wi(t))return this._returnResult({data:null,error:t});throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:n,error:i}=t;if(i)return this._returnResult({data:null,error:i});const s=await fs(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:null===(r=null==n?void 0:n.session)||void 0===r?void 0:r.access_token});if(s.error)return s;const{data:a}=s;if("webauthn"!==a.type)return{data:a,error:null};switch(a.webauthn.type){case"create":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:Ls(a.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:Fs(a.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(t){if(wi(t))return this._returnResult({data:null,error:t});throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const n={all:[],phone:[],totp:[],webauthn:[]};for(const i of null!==(e=null==t?void 0:t.factors)&&void 0!==e?e:[])n.all.push(i),"verified"===i.status&&n[i.factor_type].push(i);return{data:n,error:null}}async _getAuthenticatorAssuranceLevel(){var e,t;const{data:{session:r},error:n}=await this.getSession();if(n)return this._returnResult({data:null,error:n});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=ts(r.access_token);let s=null;i.aal&&(s=i.aal);let a=s;(null!==(t=null===(e=r.user.factors)||void 0===e?void 0:e.filter(e=>"verified"===e.status))&&void 0!==t?t:[]).length>0&&(a="aal2");return{data:{currentLevel:s,nextLevel:a,currentAuthenticationMethods:i.amr||[]},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;return n?this._returnResult({data:null,error:n}):r?await fs(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:e=>({data:e,error:null})}):this._returnResult({data:null,error:new Ti})})}catch(t){if(wi(t))return this._returnResult({data:null,error:t});throw t}}async _approveAuthorization(e,t){try{return await this._useSession(async r=>{const{data:{session:n},error:i}=r;if(i)return this._returnResult({data:null,error:i});if(!n)return this._returnResult({data:null,error:new Ti});const s=await fs(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:n.access_token,body:{action:"approve"},xform:e=>({data:e,error:null})});return s.data&&s.data.redirect_url&&Gi()&&!(null==t?void 0:t.skipBrowserRedirect)&&window.location.assign(s.data.redirect_url),s})}catch(r){if(wi(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(e,t){try{return await this._useSession(async r=>{const{data:{session:n},error:i}=r;if(i)return this._returnResult({data:null,error:i});if(!n)return this._returnResult({data:null,error:new Ti});const s=await fs(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:n.access_token,body:{action:"deny"},xform:e=>({data:e,error:null})});return s.data&&s.data.redirect_url&&Gi()&&!(null==t?void 0:t.skipBrowserRedirect)&&window.location.assign(s.data.redirect_url),s})}catch(r){if(wi(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;return r?this._returnResult({data:null,error:r}):t?await fs(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:t.access_token,xform:e=>({data:e,error:null})}):this._returnResult({data:null,error:new Ti})})}catch(e){if(wi(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;return n?this._returnResult({data:null,error:n}):r?(await fs(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Ti})})}catch(t){if(wi(t))return this._returnResult({data:null,error:t});throw t}}async fetchJwk(e,t={keys:[]}){let r=t.keys.find(t=>t.kid===e);if(r)return r;const n=Date.now();if(r=this.jwks.keys.find(t=>t.kid===e),r&&this.jwks_cached_at+6e5>n)return r;const{data:i,error:s}=await fs(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(s)throw s;return i.keys&&0!==i.keys.length?(this.jwks=i,this.jwks_cached_at=n,r=i.keys.find(t=>t.kid===e),r||null):null}async getClaims(e,t={}){try{let r=e;if(!r){const{data:e,error:t}=await this.getSession();if(t||!e.session)return this._returnResult({data:null,error:t});r=e.session.access_token}const{header:n,payload:i,signature:s,raw:{header:a,payload:o}}=ts(r);(null==t?void 0:t.allowExpired)||function(e){if(!e)throw new Error("Missing exp claim");if(e<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(i.exp);const l=n.alg&&!n.alg.startsWith("HS")&&n.kid&&"crypto"in globalThis&&"subtle"in globalThis.crypto?await this.fetchJwk(n.kid,(null==t?void 0:t.keys)?{keys:t.keys}:null==t?void 0:t.jwks):null;if(!l){const{error:e}=await this.getUser(r);if(e)throw e;return{data:{claims:i,header:n,signature:s},error:null}}const c=function(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(n.alg),u=await crypto.subtle.importKey("jwk",l,c,!0,["verify"]);if(!(await crypto.subtle.verify(c,u,s,Hi(`${a}.${o}`))))throw new Li("Invalid JWT signature");return{data:{claims:i,header:n,signature:s},error:null}}catch(r){if(wi(r))return this._returnResult({data:null,error:r});throw r}}};Js.nextInstanceID={};const Ys=ws,Qs=Js,Xs=Object.freeze(Object.defineProperty({__proto__:null,AuthAdminApi:Ys,AuthApiError:xi,AuthClient:Qs,AuthError:bi,AuthImplicitGrantRedirectError:Ii,AuthInvalidCredentialsError:Oi,AuthInvalidJwtError:Li,AuthInvalidTokenResponseError:Pi,AuthPKCEGrantCodeExchangeError:Ci,AuthRetryableFetchError:Ri,AuthSessionMissingError:Ti,AuthUnknownError:Ei,AuthWeakPasswordError:$i,CustomAuthError:Si,GoTrueAdminApi:ws,GoTrueClient:Js,NavigatorLockAcquireTimeoutError:Ss,SIGN_OUT_SCOPES:bs,isAuthApiError:ki,isAuthError:wi,isAuthImplicitGrantRedirectError:Ni,isAuthRetryableFetchError:Ai,isAuthSessionMissingError:ji,isAuthWeakPasswordError:function(e){return wi(e)&&"AuthWeakPasswordError"===e.name},lockInternals:ks,navigatorLock:js,processLock:async function(e,t,r){var n;const i=null!==(n=Ps[e])&&void 0!==n?n:Promise.resolve(),s=Promise.race([i.catch(()=>null),t>=0?new Promise((r,n)=>{setTimeout(()=>{n(new Ts(`Acquring process lock with name "${e}" timed out`))},t)}):null].filter(e=>e)).catch(e=>{if(e&&e.isAcquireTimeout)throw e;return null}).then(async()=>await r());return Ps[e]=s.catch(async e=>{if(e&&e.isAcquireTimeout)return await i,null;throw e}),await s}},Symbol.toStringTag,{value:"Module"})),Zs=n(Xs);var ea,ta,ra;function na(){if(ea)return di;ea=1,Object.defineProperty(di,"__esModule",{value:!0}),di.SupabaseAuthClient=void 0;const e=Zs;let t=class extends e.AuthClient{constructor(e){super(e)}};return di.SupabaseAuthClient=t,di}function ia(){if(ta)return at;ta=1,Object.defineProperty(at,"__esModule",{value:!0});const e=pt,t=yr(),r=tn,n=Xn,i=ii(),s=oi(),a=ui(),o=na();return at.default=class{constructor(e,r,o){var l,c,u;this.supabaseUrl=e,this.supabaseKey=r;const d=(0,a.validateSupabaseUrl)(e);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",d),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",d),this.storageUrl=new URL("storage/v1",d),this.functionsUrl=new URL("functions/v1",d);const h=`sb-${d.hostname.split(".")[0]}-auth-token`,f={db:i.DEFAULT_DB_OPTIONS,realtime:i.DEFAULT_REALTIME_OPTIONS,auth:Object.assign(Object.assign({},i.DEFAULT_AUTH_OPTIONS),{storageKey:h}),global:i.DEFAULT_GLOBAL_OPTIONS},p=(0,a.applySettingDefaults)(null!=o?o:{},f);this.storageKey=null!==(l=p.auth.storageKey)&&void 0!==l?l:"",this.headers=null!==(c=p.global.headers)&&void 0!==c?c:{},p.accessToken?(this.accessToken=p.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(t)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(null!==(u=p.auth)&&void 0!==u?u:{},this.headers,p.global.fetch),this.fetch=(0,s.fetchWithAuth)(r,this._getAccessToken.bind(this),p.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},p.realtime)),this.accessToken&&this.accessToken().then(e=>this.realtime.setAuth(e)).catch(e=>console.warn("Failed to set initial Realtime auth token:",e)),this.rest=new t.PostgrestClient(new URL("rest/v1",d).href,{headers:this.headers,schema:p.db.schema,fetch:this.fetch}),this.storage=new n.StorageClient(this.storageUrl.href,this.headers,this.fetch,null==o?void 0:o.storage),p.accessToken||this._listenForAuthEvents()}get functions(){return new e.FunctionsClient(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,t;if(this.accessToken)return await this.accessToken();const{data:r}=await this.auth.getSession();return null!==(t=null===(e=r.session)||void 0===e?void 0:e.access_token)&&void 0!==t?t:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:i,storageKey:s,flowType:a,lock:l,debug:c,throwOnError:u},d,h){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new o.SupabaseAuthClient({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),d),storageKey:s,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:i,flowType:a,lock:l,debug:c,throwOnError:u,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(e=>"authorization"===e.toLowerCase())})}_initRealtimeClient(e){return new r.RealtimeClient(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null==e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",null==t?void 0:t.access_token)})}_handleTokenChanged(e,t,r){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===r?"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):(this.changedAccessToken=r,this.realtime.setAuth(r))}},at}function sa(){return ra||(ra=1,function(e){var t=st&&st.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=st&&st.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},n=st&&st.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.createClient=e.SupabaseClient=e.FunctionRegion=e.FunctionsError=e.FunctionsRelayError=e.FunctionsFetchError=e.FunctionsHttpError=e.PostgrestError=void 0;const i=n(ia());r(Zs,e);var s=yr();Object.defineProperty(e,"PostgrestError",{enumerable:!0,get:function(){return s.PostgrestError}});var a=pt;Object.defineProperty(e,"FunctionsHttpError",{enumerable:!0,get:function(){return a.FunctionsHttpError}}),Object.defineProperty(e,"FunctionsFetchError",{enumerable:!0,get:function(){return a.FunctionsFetchError}}),Object.defineProperty(e,"FunctionsRelayError",{enumerable:!0,get:function(){return a.FunctionsRelayError}}),Object.defineProperty(e,"FunctionsError",{enumerable:!0,get:function(){return a.FunctionsError}}),Object.defineProperty(e,"FunctionRegion",{enumerable:!0,get:function(){return a.FunctionRegion}}),r(tn,e);var o=ia();Object.defineProperty(e,"SupabaseClient",{enumerable:!0,get:function(){return n(o).default}});e.createClient=(e,t,r)=>new i.default(e,t,r),function(){if("undefined"!=typeof window)return!1;if("undefined"==typeof process)return!1;const e=process.version;if(null==e)return!1;const t=e.match(/^v(\d+)\./);return!!t&&parseInt(t[1],10)<=18}()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217")}(st)),st}var aa=sa();const oa=r(aa),la=t({__proto__:null,default:oa},[aa]),{PostgrestError:ca,FunctionsHttpError:ua,FunctionsFetchError:da,FunctionsRelayError:ha,FunctionsError:fa,FunctionRegion:pa,SupabaseClient:ga,createClient:ma,GoTrueAdminApi:va,GoTrueClient:ya,AuthAdminApi:_a,AuthClient:ba,navigatorLock:wa,NavigatorLockAcquireTimeoutError:xa,lockInternals:ka,processLock:Ea,SIGN_OUT_SCOPES:Sa,AuthError:Ta,AuthApiError:ja,AuthUnknownError:Pa,CustomAuthError:Oa,AuthSessionMissingError:Ia,AuthInvalidTokenResponseError:Na,AuthInvalidCredentialsError:Ca,AuthImplicitGrantRedirectError:Ra,AuthPKCEGrantCodeExchangeError:Aa,AuthRetryableFetchError:$a,AuthWeakPasswordError:La,AuthInvalidJwtError:Fa,isAuthError:Ma,isAuthApiError:Da,isAuthSessionMissingError:Ua,isAuthImplicitGrantRedirectError:za,isAuthRetryableFetchError:Ba,isAuthWeakPasswordError:Va,RealtimePresence:qa,RealtimeChannel:Ha,RealtimeClient:Wa,REALTIME_LISTEN_TYPES:Ga,REALTIME_POSTGRES_CHANGES_LISTEN_EVENT:Ka,REALTIME_PRESENCE_LISTEN_EVENTS:Ja,REALTIME_SUBSCRIBE_STATES:Ya,REALTIME_CHANNEL_STATES:Qa}=oa||la,Xa=new Map;(()=>{const e="anon",t=Xa.get(e);if(t)return t;const r=ma("https://tmsbyiwqzesmirbargxv.supabase.co","sb_publishable_e0qvbW6GL0G_02IkjVLfng_dUPmSJd9",{auth:{persistSession:!1,storageKey:"sb-lumelle-auth-anon"},global:void 0});Xa.set(e,r)})(),String("supabase").trim();const Za={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_ADMIN_EMAILS:"you@example.com",VITE_ANALYTICS_ENABLED:"true",VITE_APP_URL:"https://choir-holly-assist-cases.trycloudflare.com",VITE_ASSET_BASE_URL:"https://tmsbyiwqzesmirbargxv.supabase.co/storage/v1/object/public/public",VITE_CLARITY_PROJECT_ID:"v846srjnkk",VITE_CLERK_PUBLISHABLE_KEY:"pk_test_Z29sZGVuLWZyb2ctNTMuY2xlcmsuYWNjb3VudHMuZGV2JA",VITE_CLOUDINARY_API_KEY:"162511853292628",VITE_CLOUDINARY_CLOUD_NAME:"dbowtimdn",VITE_CLOUDINARY_UPLOAD_PRESET:"",VITE_CONTENT_BRIEF_URL:"https://lumellebeauty.co.uk/content-brief.pdf",VITE_EXPERIMENTS_ENABLED:"true",VITE_HEATMAP_ENABLED:"true",VITE_META_PIXEL_ID:"1494559081624608",VITE_POSTHOG_HOST:"https://us.i.posthog.com",VITE_POSTHOG_KEY:"phc_smzowuKxqF1AR2Tms0mgF7y0KJolnNEouVBTbGuZwa",VITE_SHOPIFY_API_KEY:"24d62a0192ffbd2701399043b1a2085b",VITE_SHOPIFY_STOREFRONT_PUBLIC_TOKEN:"947d496da034c790f307d1d6ab8cb8de",VITE_SHOPIFY_STORE_DOMAIN:"lumelle-3.myshopify.com",VITE_SUPABASE_ANON_KEY:"sb_publishable_e0qvbW6GL0G_02IkjVLfng_dUPmSJd9",VITE_SUPABASE_URL:"https://tmsbyiwqzesmirbargxv.supabase.co",VITE_SUPPORT_EMAIL:"creators@lumellebeauty.co.uk",VITE_USE_REAL_COMMERCE:"true",VITE_USE_SERVER_CART:"0",VITE_WHATSAPP_INVITE_URL:"https://chat.whatsapp.com/your-invite-link"},eo=e=>{const t=Za[e]||Za[`VITE_${e}`];if("string"==typeof t)return t},to=e=>e.trim().toUpperCase();to(eo("SHOWER_CAP_DISCOUNT_CODE_QTY2")||"CAP2SAVE5"),to(eo("SHOWER_CAP_DISCOUNT_CODE_QTY3")||"CAP3SAVE10"),to(eo("SHOWER_CAP_DISCOUNT_CODE_QTY4")||"CAP4SAVE15");const ro=b.createContext(null),no=[{label:"5% off",helper:"Welcome deal",color:"#F9A58A"},{label:"10% off",helper:"Welcome deal",color:"#F4C7B7"},{label:"10% off",helper:"Welcome deal",color:"#FDD9C3"},{label:"15% off",helper:"Welcome deal",color:"#F7B8A0"},{label:"5% off",helper:"Welcome deal",color:"#F9A58A"},{label:"10% off",helper:"Welcome deal",color:"#F7B8A0"},{label:"10% off",helper:"Welcome deal",color:"#FDD9C3"},{label:"5% off",helper:"Welcome deal",color:"#F7B8A0"}],io={label:"Free Shipping on orders over 20",helper:"Welcome deal",color:"#F7B8A0"},so="LUMELLE10",ao=({prizes:e=no,onSpun:t})=>{const{isLoaded:r,isSignedIn:n,user:i}={isLoaded:!0,isSignedIn:!1,user:null},{getToken:s}={isLoaded:!0,isSignedIn:!1,userId:null},{signedIn:a}=function(){const e=b.useContext(it);if(!e)throw new Error("useAuthContext must be used inside AuthProvider");return e}(),{applyDiscount:o,items:l,checkoutUrl:c}=(()=>{const e=b.useContext(ro);if(!e)throw new Error("useCart must be used within CartProvider");return e})(),[u,d]=b.useState(0),[h,f]=b.useState(!1),[p,g]=b.useState(!1),[m,v]=b.useState(null),[y,w]=b.useState(null),[x,k]=b.useState(!1),[E,S]=b.useState(!1),[T,j]=b.useState(null),[P,O]=b.useState("idle"),[I,N]=b.useState(!1),C=360/e.length,R=b.useMemo(()=>e.map(e=>{const t=e.label.match(/(\d+)\s*%/i);return t?`${t[1]}%`:e.label}),[e]),A=b.useMemo(()=>{let t="";return e.forEach((r,n)=>{const i=n*C,s=i+C;t+=`${r.color} ${i}deg ${s}deg${n===e.length-1?"":", "}`}),`conic-gradient(${t})`},[e,C]);b.useEffect(()=>{},[s,r,n,i]),b.useEffect(()=>{p&&t&&!I&&(t({label:io.label,discountCode:so}),N(!0))},[p,I,t]);return _.jsxs("div",{className:"flex flex-col items-center gap-4 text-semantic-text-primary",children:[_.jsxs("div",{className:"relative h-64 w-64 max-w-full md:h-72 md:w-72",children:[_.jsx("div",{className:"absolute left-1/2 top-[-10px] z-20 -translate-x-1/2",children:_.jsx("div",{className:"h-4 w-4 rotate-45 rounded-sm bg-semantic-legacy-brand-cocoa shadow-sm"})}),_.jsxs("div",{className:"absolute inset-0",children:[_.jsx("div",{className:"absolute inset-0 rounded-full border-8 border-white shadow-[0_18px_38px_rgba(0,0,0,0.12)] transition-transform duration-[3200ms] ease-out",style:{backgroundImage:A,transform:`rotate(${u}deg)`},"aria-live":"polite"}),_.jsx("div",{className:"absolute inset-0 select-none transition-transform duration-[3200ms] ease-out",style:{transform:`rotate(${u}deg)`},"aria-hidden":"true",children:R.map((e,t)=>{const r=(t*C+C/2)*Math.PI/180,n=50+32*Math.sin(r),i=50-32*Math.cos(r);return _.jsx("div",{className:"absolute -translate-x-1/2 -translate-y-1/2 rounded-full bg-white/85 px-2 py-1 text-[11px] font-semibold text-semantic-legacy-brand-cocoa shadow-sm backdrop-blur",style:{left:`${n}%`,top:`${i}%`},children:e},`${e}-${t}`)})})]}),_.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:_.jsx("div",{className:"h-10 w-10 rounded-full bg-white/90 text-center text-[10px] font-semibold uppercase tracking-[0.28em] text-semantic-text-primary shadow-soft backdrop-blur",children:_.jsx("span",{className:"sr-only",children:"Spin"})})})]}),!p&&_.jsxs("div",{className:"flex w-full max-w-md flex-col items-stretch gap-2",children:[T&&_.jsx("p",{className:"text-left text-xs font-medium text-red-600",children:T}),_.jsx("button",{type:"button",disabled:h||x||E,onClick:()=>{if(h||p||x||E)return;f(!0),v(null),j(null),O("idle");let t=e.length-1;for(let r=e.length-1;r>=0;r--){if(e[r].label.toLowerCase().includes("10%")){t=r;break}}const s=6+Math.floor(4*Math.random());d(u+360*s+(360-(t*C+C/2))),window.setTimeout(()=>{(async()=>{try{r&&n&&i||localStorage.setItem("lumelle_welcome_wheel_pending_preview","1"),v(io),g(!0)}catch(e){console.error("Failed to claim welcome deal",e),j("Something went wrong. Please try again."),g(!1)}finally{S(!1),f(!1)}})()},3400)},className:"inline-flex min-w-[200px] items-center justify-center rounded-full bg-semantic-legacy-brand-cocoa px-6 py-3 text-sm font-semibold text-white shadow-soft transition hover:-translate-y-0.5 disabled:opacity-60",children:h?"Spinning":x?"Loading":"Reveal welcome deal"}),a?_.jsxs("p",{className:"text-center text-xs text-semantic-text-primary/70",children:["Guaranteed welcome deal: Free Shipping on orders over ",20,"+. Sign in to claim (1 per account)."]}):_.jsx("p",{className:"text-center text-xs text-semantic-text-primary/70",children:"Spin to reveal your welcome code. Sign in to claim it (1 per account)."})]}),_.jsxs("div",{className:"mt-2 w-full max-w-md rounded-2xl bg-white/70 p-4 text-sm text-semantic-text-primary/80 shadow-[0_6px_18px_rgba(0,0,0,0.06)]",children:[_.jsx("div",{className:"font-semibold text-semantic-text-primary",children:"Guaranteed welcome deal"}),_.jsxs("div",{className:"mt-1 text-xs text-semantic-text-primary/70",children:["Use code ",_.jsx("span",{className:"font-semibold",children:so})," for Free Shipping on orders over ",20,"+."]})]}),p&&m?_.jsxs("div",{className:"w-full max-w-md rounded-2xl bg-white/80 p-4 text-center shadow-soft",children:[_.jsx("p",{className:"font-heading text-lg font-bold text-semantic-text-primary",children:y?"Welcome deal unlocked!":"You unlocked a welcome deal!"}),_.jsxs("p",{className:"mt-1 text-sm text-semantic-text-primary/80",children:["Code ",_.jsx("span",{className:"font-semibold",children:so}),"  Free Shipping on orders over ",20,"+"]}),a?_.jsx("button",{type:"button",onClick:()=>{if(!o)return;const e=Boolean(c)||(l?.length??0)>0;if(o(so),O(e?"applied":"saved"),e)try{window.dispatchEvent(new CustomEvent("lumelle:open-cart"))}catch{}},disabled:E,className:"mt-4 inline-flex min-w-[200px] items-center justify-center rounded-full bg-semantic-accent-cta px-6 py-3 text-sm font-semibold text-semantic-text-primary shadow-soft transition hover:-translate-y-0.5 disabled:opacity-60",children:E?"Claiming":"applied"===P?"Applied to cart":"saved"===P?"Saved  add to cart":"Apply to cart"}):_.jsx("button",{type:"button",onClick:()=>(()=>{const e=`${window.location.pathname}${window.location.search}${window.location.hash}`;window.location.assign(`/sign-in?redirect=${encodeURIComponent(e)}`)})(),className:"mt-4 inline-flex min-w-[200px] items-center justify-center rounded-full bg-semantic-accent-cta px-6 py-3 text-sm font-semibold text-semantic-text-primary shadow-soft transition hover:-translate-y-0.5",children:"Sign in to claim"})]}):null]})},oo=()=>_.jsx("section",{className:"bg-white py-16 px-4 md:px-6",children:_.jsx("div",{className:"mx-auto max-w-5xl rounded-[3rem] border border-semantic-accent-cta/40 bg-gradient-to-br from-semantic-accent-cta/35 via-semantic-bg-subtle to-semantic-accent-cta/20 p-8 text-center shadow-[0_25px_80px_rgba(249,165,138,0.35)] md:p-12",children:_.jsxs("div",{className:"flex flex-col items-center gap-8 md:gap-10",children:[_.jsx("h2",{className:"max-w-3xl text-center font-heading text-3xl font-bold leading-tight text-semantic-text-primary md:text-4xl",children:"Spin the wheel to unlock your reward"}),_.jsx("div",{className:"flex w-full justify-center",children:_.jsx(ao,{})})]})})}),lo={"shower-cap":{handle:"lumelle-shower-cap",defaultTitle:"Lumelle Shower Cap",defaultSubtitle:"Luxury protection that keeps every style flawless through every shower. Waterproof satin shields your blowouts, curls, and braids from steam and humidity  so you step out with the same perfect hair you stepped in with.",defaultPrice:14.99,bottomCtaChips:["Waterproof satin","30-day returns"],gallery:["/uploads/luminele/shower-cap-01.webp","/uploads/luminele/shower-cap-02.webp","/uploads/luminele/shower-cap-03.webp","/uploads/luminele/shower-cap-04.webp","/uploads/luminele/shower-cap-05.webp","/uploads/luminele/shower-cap-06.webp","/uploads/luminele/shower-cap-07.webp","/uploads/luminele/shower-cap-08.webp","video://https://www.tiktok.com/embed/v2/7567328998158585110"]},"satin-overnight-curler":{handle:"satin-overnight-curler",defaultTitle:"Satin Overnight Heatless Curler Set",defaultSubtitle:"Wake up to salon-worthy curls without heat, damage, or effort. Soft satin design works while you sleep  for healthy, beautiful hair every morning.",defaultPrice:16.99,bottomCtaChips:["Heatless curls","30-day returns"],gallery:["/uploads/curler/1.webp","/uploads/curler/2.webp","/uploads/curler/3.webp","/uploads/curler/4.webp","/uploads/curler/5.webp","/uploads/curler/6.webp","/uploads/curler/7.webp","/uploads/curler/8.webp","video://https://www.tiktok.com/embed/v2/7576640339788746006?embed_source=lite"]}},co=e=>`${e.toFixed(2)}`,uo=e=>{const t=e?.find(e=>"string"==typeof e&&!e.startsWith("video://"));return t??null},ho=({count:e=0,active:t=0,onSelect:r=()=>{}})=>{const n=(()=>{const e=lo["shower-cap"],t=lo["satin-overnight-curler"];return[{key:"shower-cap",title:e.defaultTitle,subtitle:e.defaultSubtitle,imageSrc:uo(e.gallery),href:`/product/${e.handle}`,chips:e.bottomCtaChips??[],priceLabel:co(e.defaultPrice)},{key:"satin-overnight-curler",title:t.defaultTitle,subtitle:t.defaultSubtitle,imageSrc:uo(t.gallery),href:`/product/${t.handle}`,chips:t.bottomCtaChips??[],priceLabel:co(t.defaultPrice)}]})();return 0===n.length?null:_.jsx("section",{className:"bg-white py-14 md:py-16",children:_.jsxs("div",{className:"mx-auto max-w-6xl px-4 md:px-6",children:[_.jsx(Oe,{eyebrow:"Shop the sets",title:"Build your routine",description:"Two creator-loved essentials. Start with the cap, add the heatless curler, and keep every shower + style day flawless.",alignment:"center"}),_.jsx("div",{className:"mt-10 grid gap-6 md:grid-cols-2",children:n.map((e,r)=>{const n=r===t,i=e.chips.slice(0,3),s=e.imageSrc?encodeURI(re(e.imageSrc)):null;return _.jsxs("article",{className:"group overflow-hidden rounded-[2.5rem] border bg-white shadow-soft transition hover:-translate-y-0.5 "+(n?"border-semantic-legacy-brand-cocoa/60":"border-semantic-legacy-brand-blush/60"),children:[_.jsxs("div",{className:"relative aspect-square bg-semantic-legacy-brand-blush/15 md:aspect-auto md:h-80 lg:h-84",children:[s?_.jsx("img",{src:s,alt:e.title,className:"h-full w-full object-contain p-6 md:p-8",loading:"lazy",decoding:"async"}):_.jsx("div",{className:"h-full w-full","aria-hidden":!0}),e.priceLabel?_.jsxs("div",{className:"absolute left-5 top-5 rounded-full bg-white/85 px-4 py-2 text-xs font-semibold uppercase tracking-[0.24em] text-semantic-text-primary shadow-soft backdrop-blur",children:["From ",e.priceLabel]}):null]}),_.jsxs("div",{className:"space-y-4 p-6",children:[_.jsxs("div",{className:"space-y-2",children:[_.jsx("h3",{className:"font-heading text-2xl font-bold leading-tight text-semantic-text-primary",children:e.title}),_.jsx("p",{className:"text-sm text-semantic-text-primary/75",children:e.subtitle})]}),i.length>0?_.jsx("div",{className:"flex flex-wrap gap-2",children:i.map(e=>_.jsx("span",{className:"inline-flex rounded-full border border-semantic-legacy-brand-blush/60 bg-white px-3 py-1 text-[11px] font-semibold uppercase tracking-[0.22em] text-semantic-text-primary/70",children:e},e))}):null,_.jsxs("div",{className:"flex flex-wrap gap-3",children:[_.jsx(C,{to:e.href,className:"inline-flex items-center justify-center rounded-full bg-semantic-legacy-brand-cocoa px-6 py-3 text-sm font-semibold text-white shadow-soft transition hover:-translate-y-0.5",children:"Shop now"}),_.jsx(C,{to:e.href,className:"inline-flex items-center justify-center rounded-full border border-semantic-legacy-brand-blush/60 bg-white px-6 py-3 text-sm font-semibold text-semantic-text-primary transition hover:bg-brand-porcelain/60",children:"Details"})]})]})]},e.key)})})]})})},fo="LUMELLE10",po="lumelle_email_capture",go=()=>{const[e,t]=b.useState(""),[r,n]=b.useState("idle"),[i,s]=b.useState(null),[a,o]=b.useState(!1);b.useEffect(()=>{try{if(!localStorage.getItem(po))return;n("success"),s("You're already on the list.")}catch{}},[]);return _.jsxs("section",{className:"relative overflow-hidden bg-gradient-to-br from-semantic-legacy-brand-blush/30 via-semantic-legacy-brand-blush/40 to-semantic-legacy-brand-cocoa/20 py-16 md:py-20",children:[_.jsxs("div",{className:"absolute inset-0 opacity-10",children:[_.jsx("div",{className:"absolute top-0 left-1/4 w-96 h-96 bg-semantic-accent-cta/30 rounded-full blur-3xl"}),_.jsx("div",{className:"absolute bottom-0 right-1/4 w-96 h-96 bg-semantic-legacy-brand-cocoa/20 rounded-full blur-3xl"})]}),_.jsx("div",{className:"relative mx-auto max-w-3xl px-4 md:px-6",children:_.jsx("div",{className:"rounded-3xl bg-white/95 backdrop-blur-sm p-8 md:p-12 shadow-2xl ring-1 ring-semantic-legacy-brand-blush/30",children:_.jsxs("div",{className:"flex flex-col items-center gap-6 text-center",children:[_.jsx("div",{className:"flex h-16 w-16 items-center justify-center rounded-2xl bg-gradient-to-br from-semantic-accent-cta/20 to-semantic-legacy-brand-cocoa/20 shadow-lg ring-1 ring-semantic-accent-cta/30",children:"success"===r?_.jsx(Y,{className:"h-8 w-8 text-semantic-legacy-brand-cocoa"}):_.jsx(B,{className:"h-8 w-8 text-semantic-legacy-brand-cocoa"})}),_.jsx("div",{className:"space-y-2",children:"success"===r?_.jsxs(_.Fragment,{children:[_.jsx("h3",{className:"font-heading text-3xl font-bold text-semantic-text-primary md:text-4xl",children:"You\\'re in! "}),_.jsx("p",{className:"text-lg text-semantic-text-primary/80",children:"Welcome to the family"})]}):_.jsxs(_.Fragment,{children:[_.jsxs("h3",{className:"font-heading text-3xl font-bold text-semantic-text-primary md:text-4xl",children:["Get ",_.jsx("span",{className:"bg-gradient-to-r from-semantic-legacy-brand-cocoa to-semantic-accent-cta bg-clip-text text-transparent",children:"10% off"})," your first order"]}),_.jsx("p",{className:"text-base text-semantic-text-primary/70",children:"Join for exclusive creator tutorials, drops, and early access."})]})}),"success"===r?_.jsxs("div",{className:"w-full max-w-md space-y-4",children:[_.jsxs("div",{onClick:()=>{(async()=>{try{await navigator.clipboard.writeText(fo),o(!0),window.setTimeout(()=>o(!1),2e3)}catch{o(!1)}})()},className:"group relative cursor-pointer rounded-2xl border-2 border-dashed border-semantic-accent-cta/40 bg-gradient-to-br from-semantic-legacy-brand-blush/30 to-semantic-accent-cta/10 p-6 transition-all hover:border-semantic-accent-cta/60 hover:shadow-lg active:scale-[0.98]",children:[_.jsx("div",{className:"flex items-center justify-center gap-3",children:_.jsx("span",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-semantic-text-primary/60",children:"Your code"})}),_.jsx("div",{className:"mt-3 flex items-center justify-center gap-2",children:_.jsxs("span",{className:"font-heading text-2xl font-bold tracking-wider text-semantic-legacy-brand-cocoa",children:[" ",fo," "]})}),_.jsx("div",{className:"mt-3 flex items-center justify-center gap-2 text-sm font-semibold text-semantic-accent-cta",children:a?_.jsxs(_.Fragment,{children:[_.jsx(U,{className:"h-4 w-4"}),_.jsx("span",{children:"Copied!"})]}):_.jsxs(_.Fragment,{children:[_.jsx(z,{className:"h-4 w-4"}),_.jsx("span",{children:"Tap to copy"})]})})]}),i?_.jsx("p",{className:"text-sm text-semantic-text-primary/70",children:i}):null,_.jsxs("p",{className:"text-sm text-semantic-text-primary/80",children:["Use at checkout for ",_.jsx("span",{className:"font-semibold",children:"10% off"})," your first order."]})]}):_.jsxs("form",{className:"w-full max-w-md space-y-4","aria-label":"Newsletter signup",onSubmit:async r=>{r.preventDefault();const i=e.trim();if(i)try{n("loading"),s(null);const e=await fetch("/api/newsletter/subscribe",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({email:i,source:"email-capture-band"})});if(!e.ok){const t=await e.text().catch(()=>"");throw new Error(t||`Request failed (${e.status})`)}const r=await e.json().catch(()=>null);localStorage.setItem(po,"1"),n("success"),s(r?.created?"Thanks  you're on the list.":"You're already on the list."),t("")}catch{n("error"),s("Couldn't subscribe right now. Please try again.")}},children:[_.jsxs("div",{className:"relative",children:[_.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:_.jsx(H,{className:"h-5 w-5 text-semantic-text-primary/40"})}),_.jsx("input",{id:"landing-email",type:"email",required:!0,value:e,onChange:e=>t(e.target.value),disabled:"loading"===r,className:"w-full rounded-2xl border-2 border-semantic-legacy-brand-blush/40 bg-white py-4 pl-12 pr-4 text-sm outline-none transition-all focus:border-semantic-accent-cta/60 focus:ring-4 focus:ring-semantic-accent-cta/10 disabled:cursor-not-allowed disabled:opacity-70",placeholder:"Enter your email"})]}),i&&"error"===r?_.jsx("p",{className:"text-sm text-red-600","aria-live":"polite",children:i}):null,_.jsx("button",{type:"submit",disabled:"loading"===r,className:"group relative w-full overflow-hidden rounded-2xl bg-gradient-to-r from-semantic-legacy-brand-cocoa to-semantic-legacy-brand-cocoa/90 px-8 py-4 text-base font-semibold text-white shadow-lg transition-all hover:-translate-y-0.5 hover:shadow-xl active:translate-y-0 disabled:cursor-not-allowed disabled:opacity-70",children:_.jsx("span",{className:"relative flex items-center justify-center gap-2",children:"loading"===r?_.jsx(_.Fragment,{children:"Unlocking your discount"}):_.jsxs(_.Fragment,{children:["Unlock Your 10% Off",_.jsx(B,{className:"h-5 w-5 transition-transform group-hover:scale-110"})]})})})]}),_.jsxs("div",{className:"flex items-center gap-2 text-xs text-semantic-text-primary/60",children:[_.jsx(q,{className:"h-4 w-4","aria-hidden":!0}),_.jsx("span",{children:"Secure signup. No spam, unsubscribe anytime."})]})]})})})]})};function mo({supportEmail:e}){const[t,r]=b.useState(""),[n,i]=b.useState("idle"),[s,a]=b.useState(null),o=[{label:"Instagram",href:"https://www.instagram.com/lumelleuk/",icon:V},{label:"TikTok",href:"https://www.tiktok.com/@lumelleuk",icon:K}];return _.jsx("footer",{className:"border-t border-semantic-legacy-brand-blush/30 bg-gradient-to-b from-semantic-legacy-brand-blush/20 to-semantic-legacy-brand-blush/30 text-semantic-text-primary","data-sticky-buy-target":!0,children:_.jsxs("div",{className:"mx-auto max-w-6xl px-5 py-14 md:px-6",children:[_.jsxs("div",{className:"flex flex-col items-center space-y-4 text-center",children:[_.jsx("img",{src:"undefined"!=typeof window&&window.lumelleConfig?.logoUrl||"",alt:"Lumelle",className:"h-12 w-12"}),_.jsx("p",{className:"font-heading text-2xl font-semibold uppercase tracking-[0.28em]",children:"Lumelle"}),_.jsx("p",{className:"max-w-md text-sm text-semantic-text-primary/75",children:"Creator-grade shower caps that keep silk presses, curls, and braids flawless on camera."}),_.jsx("div",{className:"inline-flex items-center gap-2 rounded-full bg-white/80 px-3 py-1 text-[11px] font-semibold uppercase tracking-[0.22em] text-semantic-text-primary shadow-soft ring-1 ring-semantic-accent-cta/50",children:"Made in UK  30-day returns"})]}),_.jsxs("div",{className:"mt-16 grid gap-x-16 gap-y-12 grid-cols-2 lg:grid-cols-3",children:[_.jsx("div",{className:"space-y-4 text-center",children:_.jsxs("div",{className:"grid grid-cols-1 gap-3 text-sm text-semantic-text-primary/80",children:[_.jsxs(C,{to:"/product/shower-cap",className:"group inline-flex items-center justify-center gap-2 transition-all hover:text-semantic-text-primary",children:[_.jsx(Z,{className:"h-4 w-4 transition-transform group-hover:scale-110"}),_.jsx("span",{children:"Shop"})]}),_.jsxs(C,{to:"/brand-story",className:"group inline-flex items-center justify-center gap-2 transition-all hover:text-semantic-text-primary",children:[_.jsx(D,{className:"h-4 w-4 transition-transform group-hover:scale-110"}),_.jsx("span",{children:"Brand Story"})]}),_.jsxs(C,{to:"/blog",className:"group inline-flex items-center justify-center gap-2 transition-all hover:text-semantic-text-primary",children:[_.jsx(D,{className:"h-4 w-4 transition-transform group-hover:scale-110"}),_.jsx("span",{children:"Blog"})]})]})}),_.jsx("div",{className:"space-y-4 text-center",children:_.jsxs("div",{className:"grid grid-cols-1 gap-3 text-sm text-semantic-text-primary/80",children:[_.jsxs(C,{to:"/faq",className:"group inline-flex items-center justify-center gap-2 transition-all hover:text-semantic-text-primary",children:[_.jsx(W,{className:"h-4 w-4 transition-transform group-hover:scale-110"}),_.jsx("span",{children:"FAQ"})]}),_.jsxs(C,{to:"/shipping",className:"group inline-flex items-center justify-center gap-2 transition-all hover:text-semantic-text-primary",children:[_.jsx(J,{className:"h-4 w-4 transition-transform group-hover:scale-110"}),_.jsx("span",{children:"Shipping & Returns"})]}),_.jsxs("a",{href:`mailto:${e}`,className:"group inline-flex items-center justify-center gap-2 transition-all hover:text-semantic-text-primary",children:[_.jsx(H,{className:"h-4 w-4 transition-transform group-hover:scale-110"}),_.jsx("span",{children:"Contact"})]})]})}),_.jsxs("div",{className:"col-span-2 space-y-4 text-center lg:col-span-1 lg:text-left",children:[_.jsxs("form",{onSubmit:async e=>{e.preventDefault();const n=t.trim();if(n){i("loading"),a(null);try{const e=await fetch("/api/newsletter/subscribe",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({email:n,source:"footer"})});if(!e.ok){const t=await e.text().catch(()=>"");throw new Error(t||`Request failed (${e.status})`)}const t=await e.json().catch(()=>null);i("success"),a(t?.created?"Thanks  youre on the list.":"Youre already on the list."),r("")}catch{i("error"),a("Couldnt subscribe right now. Please try again.")}}},"aria-label":"Newsletter signup",className:"w-full max-w-sm mx-auto lg:mx-0",children:[_.jsxs("div",{className:"flex items-center gap-2 rounded-full border border-semantic-accent-cta/70 bg-white/85 px-3 py-1.5 text-sm font-semibold text-semantic-text-primary shadow-soft transition-shadow focus-within:shadow-md",children:[_.jsx("input",{id:"footer-newsletter-email",type:"email",inputMode:"email",autoComplete:"email",required:!0,value:t,onChange:e=>r(e.target.value),placeholder:"Email for updates",className:"w-full bg-transparent text-sm font-semibold text-semantic-text-primary outline-none placeholder:text-semantic-text-primary/50"}),_.jsxs("button",{type:"submit",disabled:"loading"===n,className:"inline-flex shrink-0 items-center gap-1.5 rounded-full bg-semantic-legacy-brand-cocoa px-3 py-1 text-xs font-semibold text-white shadow-soft transition-all hover:-translate-y-0.5 hover:shadow-md active:translate-y-0 disabled:cursor-not-allowed disabled:opacity-60",children:["loading"===n?"":"Join",_.jsx("span",{"aria-hidden":!0,className:"text-xs",children:""})]})]}),s?_.jsx("p",{className:"mt-2 text-xs "+("error"===n?"text-red-600":"text-semantic-text-primary/70"),"aria-live":"polite",children:s}):null]}),_.jsx("div",{className:"flex items-center justify-center gap-3 text-sm text-semantic-text-primary/80 lg:justify-start",children:o.map(({label:e,href:t,icon:r})=>_.jsxs("a",{href:t,target:"_blank",rel:"noreferrer",className:"inline-flex h-10 w-10 items-center justify-center rounded-full border border-semantic-accent-cta/50 bg-white/85 text-semantic-text-primary transition-all hover:-translate-y-0.5 hover:bg-semantic-accent-cta/20 hover:text-semantic-text-primary hover:shadow-md shadow-soft",children:[_.jsx(r,{className:"h-5 w-5","aria-hidden":!0}),_.jsx("span",{className:"sr-only",children:e})]},e))})]})]}),_.jsx("div",{className:"mt-12 border-t border-semantic-legacy-brand-blush/40 pt-8",children:_.jsxs("div",{className:"flex flex-col items-center justify-between gap-4 sm:flex-row",children:[_.jsxs("p",{className:"text-xs text-semantic-text-primary/60",children:[" ",(new Date).getFullYear()," Lumelle. All rights reserved."]}),_.jsxs("div",{className:"flex items-center gap-4 text-xs text-semantic-text-primary/60",children:[_.jsx(C,{to:"/terms",className:"transition hover:text-semantic-text-primary",children:"Terms"}),_.jsx("span",{children:""}),_.jsx(C,{to:"/privacy",className:"transition hover:text-semantic-text-primary",children:"Privacy"})]}),_.jsx("button",{onClick:()=>{window.scrollTo({top:0,behavior:"smooth"})},className:"rounded-full border border-semantic-legacy-brand-blush/60 bg-white/80 p-2 text-semantic-text-primary transition-all hover:bg-semantic-accent-cta/20 hover:-translate-y-0.5 shadow-sm hover:shadow-md","aria-label":"Back to top",children:_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"h-4 w-4",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 15.75l7.5-7.5 7.5 7.5"})})})]})})]})})}const vo=b.createContext({user:null}),yo=e=>{if(!e)return"";if(e.startsWith("http"))return e;const t={"/uploads/luminele/page9-image.webp":"page9-image.webp","/uploads/luminele/hero-desktop.webp":"hero-desktop.webp","/uploads/luminele/hero-main-960.webp":"hero-main-960.webp","/uploads/luminele/product-main.webp":"product-main.webp","/uploads/luminele/product-feature-01.webp":"product-feature-01.webp","/uploads/luminele/product-feature-02.webp":"product-feature-02.webp","/uploads/luminele/product-feature-03.webp":"product-feature-03.webp","/uploads/luminele/product-feature-04.webp":"product-feature-04.webp","/uploads/luminele/product-feature-05.webp":"product-feature-05.webp","/uploads/luminele/product-feature-06.webp":"product-feature-06.webp","/uploads/luminele/product-feature-07.webp":"product-feature-07.webp","/uploads/luminele/steam-shield-new.webp":"steam-shield-new.webp","/uploads/luminele/photo-for-page-3v2.webp":"photo-for-page-3v2.webp","/uploads/curler/1.webp":"curler-1.webp","/uploads/curler/3.webp":"curler-3.webp","/uploads/curler/5.webp":"curler-5.webp","/uploads/curler/6.webp":"curler-6.webp","/uploads/towel/Hero.webp":"towel-hero.webp","/images/avatar-shannon.jpg":"avatar-shannon.jpg","/images/avatar-rachel.jpg":"avatar-rachel.jpg","/images/avatar-randomlife.jpg":"avatar-randomlife.jpg","/images/avatar-jade.jpg":"avatar-jade.jpg","/images/avatar-maya.jpg":"avatar-maya.jpg"}[e];return t&&window.LUMELLE_IMAGES&&window.LUMELLE_IMAGES[t]?window.LUMELLE_IMAGES[t]:e};function _o(){const e=document.getElementById("react-hero");if(e){P.createRoot(e).render(_.jsx(Te,{config:{headline:I.hero.headline,subhead:I.hero.subhead,ctaLabel:I.hero.ctaLabel,ctaHref:I.hero.ctaHref,offerChip:I.hero.offerChip,image:yo(I.hero.image),bgImage:yo(I.hero.bgImage),gallery:I.hero.gallery?.map(e=>yo(e)),objectPosition:I.hero.objectPosition,objectFit:I.hero.objectFit,pill:I.hero.pill},socialProof:{tagline:I.socialProof.tagline,rating:I.socialProof.rating,ratingLabel:`${I.socialProof.rating.toFixed(1)} (${I.socialProof.count}+)`,trustCountLabel:I.socialProof.trustCountLabel,trustAvatars:I.socialProof.trustAvatars?.map(e=>yo(e))}}))}const t=document.getElementById("react-trust-bar");if(t){P.createRoot(t).render(_.jsx(Pe,{}))}const r=document.getElementById("react-benefits");if(r){P.createRoot(r).render(_.jsx(Ie,{slides:I.slides.map(e=>({...e,image:yo(e.image)}))}))}const n=document.getElementById("react-product-spotlight");if(n){const e=P.createRoot(n),t=I.pdpTeasers??[I.pdpTeaser];e.render(_.jsx(Re,{teasers:t.map(e=>({...e,image:yo(e.image)}))}))}const i=document.getElementById("react-reviews");if(i){P.createRoot(i).render(_.jsx(nt,{reviews:I.reviews,summary:I.socialProof}))}const s=document.getElementById("react-tiktok");if(s){P.createRoot(s).render(_.jsx(Le,{tiktoks:N.map(e=>({name:e.name,handle:e.handle,embedUrl:e.embedUrl,videoUrl:e.videoUrl}))}))}const a=document.getElementById("react-bundle-cards");if(a){P.createRoot(a).render(_.jsx(ho,{}))}const o=document.getElementById("react-faq");if(o){P.createRoot(o).render(_.jsx(Ve,{items:I.faq,hideCta:!0}))}const l=document.getElementById("react-cta");if(l){P.createRoot(l).render(_.jsx(oo,{}))}const c=document.getElementById("react-email");if(c){P.createRoot(c).render(_.jsx(go,{}))}const u=document.getElementById("react-footer");if(u){P.createRoot(u).render(_.jsx(mo,{supportEmail:"support@lumelle.com"}))}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",_o):_o();var bo="undefined"!=typeof window?window:void 0,wo="undefined"!=typeof globalThis?globalThis:bo;"undefined"==typeof self&&(wo.self=wo),"undefined"==typeof File&&(wo.File=function(){});var xo=Array.prototype,ko=xo.forEach,Eo=xo.indexOf,So=null==wo?void 0:wo.navigator,To=null==wo?void 0:wo.document,jo=null==wo?void 0:wo.location,Po=null==wo?void 0:wo.fetch,Oo=null!=wo&&wo.XMLHttpRequest&&"withCredentials"in new wo.XMLHttpRequest?wo.XMLHttpRequest:void 0,Io=null==wo?void 0:wo.AbortController,No=null==So?void 0:So.userAgent,Co=null!=bo?bo:{},Ro={DEBUG:!1,LIB_VERSION:"1.306.1"};function Ao(e,t,r,n,i,s,a){try{var o=e[s](a),l=o.value}catch(e){return void r(e)}o.done?t(l):Promise.resolve(l).then(n,i)}function $o(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var s=e.apply(t,r);function a(e){Ao(s,n,i,a,o,"next",e)}function o(e){Ao(s,n,i,a,o,"throw",e)}a(void 0)})}}function Lo(){return Lo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Lo.apply(null,arguments)}function Fo(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}var Mo=["amazonbot","amazonproductbot","app.hypefactors.com","applebot","archive.org_bot","awariobot","backlinksextendedbot","baiduspider","bingbot","bingpreview","chrome-lighthouse","dataforseobot","deepscan","duckduckbot","facebookexternal","facebookcatalog","http://yandex.com/bots","hubspot","ia_archiver","leikibot","linkedinbot","meta-externalagent","mj12bot","msnbot","nessus","petalbot","pinterest","prerender","rogerbot","screaming frog","sebot-wa","sitebulb","slackbot","slurp","trendictionbot","turnitin","twitterbot","vercel-screenshot","vercelbot","yahoo! slurp","yandexbot","zoombot","bot.htm","bot.php","(bot;","bot/","crawler","ahrefsbot","ahrefssiteaudit","semrushbot","siteauditbot","splitsignalbot","gptbot","oai-searchbot","chatgpt-user","perplexitybot","better uptime bot","sentryuptimebot","uptimerobot","headlesschrome","cypress","google-hoteladsverifier","adsbot-google","apis-google","duplexweb-google","feedfetcher-google","google favicon","google web preview","google-read-aloud","googlebot","googleother","google-cloudvertexbot","googleweblight","mediapartners-google","storebot-google","google-inspectiontool","bytespider"],Do=function(e,t){if(void 0===t&&(t=[]),!e)return!1;var r=e.toLowerCase();return Mo.concat(t).some(e=>{var t=e.toLowerCase();return-1!==r.indexOf(t)})},Uo=["$snapshot","$pageview","$pageleave","$set","survey dismissed","survey sent","survey shown","$identify","$groupidentify","$create_alias","$$client_ingestion_warning","$web_experiment_applied","$feature_enrollment_update","$feature_flag_called"];function zo(e,t){return-1!==e.indexOf(t)}var Bo=function(e){return e.trim()},Vo=function(e){return e.replace(/^\$/,"")},qo=Array.isArray,Ho=Object.prototype,Wo=Ho.hasOwnProperty,Go=Ho.toString,Ko=qo||function(e){return"[object Array]"===Go.call(e)},Jo=e=>"function"==typeof e,Yo=e=>e===Object(e)&&!Ko(e),Qo=e=>{if(Yo(e)){for(var t in e)if(Wo.call(e,t))return!1;return!0}return!1},Xo=e=>void 0===e,Zo=e=>"[object String]"==Go.call(e),el=e=>Zo(e)&&0===e.trim().length,tl=e=>null===e,rl=e=>Xo(e)||tl(e),nl=e=>"[object Number]"==Go.call(e),il=e=>"[object Boolean]"===Go.call(e),sl=e=>zo(Uo,e);function al(e){return null===e||"object"!=typeof e}function ol(e,t){return Object.prototype.toString.call(e)==="[object "+t+"]"}function ll(e){return!Xo(Event)&&function(e,t){try{return e instanceof t}catch(e){return!1}}(e,Event)}var cl=[!0,"true",1,"1","yes"],ul=e=>zo(cl,e),dl=[!1,"false",0,"0","no"];function hl(e,t,r,n,i){return t>r&&(n.warn("min cannot be greater than max."),t=r),nl(e)?e>r?(n.warn(" cannot be  greater than max: "+r+". Using max value instead."),r):e<t?(n.warn(" cannot be less than min: "+t+". Using min value instead."),t):e:(n.warn(" must be a number. using max or fallback. max: "+r+", fallback: "+i),hl(i||r,t,r,n))}class fl{constructor(e){this.t={},this.i=e.i,this.o=hl(e.bucketSize,0,100,e.h),this.m=hl(e.refillRate,0,this.o,e.h),this.S=hl(e.refillInterval,0,864e5,e.h)}$(e,t){var r=t-e.lastAccess,n=Math.floor(r/this.S);if(n>0){var i=n*this.m;e.tokens=Math.min(e.tokens+i,this.o),e.lastAccess=e.lastAccess+n*this.S}}consumeRateLimit(e){var t,r=Date.now(),n=String(e),i=this.t[n];return i?this.$(i,r):(i={tokens:this.o,lastAccess:r},this.t[n]=i),0===i.tokens||(i.tokens--,0===i.tokens&&(null==(t=this.i)||t.call(this,e)),0===i.tokens)}stop(){this.t={}}}var pl,gl,ml,vl=e=>e instanceof Error;function yl(e){var t=globalThis._posthogChunkIds;if(t){var r=Object.keys(t);return ml&&r.length===gl||(gl=r.length,ml=r.reduce((r,n)=>{pl||(pl={});var i=pl[n];if(i)r[i[0]]=i[1];else for(var s=e(n),a=s.length-1;a>=0;a--){var o=s[a],l=null==o?void 0:o.filename,c=t[n];if(l&&c){r[l]=c,pl[n]=[l,c];break}}return r},{})),ml}}class _l{constructor(e,t,r){void 0===r&&(r=[]),this.coercers=e,this.stackParser=t,this.modifiers=r}buildFromUnknown(e,t){void 0===t&&(t={});var r=t&&t.mechanism||{handled:!0,type:"generic"},n=this.buildCoercingContext(r,t,0).apply(e),i=this.buildParsingContext(),s=this.parseStacktrace(n,i);return{$exception_list:this.convertToExceptionList(s,r),$exception_level:"error"}}modifyFrames(e){var t=this;return $o(function*(){for(var r of e)r.stacktrace&&r.stacktrace.frames&&Ko(r.stacktrace.frames)&&(r.stacktrace.frames=yield t.applyModifiers(r.stacktrace.frames));return e})()}coerceFallback(e){var t;return{type:"Error",value:"Unknown error",stack:null==(t=e.syntheticException)?void 0:t.stack,synthetic:!0}}parseStacktrace(e,t){var r,n;return null!=e.cause&&(r=this.parseStacktrace(e.cause,t)),""!=e.stack&&null!=e.stack&&(n=this.applyChunkIds(this.stackParser(e.stack,e.synthetic?1:0),t.chunkIdMap)),Lo({},e,{cause:r,stack:n})}applyChunkIds(e,t){return e.map(e=>(e.filename&&t&&(e.chunk_id=t[e.filename]),e))}applyCoercers(e,t){for(var r of this.coercers)if(r.match(e))return r.coerce(e,t);return this.coerceFallback(t)}applyModifiers(e){var t=this;return $o(function*(){var r=e;for(var n of t.modifiers)r=yield n(r);return r})()}convertToExceptionList(e,t){var r,n,i,s={type:e.type,value:e.value,mechanism:{type:null!==(r=t.type)&&void 0!==r?r:"generic",handled:null===(n=t.handled)||void 0===n||n,synthetic:null!==(i=e.synthetic)&&void 0!==i&&i}};e.stack&&(s.stacktrace={type:"raw",frames:e.stack});var a=[s];return null!=e.cause&&a.push(...this.convertToExceptionList(e.cause,Lo({},t,{handled:!0}))),a}buildParsingContext(){return{chunkIdMap:yl(this.stackParser)}}buildCoercingContext(e,t,r){void 0===r&&(r=0);var n=(r,n)=>{if(n<=4){var i=this.buildCoercingContext(e,t,n);return this.applyCoercers(r,i)}};return Lo({},t,{syntheticException:0==r?t.syntheticException:void 0,mechanism:e,apply:e=>n(e,r),next:e=>n(e,r+1)})}}var bl="?";function wl(e,t,r,n,i){var s={platform:e,filename:t,function:"<anonymous>"===r?bl:r,in_app:!0};return Xo(n)||(s.lineno=n),Xo(i)||(s.colno=i),s}var xl=(e,t)=>{var r=-1!==e.indexOf("safari-extension"),n=-1!==e.indexOf("safari-web-extension");return r||n?[-1!==e.indexOf("@")?e.split("@")[0]:bl,r?"safari-extension:"+t:"safari-web-extension:"+t]:[e,t]},kl=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,El=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,Sl=/\((\S*)(?::(\d+))(?::(\d+))\)/,Tl=(e,t)=>{var r=kl.exec(e);if(r){var[,n,i,s]=r;return wl(t,n,bl,+i,+s)}var a=El.exec(e);if(a){if(a[2]&&0===a[2].indexOf("eval")){var o=Sl.exec(a[2]);o&&(a[2]=o[1],a[3]=o[2],a[4]=o[3])}var[l,c]=xl(a[1]||bl,a[2]);return wl(t,c,l,a[3]?+a[3]:void 0,a[4]?+a[4]:void 0)}},jl=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,Pl=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,Ol=(e,t)=>{var r=jl.exec(e);if(r){if(r[3]&&r[3].indexOf(" > eval")>-1){var n=Pl.exec(r[3]);n&&(r[1]=r[1]||"eval",r[3]=n[1],r[4]=n[2],r[5]="")}var i=r[3],s=r[1]||bl;return[s,i]=xl(s,i),wl(t,i,s,r[4]?+r[4]:void 0,r[5]?+r[5]:void 0)}},Il=/\(error: (.*)\)/;class Nl{match(e){return this.isDOMException(e)||this.isDOMError(e)}coerce(e,t){var r=Zo(e.stack);return{type:this.getType(e),value:this.getValue(e),stack:r?e.stack:void 0,cause:e.cause?t.next(e.cause):void 0,synthetic:!1}}getType(e){return this.isDOMError(e)?"DOMError":"DOMException"}getValue(e){var t=e.name||(this.isDOMError(e)?"DOMError":"DOMException");return e.message?t+": "+e.message:t}isDOMException(e){return ol(e,"DOMException")}isDOMError(e){return ol(e,"DOMError")}}class Cl{match(e){return(e=>e instanceof Error)(e)}coerce(e,t){return{type:this.getType(e),value:this.getMessage(e,t),stack:this.getStack(e),cause:e.cause?t.next(e.cause):void 0,synthetic:!1}}getType(e){return e.name||e.constructor.name}getMessage(e,t){var r=e.message;return r.error&&"string"==typeof r.error.message?String(r.error.message):String(r)}getStack(e){return e.stacktrace||e.stack||void 0}}class Rl{constructor(){}match(e){return ol(e,"ErrorEvent")&&null!=e.error}coerce(e,t){var r;return t.apply(e.error)||{type:"ErrorEvent",value:e.message,stack:null==(r=t.syntheticException)?void 0:r.stack,synthetic:!0}}}var Al=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;class $l{match(e){return"string"==typeof e}coerce(e,t){var r,[n,i]=this.getInfos(e);return{type:null!=n?n:"Error",value:null!=i?i:e,stack:null==(r=t.syntheticException)?void 0:r.stack,synthetic:!0}}getInfos(e){var t="Error",r=e,n=e.match(Al);return n&&(t=n[1],r=n[2]),[t,r]}}var Ll=["fatal","error","warning","log","info","debug"];function Fl(e,t){void 0===t&&(t=40);var r=Object.keys(e);if(r.sort(),!r.length)return"[object has no keys]";for(var n=r.length;n>0;n--){var i=r.slice(0,n).join(", ");if(!(i.length>t))return n===r.length||i.length<=t?i:i.slice(0,t)+"..."}return""}class Ml{match(e){return"object"==typeof e&&null!==e}coerce(e,t){var r,n=this.getErrorPropertyFromObject(e);return n?t.apply(n):{type:this.getType(e),value:this.getValue(e),stack:null==(r=t.syntheticException)?void 0:r.stack,level:this.isSeverityLevel(e.level)?e.level:"error",synthetic:!0}}getType(e){return ll(e)?e.constructor.name:"Error"}getValue(e){if("name"in e&&"string"==typeof e.name){var t="'"+e.name+"' captured as exception";return"message"in e&&"string"==typeof e.message&&(t+=" with message: '"+e.message+"'"),t}if("message"in e&&"string"==typeof e.message)return e.message;var r=this.getObjectClassName(e);return(r&&"Object"!==r?"'"+r+"'":"Object")+" captured as exception with keys: "+Fl(e)}isSeverityLevel(e){return Zo(e)&&!el(e)&&Ll.indexOf(e)>=0}getErrorPropertyFromObject(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)){var r=e[t];if(vl(r))return r}}getObjectClassName(e){try{var t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch(e){return}}}class Dl{match(e){return ll(e)}coerce(e,t){var r,n=e.constructor.name;return{type:n,value:n+" captured as exception with keys: "+Fl(e),stack:null==(r=t.syntheticException)?void 0:r.stack,synthetic:!0}}}class Ul{match(e){return al(e)}coerce(e,t){var r;return{type:"Error",value:"Primitive value captured as exception: "+String(e),stack:null==(r=t.syntheticException)?void 0:r.stack,synthetic:!0}}}class zl{match(e){return ol(e,"PromiseRejectionEvent")}coerce(e,t){var r,n=this.getUnhandledRejectionReason(e);return al(n)?{type:"UnhandledRejection",value:"Non-Error promise rejection captured with value: "+String(n),stack:null==(r=t.syntheticException)?void 0:r.stack,synthetic:!0}:t.apply(n)}getUnhandledRejectionReason(e){if(al(e))return e;try{if("reason"in e)return e.reason;if("detail"in e&&"reason"in e.detail)return e.detail.reason}catch(e){}return e}}var Bl=function(e,t){var{debugEnabled:r}=void 0===t?{}:t,n={k:function(t){if(bo&&(Ro.DEBUG||Co.POSTHOG_DEBUG||r)&&!Xo(bo.console)&&bo.console){for(var n=("__rrweb_original__"in bo.console[t]?bo.console[t].__rrweb_original__:bo.console[t]),i=arguments.length,s=new Array(i>1?i-1:0),a=1;a<i;a++)s[a-1]=arguments[a];n(e,...s)}},info:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];n.k("log",...t)},warn:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];n.k("warn",...t)},error:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];n.k("error",...t)},critical:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];console.error(e,...r)},uninitializedWarning:e=>{n.error("You must initialize PostHog before calling "+e)},createLogger:(t,r)=>Bl(e+" "+t,r)};return n},Vl=Bl("[PostHog.js]"),ql=Vl.createLogger,Hl=ql("[ExternalScriptsLoader]"),Wl=(e,t,r)=>{if(e.config.disable_external_dependency_loading)return Hl.warn(t+" was requested but loading of external scripts is disabled."),r("Loading of external scripts is disabled");var n=null==To?void 0:To.querySelectorAll("script");if(n)for(var i,s=function(){if(n[a].src===t){var e=n[a];return e.__posthog_loading_callback_fired?{v:r()}:(e.addEventListener("load",t=>{e.__posthog_loading_callback_fired=!0,r(void 0,t)}),e.onerror=e=>r(e),{v:void 0})}},a=0;a<n.length;a++)if(i=s())return i.v;var o=()=>{if(!To)return r("document not found");var n=To.createElement("script");if(n.type="text/javascript",n.crossOrigin="anonymous",n.src=t,n.onload=e=>{n.__posthog_loading_callback_fired=!0,r(void 0,e)},n.onerror=e=>r(e),e.config.prepare_external_dependency_script&&(n=e.config.prepare_external_dependency_script(n)),!n)return r("prepare_external_dependency_script returned null");var i,s=To.querySelectorAll("body > script");s.length>0?null==(i=s[0].parentNode)||i.insertBefore(n,s[0]):To.body.appendChild(n)};null!=To&&To.body?o():null==To||To.addEventListener("DOMContentLoaded",o)};Co.__PosthogExtensions__=Co.__PosthogExtensions__||{},Co.__PosthogExtensions__.loadExternalDependency=(e,t,r)=>{var n="/static/"+t+".js?v="+e.version;if("remote-config"===t&&(n="/array/"+e.config.token+"/config.js"),"toolbar"===t){var i=3e5;n=n+"&t="+Math.floor(Date.now()/i)*i}var s=e.requestRouter.endpointFor("assets",n);Wl(e,s,r)},Co.__PosthogExtensions__.loadSiteApp=(e,t,r)=>{var n=e.requestRouter.endpointFor("api",t);Wl(e,n,r)};var Gl={};function Kl(e,t,r){if(Ko(e))if(ko&&e.forEach===ko)e.forEach(t,r);else if("length"in e&&e.length===+e.length)for(var n=0,i=e.length;n<i;n++)if(n in e&&t.call(r,e[n],n)===Gl)return}function Jl(e,t,r){if(!rl(e)){if(Ko(e))return Kl(e,t,r);if((e=>e instanceof FormData)(e)){for(var n of e.entries())if(t.call(r,n[1],n[0])===Gl)return}else for(var i in e)if(Wo.call(e,i)&&t.call(r,e[i],i)===Gl)return}}var Yl=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return Kl(r,function(t){for(var r in t)void 0!==t[r]&&(e[r]=t[r])}),e},Ql=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return Kl(r,function(t){Kl(t,function(t){e.push(t)})}),e};function Xl(e){for(var t=Object.keys(e),r=t.length,n=new Array(r);r--;)n[r]=[t[r],e[t[r]]];return n}var Zl=function(e){try{return e()}catch(e){return}},ec=function(e){return function(){try{for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return e.apply(this,r)}catch(e){Vl.critical("Implementation error. Please turn on debug mode and open a ticket on https://app.posthog.com/home#panel=support%3Asupport%3A."),Vl.critical(e)}}},tc=function(e){var t={};return Jl(e,function(e,r){(Zo(e)&&e.length>0||nl(e))&&(t[r]=e)}),t};var rc=["herokuapp.com","vercel.app","netlify.app"];function nc(e){var t=null==e?void 0:e.hostname;if(!Zo(t))return!1;var r=t.split(".").slice(-2).join(".");for(var n of rc)if(r===n)return!1;return!0}function ic(e,t){for(var r=0;r<e.length;r++)if(t(e[r]))return e[r]}function sc(e,t,r,n){var{capture:i=!1,passive:s=!0}=null!=n?n:{};null==e||e.addEventListener(t,r,{capture:i,passive:s})}var ac="$people_distinct_id",oc="__alias",lc="__timers",cc="$autocapture_disabled_server_side",uc="$heatmaps_enabled_server_side",dc="$exception_capture_enabled_server_side",hc="$error_tracking_suppression_rules",fc="$error_tracking_capture_extension_exceptions",pc="$web_vitals_enabled_server_side",gc="$dead_clicks_enabled_server_side",mc="$web_vitals_allowed_metrics",vc="$session_recording_remote_config",yc="$sesid",_c="$session_is_sampled",bc="$enabled_feature_flags",wc="$early_access_features",xc="$feature_flag_details",kc="$stored_person_properties",Ec="$stored_group_properties",Sc="$surveys",Tc="$surveys_activated",jc="$flag_call_reported",Pc="$user_state",Oc="$client_session_props",Ic="$capture_rate_limit",Nc="$initial_campaign_params",Cc="$initial_referrer_info",Rc="$initial_person_info",Ac="$epp",$c="__POSTHOG_TOOLBAR__",Lc="$posthog_cookieless",Fc=[ac,oc,"__cmpns",lc,"$session_recording_enabled_server_side",uc,yc,bc,hc,Pc,wc,xc,Ec,kc,Sc,jc,Oc,Ic,Nc,Cc,Ac,Rc];function Mc(e){return e instanceof Element&&(e.id===$c||!(null==e.closest||!e.closest(".toolbar-global-fade-container")))}function Dc(e){return!!e&&1===e.nodeType}function Uc(e,t){return!!e&&!!e.tagName&&e.tagName.toLowerCase()===t.toLowerCase()}function zc(e){return!!e&&3===e.nodeType}function Bc(e){return!!e&&11===e.nodeType}function Vc(e){return e?Bo(e).split(/\s+/):[]}function qc(e){var t=null==bo?void 0:bo.location.href;return!!(t&&e&&e.some(e=>t.match(e)))}function Hc(e){var t="";switch(typeof e.className){case"string":t=e.className;break;case"object":t=(e.className&&"baseVal"in e.className?e.className.baseVal:null)||e.getAttribute("class")||"";break;default:t=""}return Vc(t)}function Wc(e){return rl(e)?null:Bo(e).split(/(\s+)/).filter(e=>uu(e)).join("").replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255)}function Gc(e){var t="";return ru(e)&&!nu(e)&&e.childNodes&&e.childNodes.length&&Jl(e.childNodes,function(e){var r;zc(e)&&e.textContent&&(t+=null!==(r=Wc(e.textContent))&&void 0!==r?r:"")}),Bo(t)}function Kc(e){return Xo(e.target)?e.srcElement||null:null!=(t=e.target)&&t.shadowRoot?e.composedPath()[0]||null:e.target||null;var t}var Jc=["a","button","form","input","select","textarea","label"];function Yc(e,t){if(Xo(t))return!0;var r,n=function(e){if(t.some(t=>e.matches(t)))return{v:!0}};for(var i of e)if(r=n(i))return r.v;return!1}function Qc(e){var t=e.parentNode;return!(!t||!Dc(t))&&t}var Xc=["next","previous","prev",">","<"],Zc=[".ph-no-rageclick",".ph-no-capture"];var eu=e=>!e||Uc(e,"html")||!Dc(e),tu=(e,t)=>{if(!bo||eu(e))return{parentIsUsefulElement:!1,targetElementList:[]};for(var r=!1,n=[e],i=e;i.parentNode&&!Uc(i,"body");)if(Bc(i.parentNode))n.push(i.parentNode.host),i=i.parentNode.host;else{var s=Qc(i);if(!s)break;if(t||Jc.indexOf(s.tagName.toLowerCase())>-1)r=!0;else{var a=bo.getComputedStyle(s);a&&"pointer"===a.getPropertyValue("cursor")&&(r=!0)}n.push(s),i=s}return{parentIsUsefulElement:r,targetElementList:n}};function ru(e){for(var t=e;t.parentNode&&!Uc(t,"body");t=t.parentNode){var r=Hc(t);if(zo(r,"ph-sensitive")||zo(r,"ph-no-capture"))return!1}if(zo(Hc(e),"ph-include"))return!0;var n=e.type||"";if(Zo(n))switch(n.toLowerCase()){case"hidden":case"password":return!1}var i=e.name||e.id||"";return!Zo(i)||!/^cc|cardnum|ccnum|creditcard|csc|cvc|cvv|exp|pass|pwd|routing|seccode|securitycode|securitynum|socialsec|socsec|ssn/i.test(i.replace(/[^a-zA-Z0-9]/g,""))}function nu(e){return!!(Uc(e,"input")&&!["button","checkbox","submit","reset"].includes(e.type)||Uc(e,"select")||Uc(e,"textarea")||"true"===e.getAttribute("contenteditable"))}var iu="(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11})",su=new RegExp("^(?:"+iu+")$"),au=new RegExp(iu),ou="\\d{3}-?\\d{2}-?\\d{4}",lu=new RegExp("^("+ou+")$"),cu=new RegExp("("+ou+")");function uu(e,t){if(void 0===t&&(t=!0),rl(e))return!1;if(Zo(e)){if(e=Bo(e),(t?su:au).test((e||"").replace(/[- ]/g,"")))return!1;if((t?lu:cu).test(e))return!1}return!0}function du(e){var t=Gc(e);return uu(t=(t+" "+hu(e)).trim())?t:""}function hu(e){var t="";return e&&e.childNodes&&e.childNodes.length&&Jl(e.childNodes,function(e){var r;if(e&&"span"===(null==(r=e.tagName)?void 0:r.toLowerCase()))try{var n=Gc(e);t=(t+" "+n).trim(),e.childNodes&&e.childNodes.length&&(t=(t+" "+hu(e)).trim())}catch(e){Vl.error("[AutoCapture]",e)}}),t}function fu(e){return function(e){var t=e.map(e=>{var t,r,n="";if(e.tag_name&&(n+=e.tag_name),e.attr_class)for(var i of(e.attr_class.sort(),e.attr_class))n+="."+i.replace(/"/g,"");var s=Lo({},e.text?{text:e.text}:{},{"nth-child":null!==(t=e.nth_child)&&void 0!==t?t:0,"nth-of-type":null!==(r=e.nth_of_type)&&void 0!==r?r:0},e.href?{href:e.href}:{},e.attr_id?{attr_id:e.attr_id}:{},e.attributes),a={};return Xl(s).sort((e,t)=>{var[r]=e,[n]=t;return r.localeCompare(n)}).forEach(e=>{var[t,r]=e;return a[pu(t.toString())]=pu(r.toString())}),(n+=":")+Xl(a).map(e=>{var[t,r]=e;return t+'="'+r+'"'}).join("")});return t.join(";")}(function(e){return e.map(e=>{var t,r,n={text:null==(t=e.$el_text)?void 0:t.slice(0,400),tag_name:e.tag_name,href:null==(r=e.attr__href)?void 0:r.slice(0,2048),attr_class:gu(e),attr_id:e.attr__id,nth_child:e.nth_child,nth_of_type:e.nth_of_type,attributes:{}};return Xl(e).filter(e=>{var[t]=e;return 0===t.indexOf("attr__")}).forEach(e=>{var[t,r]=e;return n.attributes[t]=r}),n})}(e))}function pu(e){return e.replace(/"|\\"/g,'\\"')}function gu(e){var t=e.attr__class;return t?Ko(t)?t:Vc(t):void 0}class mu{constructor(e){this.disabled=!1===e;var t=Yo(e)?e:{};this.thresholdPx=t.threshold_px||30,this.timeoutMs=t.timeout_ms||1e3,this.clickCount=t.click_count||3,this.clicks=[]}isRageClick(e,t,r){if(this.disabled)return!1;var n=this.clicks[this.clicks.length-1];if(n&&Math.abs(e-n.x)+Math.abs(t-n.y)<this.thresholdPx&&r-n.timestamp<this.timeoutMs){if(this.clicks.push({x:e,y:t,timestamp:r}),this.clicks.length===this.clickCount)return!0}else this.clicks=[{x:e,y:t,timestamp:r}];return!1}}var vu="$copy_autocapture",yu=function(e){return e.GZipJS="gzip-js",e.Base64="base64",e}({}),_u=e=>{var t=null==To?void 0:To.createElement("a");return Xo(t)?null:(t.href=e,t)},bu=function(e,t){for(var r,n=((e.split("#")[0]||"").split(/\?(.*)/)[1]||"").replace(/^\?+/g,"").split("&"),i=0;i<n.length;i++){var s=n[i].split("=");if(s[0]===t){r=s;break}}if(!Ko(r)||r.length<2)return"";var a=r[1];try{a=decodeURIComponent(a)}catch(e){Vl.error("Skipping decoding for malformed query param: "+a)}return a.replace(/\+/g," ")},wu=function(e,t,r){if(!e||!t||!t.length)return e;for(var n=e.split("#"),i=n[0]||"",s=n[1],a=i.split("?"),o=a[1],l=a[0],c=(o||"").split("&"),u=[],d=0;d<c.length;d++){var h=c[d].split("=");Ko(h)&&(t.includes(h[0])?u.push(h[0]+"="+r):u.push(c[d]))}var f=l;return null!=o&&(f+="?"+u.join("&")),null!=s&&(f+="#"+s),f},xu=function(e,t){var r=e.match(new RegExp(t+"=([^&]*)"));return r?r[1]:null},ku=ql("[AutoCapture]");function Eu(e,t){return t.length>e?t.slice(0,e)+"...":t}function Su(e){if(e.previousElementSibling)return e.previousElementSibling;var t=e;do{t=t.previousSibling}while(t&&!Dc(t));return t}function Tu(e,t){for(var r,n,{e:i,maskAllElementAttributes:s,maskAllText:a,elementAttributeIgnoreList:o,elementsChainAsString:l}=t,c=[e],u=e;u.parentNode&&!Uc(u,"body");)Bc(u.parentNode)?(c.push(u.parentNode.host),u=u.parentNode.host):(c.push(u.parentNode),u=u.parentNode);var d,h=[],f={},p=!1,g=!1;if(Jl(c,e=>{var t=ru(e);"a"===e.tagName.toLowerCase()&&(p=e.getAttribute("href"),p=t&&p&&uu(p)&&p),zo(Hc(e),"ph-no-capture")&&(g=!0),h.push(function(e,t,r,n){var i=e.tagName.toLowerCase(),s={tag_name:i};Jc.indexOf(i)>-1&&!r&&("a"===i.toLowerCase()||"button"===i.toLowerCase()?s.$el_text=Eu(1024,du(e)):s.$el_text=Eu(1024,Gc(e)));var a=Hc(e);a.length>0&&(s.classes=a.filter(function(e){return""!==e})),Jl(e.attributes,function(r){var i;if((!nu(e)||-1!==["name","id","class","aria-label"].indexOf(r.name))&&(null==n||!n.includes(r.name))&&!t&&uu(r.value)&&(i=r.name,!Zo(i)||"_ngcontent"!==i.substring(0,10)&&"_nghost"!==i.substring(0,7))){var a=r.value;"class"===r.name&&(a=Vc(a).join(" ")),s["attr__"+r.name]=Eu(1024,a)}});for(var o=1,l=1,c=e;c=Su(c);)o++,c.tagName===e.tagName&&l++;return s.nth_child=o,s.nth_of_type=l,s}(e,s,a,o));var r=function(e){if(!ru(e))return{};var t={};return Jl(e.attributes,function(e){if(e.name&&0===e.name.indexOf("data-ph-capture-attribute")){var r=e.name.replace("data-ph-capture-attribute-",""),n=e.value;r&&n&&uu(n)&&(t[r]=n)}}),t}(e);Yl(f,r)}),g)return{props:{},explicitNoCapture:g};if(a||("a"===e.tagName.toLowerCase()||"button"===e.tagName.toLowerCase()?h[0].$el_text=du(e):h[0].$el_text=Gc(e)),p){var m,v;h[0].attr__href=p;var y=null==(m=_u(p))?void 0:m.host,_=null==bo||null==(v=bo.location)?void 0:v.host;y&&_&&y!==_&&(d=p)}return{props:Yl({$event_type:i.type,$ce_version:1},l?{}:{$elements:h},{$elements_chain:fu(h)},null!=(r=h[0])&&r.$el_text?{$el_text:null==(n=h[0])?void 0:n.$el_text}:{},d&&"click"===i.type?{$external_click_url:d}:{},f)}}class ju{constructor(e){this.P=!1,this.T=null,this.R=!1,this.instance=e,this.rageclicks=new mu(e.config.rageclick),this.C=null}get I(){var e,t,r=Yo(this.instance.config.autocapture)?this.instance.config.autocapture:{};return r.url_allowlist=null==(e=r.url_allowlist)?void 0:e.map(e=>new RegExp(e)),r.url_ignorelist=null==(t=r.url_ignorelist)?void 0:t.map(e=>new RegExp(e)),r}F(){if(this.isBrowserSupported()){if(bo&&To){var e=e=>{e=e||(null==bo?void 0:bo.event);try{this.M(e)}catch(bo){ku.error("Failed to capture event",bo)}};if(sc(To,"submit",e,{capture:!0}),sc(To,"change",e,{capture:!0}),sc(To,"click",e,{capture:!0}),this.I.capture_copied_text){var t=e=>{e=e||(null==bo?void 0:bo.event),this.M(e,vu)};sc(To,"copy",t,{capture:!0}),sc(To,"cut",t,{capture:!0})}}}else ku.info("Disabling Automatic Event Collection because this browser is not supported")}startIfEnabled(){this.isEnabled&&!this.P&&(this.F(),this.P=!0)}onRemoteConfig(e){e.elementsChainAsString&&(this.R=e.elementsChainAsString),this.instance.persistence&&this.instance.persistence.register({[cc]:!!e.autocapture_opt_out}),this.T=!!e.autocapture_opt_out,this.startIfEnabled()}setElementSelectors(e){this.C=e}getElementSelectors(e){var t,r=[];return null==(t=this.C)||t.forEach(t=>{var n=null==To?void 0:To.querySelectorAll(t);null==n||n.forEach(n=>{e===n&&r.push(t)})}),r}get isEnabled(){var e,t,r=null==(e=this.instance.persistence)?void 0:e.props[cc],n=this.T;if(tl(n)&&!il(r)&&!this.instance.O())return!1;var i=null!==(t=this.T)&&void 0!==t?t:!!r;return!!this.instance.config.autocapture&&!i}M(e,t){if(void 0===t&&(t="$autocapture"),this.isEnabled){var r,n=Kc(e);zc(n)&&(n=n.parentNode||null),"$autocapture"===t&&"click"===e.type&&e instanceof MouseEvent&&this.instance.config.rageclick&&null!=(r=this.rageclicks)&&r.isRageClick(e.clientX,e.clientY,e.timeStamp||(new Date).getTime())&&function(e,t){if(!bo||eu(e))return!1;var r,n,i;if(il(t)?(r=!!t&&Zc,n=void 0):(r=null!==(i=null==t?void 0:t.css_selector_ignorelist)&&void 0!==i?i:Zc,n=null==t?void 0:t.content_ignorelist),!1===r)return!1;var{targetElementList:s}=tu(e,!1);return!function(e,t){if(!1===e||Xo(e))return!1;var r;if(!0===e)r=Xc;else{if(!Ko(e))return!1;if(e.length>10)return Vl.error("[PostHog] content_ignorelist array cannot exceed 10 items. Use css_selector_ignorelist for more complex matching."),!1;r=e.map(e=>e.toLowerCase())}return t.some(e=>{var{safeText:t,ariaLabel:n}=e;return r.some(e=>t.includes(e)||n.includes(e))})}(n,s.map(e=>{var t;return{safeText:Gc(e).toLowerCase(),ariaLabel:(null==(t=e.getAttribute("aria-label"))?void 0:t.toLowerCase().trim())||""}}))&&!Yc(s,r)}(n,this.instance.config.rageclick)&&this.M(e,"$rageclick");var i=t===vu;if(n&&function(e,t,r,n,i){var s,a,o,l;if(void 0===r&&(r=void 0),!bo||eu(e))return!1;if(null!=(s=r)&&s.url_allowlist&&!qc(r.url_allowlist))return!1;if(null!=(a=r)&&a.url_ignorelist&&qc(r.url_ignorelist))return!1;if(null!=(o=r)&&o.dom_event_allowlist){var c=r.dom_event_allowlist;if(c&&!c.some(e=>t.type===e))return!1}var{parentIsUsefulElement:u,targetElementList:d}=tu(e,n);if(!function(e,t){var r=null==t?void 0:t.element_allowlist;if(Xo(r))return!0;var n,i=function(e){if(r.some(t=>e.tagName.toLowerCase()===t))return{v:!0}};for(var s of e)if(n=i(s))return n.v;return!1}(d,r))return!1;if(!Yc(d,null==(l=r)?void 0:l.css_selector_allowlist))return!1;var h=bo.getComputedStyle(e);if(h&&"pointer"===h.getPropertyValue("cursor")&&"click"===t.type)return!0;var f=e.tagName.toLowerCase();switch(f){case"html":return!1;case"form":return(i||["submit"]).indexOf(t.type)>=0;case"input":case"select":case"textarea":return(i||["change","click"]).indexOf(t.type)>=0;default:return u?(i||["click"]).indexOf(t.type)>=0:(i||["click"]).indexOf(t.type)>=0&&(Jc.indexOf(f)>-1||"true"===e.getAttribute("contenteditable"))}}(n,e,this.I,i,i?["copy","cut"]:void 0)){var{props:s,explicitNoCapture:a}=Tu(n,{e:e,maskAllElementAttributes:this.instance.config.mask_all_element_attributes,maskAllText:this.instance.config.mask_all_text,elementAttributeIgnoreList:this.I.element_attribute_ignorelist,elementsChainAsString:this.R});if(a)return!1;var o=this.getElementSelectors(n);if(o&&o.length>0&&(s.$element_selectors=o),t===vu){var l,c=Wc(null==bo||null==(l=bo.getSelection())?void 0:l.toString()),u=e.type||"clipboard";if(!c)return!1;s.$selected_content=c,s.$copy_type=u}return this.instance.capture(t,s),!0}}}isBrowserSupported(){return Jo(null==To?void 0:To.querySelectorAll)}}Math.trunc||(Math.trunc=function(e){return e<0?Math.ceil(e):Math.floor(e)}),Number.isInteger||(Number.isInteger=function(e){return nl(e)&&isFinite(e)&&Math.floor(e)===e});var Pu="0123456789abcdef";class Ou{constructor(e){if(this.bytes=e,16!==e.length)throw new TypeError("not 128-bit length")}static fromFieldsV7(e,t,r,n){if(!Number.isInteger(e)||!Number.isInteger(t)||!Number.isInteger(r)||!Number.isInteger(n)||e<0||t<0||r<0||n<0||e>0xffffffffffff||t>4095||r>1073741823||n>4294967295)throw new RangeError("invalid field value");var i=new Uint8Array(16);return i[0]=e/Math.pow(2,40),i[1]=e/Math.pow(2,32),i[2]=e/Math.pow(2,24),i[3]=e/Math.pow(2,16),i[4]=e/Math.pow(2,8),i[5]=e,i[6]=112|t>>>8,i[7]=t,i[8]=128|r>>>24,i[9]=r>>>16,i[10]=r>>>8,i[11]=r,i[12]=n>>>24,i[13]=n>>>16,i[14]=n>>>8,i[15]=n,new Ou(i)}toString(){for(var e="",t=0;t<this.bytes.length;t++)e=e+Pu.charAt(this.bytes[t]>>>4)+Pu.charAt(15&this.bytes[t]),3!==t&&5!==t&&7!==t&&9!==t||(e+="-");if(36!==e.length)throw new Error("Invalid UUIDv7 was generated");return e}clone(){return new Ou(this.bytes.slice(0))}equals(e){return 0===this.compareTo(e)}compareTo(e){for(var t=0;t<16;t++){var r=this.bytes[t]-e.bytes[t];if(0!==r)return Math.sign(r)}return 0}}class Iu{constructor(){this.A=0,this.D=0,this.j=new Ru}generate(){var e=this.generateOrAbort();if(Xo(e)){this.A=0;var t=this.generateOrAbort();if(Xo(t))throw new Error("Could not generate UUID after timestamp reset");return t}return e}generateOrAbort(){var e=Date.now();if(e>this.A)this.A=e,this.L();else{if(!(e+1e4>this.A))return;this.D++,this.D>4398046511103&&(this.A++,this.L())}return Ou.fromFieldsV7(this.A,Math.trunc(this.D/Math.pow(2,30)),this.D&Math.pow(2,30)-1,this.j.nextUint32())}L(){this.D=1024*this.j.nextUint32()+(1023&this.j.nextUint32())}}var Nu,Cu=e=>{if("undefined"!=typeof UUIDV7_DENY_WEAK_RNG&&UUIDV7_DENY_WEAK_RNG)throw new Error("no cryptographically strong RNG available");for(var t=0;t<e.length;t++)e[t]=65536*Math.trunc(65536*Math.random())+Math.trunc(65536*Math.random());return e};bo&&!Xo(bo.crypto)&&crypto.getRandomValues&&(Cu=e=>crypto.getRandomValues(e));class Ru{constructor(){this.N=new Uint32Array(8),this.U=1/0}nextUint32(){return this.U>=this.N.length&&(Cu(this.N),this.U=0),this.N[this.U++]}}var Au=()=>$u().toString(),$u=()=>(Nu||(Nu=new Iu)).generate(),Lu="",Fu=/[a-z0-9][a-z0-9-]+\.[a-z]{2,}$/i;var Mu={H:()=>!!To,B:function(e){Vl.error("cookieStore error: "+e)},q:function(e){if(To){try{for(var t=e+"=",r=To.cookie.split(";").filter(e=>e.length),n=0;n<r.length;n++){for(var i=r[n];" "==i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(t))return decodeURIComponent(i.substring(t.length,i.length))}}catch(e){}return null}},W:function(e){var t;try{t=JSON.parse(Mu.q(e))||{}}catch(e){}return t},G:function(e,t,r,n,i){if(To)try{var s="",a="",o=function(e,t){if(t){var r=function(e,t){if(void 0===t&&(t=To),Lu)return Lu;if(!t)return"";if(["localhost","127.0.0.1"].includes(e))return"";for(var r=e.split("."),n=Math.min(r.length,8),i="dmn_chk_"+Au();!Lu&&n--;){var s=r.slice(n).join("."),a=i+"=1;domain=."+s+";path=/";t.cookie=a+";max-age=3",t.cookie.includes(i)&&(t.cookie=a+";max-age=0",Lu=s)}return Lu}(e);if(!r){var n=(e=>{var t=e.match(Fu);return t?t[0]:""})(e);n!==r&&Vl.info("Warning: cookie subdomain discovery mismatch",n,r),r=n}return r?"; domain=."+r:""}return""}(To.location.hostname,n);if(r){var l=new Date;l.setTime(l.getTime()+24*r*60*60*1e3),s="; expires="+l.toUTCString()}i&&(a="; secure");var c=e+"="+encodeURIComponent(JSON.stringify(t))+s+"; SameSite=Lax; path=/"+o+a;return c.length>3686.4&&Vl.warn("cookieStore warning: large cookie, len="+c.length),To.cookie=c,c}catch(e){return}},V:function(e,t){if(null!=To&&To.cookie)try{Mu.G(e,"",-1,t)}catch(e){return}}},Du=null,Uu={H:function(){if(!tl(Du))return Du;var e=!0;if(Xo(bo))e=!1;else try{var t="__mplssupport__";Uu.G(t,"xyz"),'"xyz"'!==Uu.q(t)&&(e=!1),Uu.V(t)}catch(bo){e=!1}return e||Vl.error("localStorage unsupported; falling back to cookie store"),Du=e,e},B:function(e){Vl.error("localStorage error: "+e)},q:function(e){try{return null==bo?void 0:bo.localStorage.getItem(e)}catch(bo){Uu.B(bo)}return null},W:function(e){try{return JSON.parse(Uu.q(e))||{}}catch(e){}return null},G:function(e,t){try{null==bo||bo.localStorage.setItem(e,JSON.stringify(t))}catch(bo){Uu.B(bo)}},V:function(e){try{null==bo||bo.localStorage.removeItem(e)}catch(bo){Uu.B(bo)}}},zu=["distinct_id",yc,_c,Ac,Rc],Bu=Lo({},Uu,{W:function(e){try{var t={};try{t=Mu.W(e)||{}}catch(e){}var r=Yl(t,JSON.parse(Uu.q(e)||"{}"));return Uu.G(e,r),r}catch(e){}return null},G:function(e,t,r,n,i,s){try{Uu.G(e,t,void 0,void 0,s);var a={};zu.forEach(e=>{t[e]&&(a[e]=t[e])}),Object.keys(a).length&&Mu.G(e,a,r,n,i,s)}catch(e){Uu.B(e)}},V:function(e,t){try{null==bo||bo.localStorage.removeItem(e),Mu.V(e,t)}catch(bo){Uu.B(bo)}}}),Vu={},qu={H:function(){return!0},B:function(e){Vl.error("memoryStorage error: "+e)},q:function(e){return Vu[e]||null},W:function(e){return Vu[e]||null},G:function(e,t){Vu[e]=t},V:function(e){delete Vu[e]}},Hu=null,Wu={H:function(){if(!tl(Hu))return Hu;if(Hu=!0,Xo(bo))Hu=!1;else try{var e="__support__";Wu.G(e,"xyz"),'"xyz"'!==Wu.q(e)&&(Hu=!1),Wu.V(e)}catch(bo){Hu=!1}return Hu},B:function(e){Vl.error("sessionStorage error: ",e)},q:function(e){try{return null==bo?void 0:bo.sessionStorage.getItem(e)}catch(bo){Wu.B(bo)}return null},W:function(e){try{return JSON.parse(Wu.q(e))||null}catch(e){}return null},G:function(e,t){try{null==bo||bo.sessionStorage.setItem(e,JSON.stringify(t))}catch(bo){Wu.B(bo)}},V:function(e){try{null==bo||bo.sessionStorage.removeItem(e)}catch(bo){Wu.B(bo)}}},Gu=function(e){return e[e.PENDING=-1]="PENDING",e[e.DENIED=0]="DENIED",e[e.GRANTED=1]="GRANTED",e}({});class Ku{constructor(e){this._instance=e}get I(){return this._instance.config}get consent(){return this.J()?Gu.DENIED:this.K}isOptedOut(){return"always"===this.I.cookieless_mode||this.consent===Gu.DENIED||this.consent===Gu.PENDING&&(this.I.opt_out_capturing_by_default||"on_reject"===this.I.cookieless_mode)}isOptedIn(){return!this.isOptedOut()}isExplicitlyOptedOut(){return this.consent===Gu.DENIED}optInOut(e){this.Y.G(this.X,e?1:0,this.I.cookie_expiration,this.I.cross_subdomain_cookie,this.I.secure_cookie)}reset(){this.Y.V(this.X,this.I.cross_subdomain_cookie)}get X(){var{token:e,opt_out_capturing_cookie_prefix:t,consent_persistence_name:r}=this._instance.config;return r||(t?t+e:"__ph_opt_in_out_"+e)}get K(){var e=this.Y.q(this.X);return ul(e)?Gu.GRANTED:zo(dl,e)?Gu.DENIED:Gu.PENDING}get Y(){if(!this.Z){var e=this.I.opt_out_capturing_persistence_type;this.Z="localStorage"===e?Uu:Mu;var t="localStorage"===e?Mu:Uu;t.q(this.X)&&(this.Z.q(this.X)||this.optInOut(ul(t.q(this.X))),t.V(this.X,this.I.cross_subdomain_cookie))}return this.Z}J(){return!!this.I.respect_dnt&&!!ic([null==So?void 0:So.doNotTrack,null==So?void 0:So.msDoNotTrack,Co.doNotTrack],e=>ul(e))}}var Ju=ql("[Dead Clicks]"),Yu=()=>!0,Qu=e=>{var t,r=!(null==(t=e.instance.persistence)||!t.get_property(gc)),n=e.instance.config.capture_dead_clicks;return il(n)?n:!!Yo(n)||r};class Xu{get lazyLoadedDeadClicksAutocapture(){return this.tt}constructor(e,t,r){this.instance=e,this.isEnabled=t,this.onCapture=r,this.startIfEnabled()}onRemoteConfig(e){this.instance.persistence&&this.instance.persistence.register({[gc]:null==e?void 0:e.captureDeadClicks}),this.startIfEnabled()}startIfEnabled(){this.isEnabled(this)&&this.it(()=>{this.et()})}it(e){var t,r;null!=(t=Co.__PosthogExtensions__)&&t.initDeadClicksAutocapture&&e(),null==(r=Co.__PosthogExtensions__)||null==r.loadExternalDependency||r.loadExternalDependency(this.instance,"dead-clicks-autocapture",t=>{t?Ju.error("failed to load script",t):e()})}et(){var e;if(To){if(!this.tt&&null!=(e=Co.__PosthogExtensions__)&&e.initDeadClicksAutocapture){var t=Yo(this.instance.config.capture_dead_clicks)?this.instance.config.capture_dead_clicks:{};t.__onCapture=this.onCapture,this.tt=Co.__PosthogExtensions__.initDeadClicksAutocapture(this.instance,t),this.tt.start(To),Ju.info("starting...")}}else Ju.error("`document` not found. Cannot start.")}stop(){this.tt&&(this.tt.stop(),this.tt=void 0,Ju.info("stopping..."))}}var Zu=ql("[ExceptionAutocapture]");class ed{constructor(e){var t,r,n;this.rt=()=>{var e;if(bo&&this.isEnabled&&null!=(e=Co.__PosthogExtensions__)&&e.errorWrappingFunctions){var t=Co.__PosthogExtensions__.errorWrappingFunctions.wrapOnError,r=Co.__PosthogExtensions__.errorWrappingFunctions.wrapUnhandledRejection,n=Co.__PosthogExtensions__.errorWrappingFunctions.wrapConsoleError;try{!this.st&&this.I.capture_unhandled_errors&&(this.st=t(this.captureException.bind(this))),!this.nt&&this.I.capture_unhandled_rejections&&(this.nt=r(this.captureException.bind(this))),!this.ot&&this.I.capture_console_errors&&(this.ot=n(this.captureException.bind(this)))}catch(bo){Zu.error("failed to start",bo),this.lt()}}},this._instance=e,this.ut=!(null==(t=this._instance.persistence)||!t.props[dc]),this.I=this.ht(),this.dt=new fl({refillRate:null!==(r=this._instance.config.error_tracking.__exceptionRateLimiterRefillRate)&&void 0!==r?r:1,bucketSize:null!==(n=this._instance.config.error_tracking.__exceptionRateLimiterBucketSize)&&void 0!==n?n:10,refillInterval:1e4,h:Zu}),this.startIfEnabled()}ht(){var e=this._instance.config.capture_exceptions,t={capture_unhandled_errors:!1,capture_unhandled_rejections:!1,capture_console_errors:!1};return Yo(e)?t=Lo({},t,e):(Xo(e)?this.ut:e)&&(t=Lo({},t,{capture_unhandled_errors:!0,capture_unhandled_rejections:!0})),t}get isEnabled(){return this.I.capture_console_errors||this.I.capture_unhandled_errors||this.I.capture_unhandled_rejections}startIfEnabled(){this.isEnabled&&(Zu.info("enabled"),this.it(this.rt))}it(e){var t,r;null!=(t=Co.__PosthogExtensions__)&&t.errorWrappingFunctions&&e(),null==(r=Co.__PosthogExtensions__)||null==r.loadExternalDependency||r.loadExternalDependency(this._instance,"exception-autocapture",t=>{if(t)return Zu.error("failed to load script",t);e()})}lt(){var e,t,r;null==(e=this.st)||e.call(this),this.st=void 0,null==(t=this.nt)||t.call(this),this.nt=void 0,null==(r=this.ot)||r.call(this),this.ot=void 0}onRemoteConfig(e){var t=e.autocaptureExceptions;this.ut=!!t||!1,this.I=this.ht(),this._instance.persistence&&this._instance.persistence.register({[dc]:this.ut}),this.startIfEnabled()}captureException(e){var t,r,n=null!==(t=null==e||null==(r=e.$exception_list)||null==(r=r[0])?void 0:r.type)&&void 0!==t?t:"Exception";this.dt.consumeRateLimit(n)?Zu.info("Skipping exception capture because of client rate limiting.",{exception:n}):this._instance.exceptions.sendExceptionEvent(e)}}function td(e,t,r){try{if(!(t in e))return()=>{};var n=e[t],i=r(n);return Jo(i)&&(i.prototype=i.prototype||{},Object.defineProperties(i,{__posthog_wrapped__:{enumerable:!1,value:!0}})),e[t]=i,()=>{e[t]=n}}catch(e){return()=>{}}}class rd{constructor(e){var t;this._instance=e,this.vt=(null==bo||null==(t=bo.location)?void 0:t.pathname)||""}get isEnabled(){return"history_change"===this._instance.config.capture_pageview}startIfEnabled(){this.isEnabled&&(Vl.info("History API monitoring enabled, starting..."),this.monitorHistoryChanges())}stop(){this.ct&&this.ct(),this.ct=void 0,Vl.info("History API monitoring stopped")}monitorHistoryChanges(){var e,t;if(bo&&bo.history){var r=this;null!=(e=bo.history.pushState)&&e.__posthog_wrapped__||td(bo.history,"pushState",e=>function(t,n,i){e.call(this,t,n,i),r.ft("pushState")}),null!=(t=bo.history.replaceState)&&t.__posthog_wrapped__||td(bo.history,"replaceState",e=>function(t,n,i){e.call(this,t,n,i),r.ft("replaceState")}),this.gt()}}ft(e){try{var t,r=null==bo||null==(t=bo.location)?void 0:t.pathname;if(!r)return;r!==this.vt&&this.isEnabled&&this._instance.capture("$pageview",{navigation_type:e}),this.vt=r}catch(bo){Vl.error("Error capturing "+e+" pageview",bo)}}gt(){if(!this.ct){var e=()=>{this.ft("popstate")};sc(bo,"popstate",e),this.ct=()=>{bo&&bo.removeEventListener("popstate",e)}}}}var nd=ql("[SegmentIntegration]");var id="posthog-js";function sd(e,t){var{organization:r,projectId:n,prefix:i,severityAllowList:s=["error"],sendExceptionsToPostHog:a=!0}=void 0===t?{}:t;return t=>{var o,l,c,u,d;if("*"!==s&&!s.includes(t.level)||!e.__loaded)return t;t.tags||(t.tags={});var h=e.requestRouter.endpointFor("ui","/project/"+e.config.token+"/person/"+e.get_distinct_id());t.tags["PostHog Person URL"]=h,e.sessionRecordingStarted()&&(t.tags["PostHog Recording URL"]=e.get_session_replay_url({withTimestamp:!0}));var f=(null==(o=t.exception)?void 0:o.values)||[],p=f.map(e=>Lo({},e,{stacktrace:e.stacktrace?Lo({},e.stacktrace,{type:"raw",frames:(e.stacktrace.frames||[]).map(e=>Lo({},e,{platform:"web:javascript"}))}):void 0})),g={$exception_message:(null==(l=f[0])?void 0:l.value)||t.message,$exception_type:null==(c=f[0])?void 0:c.type,$exception_level:t.level,$exception_list:p,$sentry_event_id:t.event_id,$sentry_exception:t.exception,$sentry_exception_message:(null==(u=f[0])?void 0:u.value)||t.message,$sentry_exception_type:null==(d=f[0])?void 0:d.type,$sentry_tags:t.tags};return r&&n&&(g.$sentry_url=(i||"https://sentry.io/organizations/")+r+"/issues/?project="+n+"&query="+t.event_id),a&&e.exceptions.sendExceptionEvent(g),t}}class ad{constructor(e,t,r,n,i,s){this.name=id,this.setupOnce=function(a){a(sd(e,{organization:t,projectId:r,prefix:n,severityAllowList:i,sendExceptionsToPostHog:null==s||s}))}}}var od=null!=bo&&bo.location?xu(bo.location.hash,"__posthog")||xu(location.hash,"state"):null,ld="_postHogToolbarParams",cd=ql("[Toolbar]"),ud=function(e){return e[e.UNINITIALIZED=0]="UNINITIALIZED",e[e.LOADING=1]="LOADING",e[e.LOADED=2]="LOADED",e}(ud||{});class dd{constructor(e){this.instance=e}_t(e){Co.ph_toolbar_state=e}yt(){var e;return null!==(e=Co.ph_toolbar_state)&&void 0!==e?e:ud.UNINITIALIZED}maybeLoadToolbar(e,t,r){if(void 0===e&&(e=void 0),void 0===t&&(t=void 0),void 0===r&&(r=void 0),!bo||!To)return!1;e=null!=e?e:bo.location,r=null!=r?r:bo.history;try{if(!t){try{bo.localStorage.setItem("test","test"),bo.localStorage.removeItem("test")}catch(bo){return!1}t=null==bo?void 0:bo.localStorage}var n,i=od||xu(e.hash,"__posthog")||xu(e.hash,"state"),s=i?Zl(()=>JSON.parse(atob(decodeURIComponent(i))))||Zl(()=>JSON.parse(decodeURIComponent(i))):null;return s&&"ph_authorize"===s.action?((n=s).source="url",n&&Object.keys(n).length>0&&(s.desiredHash?e.hash=s.desiredHash:r?r.replaceState(r.state,"",e.pathname+e.search):e.hash="")):((n=JSON.parse(t.getItem(ld)||"{}")).source="localstorage",delete n.userIntent),!(!n.token||this.instance.config.token!==n.token||(this.loadToolbar(n),0))}catch(bo){return!1}}bt(e){var t=Co.ph_load_toolbar||Co.ph_load_editor;!rl(t)&&Jo(t)?t(e,this.instance):cd.warn("No toolbar load function found")}loadToolbar(e){var t=!(null==To||!To.getElementById($c));if(!bo||t)return!1;var r="custom"===this.instance.requestRouter.region&&this.instance.config.advanced_disable_toolbar_metrics,n=Lo({token:this.instance.config.token},e,{apiURL:this.instance.requestRouter.endpointFor("ui")},r?{instrument:!1}:{});if(bo.localStorage.setItem(ld,JSON.stringify(Lo({},n,{source:void 0}))),this.yt()===ud.LOADED)this.bt(n);else if(this.yt()===ud.UNINITIALIZED){var i;this._t(ud.LOADING),null==(i=Co.__PosthogExtensions__)||null==i.loadExternalDependency||i.loadExternalDependency(this.instance,"toolbar",e=>{if(e)return cd.error("[Toolbar] Failed to load",e),void this._t(ud.UNINITIALIZED);this._t(ud.LOADED),this.bt(n)}),sc(bo,"turbolinks:load",()=>{this._t(ud.UNINITIALIZED),this.loadToolbar(n)})}return!0}wt(e){return this.loadToolbar(e)}maybeLoadEditor(e,t,r){return void 0===e&&(e=void 0),void 0===t&&(t=void 0),void 0===r&&(r=void 0),this.maybeLoadToolbar(e,t,r)}}var hd=ql("[TracingHeaders]");class fd{constructor(e){this.xt=void 0,this.Et=void 0,this.rt=()=>{var e,t;Xo(this.xt)&&(null==(e=Co.__PosthogExtensions__)||null==(e=e.tracingHeadersPatchFns)||e._patchXHR(this._instance.config.__add_tracing_headers||[],this._instance.get_distinct_id(),this._instance.sessionManager)),Xo(this.Et)&&(null==(t=Co.__PosthogExtensions__)||null==(t=t.tracingHeadersPatchFns)||t._patchFetch(this._instance.config.__add_tracing_headers||[],this._instance.get_distinct_id(),this._instance.sessionManager))},this._instance=e}it(e){var t,r;null!=(t=Co.__PosthogExtensions__)&&t.tracingHeadersPatchFns&&e(),null==(r=Co.__PosthogExtensions__)||null==r.loadExternalDependency||r.loadExternalDependency(this._instance,"tracing-headers",t=>{if(t)return hd.error("failed to load script",t);e()})}startIfEnabledOrStop(){var e,t;this._instance.config.__add_tracing_headers?this.it(this.rt):(null==(e=this.xt)||e.call(this),null==(t=this.Et)||t.call(this),this.xt=void 0,this.Et=void 0)}}var pd="Mobile",gd="iOS",md="Android",vd="Tablet",yd=md+" "+vd,_d="iPad",bd="Apple",wd=bd+" Watch",xd="Safari",kd="BlackBerry",Ed="Samsung",Sd=Ed+"Browser",Td=Ed+" Internet",jd="Chrome",Pd=jd+" OS",Od=jd+" "+gd,Id="Internet Explorer",Nd=Id+" "+pd,Cd="Opera",Rd=Cd+" Mini",Ad="Edge",$d="Microsoft "+Ad,Ld="Firefox",Fd=Ld+" "+gd,Md="Nintendo",Dd="PlayStation",Ud="Xbox",zd=md+" "+pd,Bd=pd+" "+xd,Vd="Windows",qd=Vd+" Phone",Hd="Nokia",Wd="Ouya",Gd="Generic",Kd=Gd+" "+pd.toLowerCase(),Jd=Gd+" "+vd.toLowerCase(),Yd="Konqueror",Qd="(\\d+(\\.\\d+)?)",Xd=new RegExp("Version/"+Qd),Zd=new RegExp(Ud,"i"),eh=new RegExp(Dd+" \\w+","i"),th=new RegExp(Md+" \\w+","i"),rh=new RegExp(kd+"|PlayBook|BB10","i"),nh={"NT3.51":"NT 3.11","NT4.0":"NT 4.0","5.0":"2000",5.1:"XP",5.2:"XP","6.0":"Vista",6.1:"7",6.2:"8",6.3:"8.1",6.4:"10","10.0":"10"},ih=function(e,t){return t=t||"",zo(e," OPR/")&&zo(e,"Mini")?Rd:zo(e," OPR/")?Cd:rh.test(e)?kd:zo(e,"IE"+pd)||zo(e,"WPDesktop")?Nd:zo(e,Sd)?Td:zo(e,Ad)||zo(e,"Edg/")?$d:zo(e,"FBIOS")?"Facebook "+pd:zo(e,"UCWEB")||zo(e,"UCBrowser")?"UC Browser":zo(e,"CriOS")?Od:zo(e,"CrMo")||zo(e,jd)?jd:zo(e,md)&&zo(e,xd)?zd:zo(e,"FxiOS")?Fd:zo(e.toLowerCase(),Yd.toLowerCase())?Yd:((e,t)=>t&&zo(t,bd)||function(e){return zo(e,xd)&&!zo(e,jd)&&!zo(e,md)}(e))(e,t)?zo(e,pd)?Bd:xd:zo(e,Ld)?Ld:zo(e,"MSIE")||zo(e,"Trident/")?Id:zo(e,"Gecko")?Ld:""},sh={[Nd]:[new RegExp("rv:"+Qd)],[$d]:[new RegExp(Ad+"?\\/"+Qd)],[jd]:[new RegExp("("+jd+"|CrMo)\\/"+Qd)],[Od]:[new RegExp("CriOS\\/"+Qd)],"UC Browser":[new RegExp("(UCBrowser|UCWEB)\\/"+Qd)],[xd]:[Xd],[Bd]:[Xd],[Cd]:[new RegExp("(Opera|OPR)\\/"+Qd)],[Ld]:[new RegExp(Ld+"\\/"+Qd)],[Fd]:[new RegExp("FxiOS\\/"+Qd)],[Yd]:[new RegExp("Konqueror[:/]?"+Qd,"i")],[kd]:[new RegExp(kd+" "+Qd),Xd],[zd]:[new RegExp("android\\s"+Qd,"i")],[Td]:[new RegExp(Sd+"\\/"+Qd)],[Id]:[new RegExp("(rv:|MSIE )"+Qd)],Mozilla:[new RegExp("rv:"+Qd)]},ah=function(e,t){var r=ih(e,t),n=sh[r];if(Xo(n))return null;for(var i=0;i<n.length;i++){var s=n[i],a=e.match(s);if(a)return parseFloat(a[a.length-2])}return null},oh=[[new RegExp(Ud+"; "+Ud+" (.*?)[);]","i"),e=>[Ud,e&&e[1]||""]],[new RegExp(Md,"i"),[Md,""]],[new RegExp(Dd,"i"),[Dd,""]],[rh,[kd,""]],[new RegExp(Vd,"i"),(e,t)=>{if(/Phone/.test(t)||/WPDesktop/.test(t))return[qd,""];if(new RegExp(pd).test(t)&&!/IEMobile\b/.test(t))return[Vd+" "+pd,""];var r=/Windows NT ([0-9.]+)/i.exec(t);if(r&&r[1]){var n=r[1],i=nh[n]||"";return/arm/i.test(t)&&(i="RT"),[Vd,i]}return[Vd,""]}],[/((iPhone|iPad|iPod).*?OS (\d+)_(\d+)_?(\d+)?|iPhone)/,e=>{if(e&&e[3]){var t=[e[3],e[4],e[5]||"0"];return[gd,t.join(".")]}return[gd,""]}],[/(watch.*\/(\d+\.\d+\.\d+)|watch os,(\d+\.\d+),)/i,e=>{var t="";return e&&e.length>=3&&(t=Xo(e[2])?e[3]:e[2]),["watchOS",t]}],[new RegExp("("+md+" (\\d+)\\.(\\d+)\\.?(\\d+)?|"+md+")","i"),e=>{if(e&&e[2]){var t=[e[2],e[3],e[4]||"0"];return[md,t.join(".")]}return[md,""]}],[/Mac OS X (\d+)[_.](\d+)[_.]?(\d+)?/i,e=>{var t=["Mac OS X",""];if(e&&e[1]){var r=[e[1],e[2],e[3]||"0"];t[1]=r.join(".")}return t}],[/Mac/i,["Mac OS X",""]],[/CrOS/,[Pd,""]],[/Linux|debian/i,["Linux",""]]],lh=function(e){return th.test(e)?Md:eh.test(e)?Dd:Zd.test(e)?Ud:new RegExp(Wd,"i").test(e)?Wd:new RegExp("("+qd+"|WPDesktop)","i").test(e)?qd:/iPad/.test(e)?_d:/iPod/.test(e)?"iPod Touch":/iPhone/.test(e)?"iPhone":/(watch)(?: ?os[,/]|\d,\d\/)[\d.]+/i.test(e)?wd:rh.test(e)?kd:/(kobo)\s(ereader|touch)/i.test(e)?"Kobo":new RegExp(Hd,"i").test(e)?Hd:/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i.test(e)||/(kf[a-z]+)( bui|\)).+silk\//i.test(e)?"Kindle Fire":/(Android|ZTE)/i.test(e)?!new RegExp(pd).test(e)||/(9138B|TB782B|Nexus [97]|pixel c|HUAWEISHT|BTV|noble nook|smart ultra 6)/i.test(e)?/pixel[\daxl ]{1,6}/i.test(e)&&!/pixel c/i.test(e)||/(huaweimed-al00|tah-|APA|SM-G92|i980|zte|U304AA)/i.test(e)||/lmy47v/i.test(e)&&!/QTAQZ3/i.test(e)?md:yd:md:new RegExp("(pda|"+pd+")","i").test(e)?Kd:new RegExp(vd,"i").test(e)&&!new RegExp(vd+" pc","i").test(e)?Jd:""},ch="https?://(.*)",uh=["gclid","gclsrc","dclid","gbraid","wbraid","fbclid","msclkid","twclid","li_fat_id","igshid","ttclid","rdt_cid","epik","qclid","sccid","irclid","_kx"],dh=Ql(["utm_source","utm_medium","utm_campaign","utm_content","utm_term","gad_source","mc_cid"],uh),hh="<masked>",fh=["li_fat_id"];function ph(e,t,r){if(!To)return{};var n,i=t?Ql([],uh,r||[]):[],s=gh(wu(To.URL,i,hh),e),a=(n={},Jl(fh,function(e){var t=Mu.q(e);n[e]=t||null}),n);return Yl(a,s)}function gh(e,t){var r=dh.concat(t||[]),n={};return Jl(r,function(t){var r=bu(e,t);n[t]=r||null}),n}function mh(e){var t=function(e){return e?0===e.search(ch+"google.([^/?]*)")?"google":0===e.search(ch+"bing.com")?"bing":0===e.search(ch+"yahoo.com")?"yahoo":0===e.search(ch+"duckduckgo.com")?"duckduckgo":null:null}(e),r="yahoo"!=t?"q":"p",n={};if(!tl(t)){n.$search_engine=t;var i=To?bu(To.referrer,r):"";i.length&&(n.ph_keyword=i)}return n}function vh(){return navigator.language||navigator.userLanguage}function yh(){return(null==To?void 0:To.referrer)||"$direct"}function _h(e,t){var r=e?Ql([],uh,t||[]):[],n=null==jo?void 0:jo.href.substring(0,1e3);return{r:yh().substring(0,1e3),u:n?wu(n,r,hh):void 0}}function bh(e){var t,{r:r,u:n}=e,i={$referrer:r,$referring_domain:null==r?void 0:"$direct"==r?"$direct":null==(t=_u(r))?void 0:t.host};if(n){i.$current_url=n;var s=_u(n);i.$host=null==s?void 0:s.host,i.$pathname=null==s?void 0:s.pathname;var a=gh(n);Yl(i,a)}if(r){var o=mh(r);Yl(i,o)}return i}function wh(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch(bo){return}}function xh(){try{return(new Date).getTimezoneOffset()}catch(bo){return}}function kh(e,t){if(!No)return{};var r,n,i,s=e?Ql([],uh,t||[]):[],[a,o]=function(e){for(var t=0;t<oh.length;t++){var[r,n]=oh[t],i=r.exec(e),s=i&&(Jo(n)?n(i,e):n);if(s)return s}return["",""]}(No);return Yl(tc({$os:a,$os_version:o,$browser:ih(No,navigator.vendor),$device:lh(No),$device_type:(n=No,i=lh(n),i===_d||i===yd||"Kobo"===i||"Kindle Fire"===i||i===Jd?vd:i===Md||i===Ud||i===Dd||i===Wd?"Console":i===wd?"Wearable":i?pd:"Desktop"),$timezone:wh(),$timezone_offset:xh()}),{$current_url:wu(null==jo?void 0:jo.href,s,hh),$host:null==jo?void 0:jo.host,$pathname:null==jo?void 0:jo.pathname,$raw_user_agent:No.length>1e3?No.substring(0,997)+"...":No,$browser_version:ah(No,navigator.vendor),$browser_language:vh(),$browser_language_prefix:(r=vh(),"string"==typeof r?r.split("-")[0]:void 0),$screen_height:null==bo?void 0:bo.screen.height,$screen_width:null==bo?void 0:bo.screen.width,$viewport_height:null==bo?void 0:bo.innerHeight,$viewport_width:null==bo?void 0:bo.innerWidth,$lib:"web",$lib_version:Ro.LIB_VERSION,$insert_id:Math.random().toString(36).substring(2,10)+Math.random().toString(36).substring(2,10),$time:Date.now()/1e3})}var Eh=ql("[Web Vitals]"),Sh=9e5;class Th{constructor(e){var t;this.St=!1,this.P=!1,this.N={url:void 0,metrics:[],firstMetricTimestamp:void 0},this.$t=()=>{clearTimeout(this.kt),0!==this.N.metrics.length&&(this._instance.capture("$web_vitals",this.N.metrics.reduce((e,t)=>Lo({},e,{["$web_vitals_"+t.name+"_event"]:Lo({},t),["$web_vitals_"+t.name+"_value"]:t.value}),{})),this.N={url:void 0,metrics:[],firstMetricTimestamp:void 0})},this.Pt=e=>{var t,r=null==(t=this._instance.sessionManager)?void 0:t.checkAndGetSessionAndWindowId(!0);if(Xo(r))Eh.error("Could not read session ID. Dropping metrics!");else{this.N=this.N||{url:void 0,metrics:[],firstMetricTimestamp:void 0};var n=this.Tt();Xo(n)||(rl(null==e?void 0:e.name)||rl(null==e?void 0:e.value)?Eh.error("Invalid metric received",e):this.Rt&&e.value>=this.Rt?Eh.error("Ignoring metric with value >= "+this.Rt,e):(this.N.url!==n&&(this.$t(),this.kt=setTimeout(this.$t,this.flushToCaptureTimeoutMs)),Xo(this.N.url)&&(this.N.url=n),this.N.firstMetricTimestamp=Xo(this.N.firstMetricTimestamp)?Date.now():this.N.firstMetricTimestamp,e.attribution&&e.attribution.interactionTargetElement&&(e.attribution.interactionTargetElement=void 0),this.N.metrics.push(Lo({},e,{$current_url:n,$session_id:r.sessionId,$window_id:r.windowId,timestamp:Date.now()})),this.N.metrics.length===this.allowedMetrics.length&&this.$t()))}},this.rt=()=>{var e,t,r,n,i=Co.__PosthogExtensions__;Xo(i)||Xo(i.postHogWebVitalsCallbacks)||({onLCP:e,onCLS:t,onFCP:r,onINP:n}=i.postHogWebVitalsCallbacks),e&&t&&r&&n?(this.allowedMetrics.indexOf("LCP")>-1&&e(this.Pt.bind(this)),this.allowedMetrics.indexOf("CLS")>-1&&t(this.Pt.bind(this)),this.allowedMetrics.indexOf("FCP")>-1&&r(this.Pt.bind(this)),this.allowedMetrics.indexOf("INP")>-1&&n(this.Pt.bind(this)),this.P=!0):Eh.error("web vitals callbacks not loaded - not starting")},this._instance=e,this.St=!(null==(t=this._instance.persistence)||!t.props[pc]),this.startIfEnabled()}get allowedMetrics(){var e,t,r=Yo(this._instance.config.capture_performance)?null==(e=this._instance.config.capture_performance)?void 0:e.web_vitals_allowed_metrics:void 0;return Xo(r)?(null==(t=this._instance.persistence)?void 0:t.props[mc])||["CLS","FCP","INP","LCP"]:r}get flushToCaptureTimeoutMs(){return(Yo(this._instance.config.capture_performance)?this._instance.config.capture_performance.web_vitals_delayed_flush_ms:void 0)||5e3}get Rt(){var e=Yo(this._instance.config.capture_performance)&&nl(this._instance.config.capture_performance.__web_vitals_max_value)?this._instance.config.capture_performance.__web_vitals_max_value:Sh;return 0<e&&e<=6e4?Sh:e}get isEnabled(){var e=null==jo?void 0:jo.protocol;if("http:"!==e&&"https:"!==e)return Eh.info("Web Vitals are disabled on non-http/https protocols"),!1;var t=Yo(this._instance.config.capture_performance)?this._instance.config.capture_performance.web_vitals:il(this._instance.config.capture_performance)?this._instance.config.capture_performance:void 0;return il(t)?t:this.St}startIfEnabled(){this.isEnabled&&!this.P&&(Eh.info("enabled, starting..."),this.it(this.rt))}onRemoteConfig(e){var t=Yo(e.capturePerformance)&&!!e.capturePerformance.web_vitals,r=Yo(e.capturePerformance)?e.capturePerformance.web_vitals_allowed_metrics:void 0;this._instance.persistence&&(this._instance.persistence.register({[pc]:t}),this._instance.persistence.register({[mc]:r})),this.St=t,this.startIfEnabled()}it(e){var t,r;null!=(t=Co.__PosthogExtensions__)&&t.postHogWebVitalsCallbacks&&e(),null==(r=Co.__PosthogExtensions__)||null==r.loadExternalDependency||r.loadExternalDependency(this._instance,"web-vitals",t=>{t?Eh.error("failed to load script",t):e()})}Tt(){var e=bo?bo.location.href:void 0;if(e){var t=this._instance.config.mask_personal_data_properties,r=this._instance.config.custom_personal_data_properties,n=t?Ql([],uh,r||[]):[];return wu(e,n,hh)}Eh.error("Could not determine current URL")}}var jh=ql("[Heatmaps]");function Ph(e){return Yo(e)&&"clientX"in e&&"clientY"in e&&nl(e.clientX)&&nl(e.clientY)}class Oh{constructor(e){var t;this.St=!1,this.P=!1,this.Ct=null,this.instance=e,this.St=!(null==(t=this.instance.persistence)||!t.props[uc]),this.rageclicks=new mu(e.config.rageclick)}get flushIntervalMilliseconds(){var e=5e3;return Yo(this.instance.config.capture_heatmaps)&&this.instance.config.capture_heatmaps.flush_interval_milliseconds&&(e=this.instance.config.capture_heatmaps.flush_interval_milliseconds),e}get isEnabled(){return Xo(this.instance.config.capture_heatmaps)?Xo(this.instance.config.enable_heatmaps)?this.St:this.instance.config.enable_heatmaps:!1!==this.instance.config.capture_heatmaps}startIfEnabled(){if(this.isEnabled){if(this.P)return;jh.info("starting..."),this.It(),this.Ft()}else{var e;clearInterval(null!==(e=this.Ct)&&void 0!==e?e:void 0),this.Mt(),this.getAndClearBuffer()}}onRemoteConfig(e){var t=!!e.heatmaps;this.instance.persistence&&this.instance.persistence.register({[uc]:t}),this.St=t,this.startIfEnabled()}getAndClearBuffer(){var e=this.N;return this.N=void 0,e}Ot(e){this.At(e.originalEvent,"deadclick")}Ft(){this.Ct&&clearInterval(this.Ct),this.Ct=function(e){return"visible"===(null==e?void 0:e.visibilityState)}(To)?setInterval(this.Dt.bind(this),this.flushIntervalMilliseconds):null}It(){bo&&To&&(this.jt=this.Dt.bind(this),sc(bo,"beforeunload",this.jt),this.Lt=e=>this.At(e||(null==bo?void 0:bo.event)),sc(To,"click",this.Lt,{capture:!0}),this.Nt=e=>this.Ut(e||(null==bo?void 0:bo.event)),sc(To,"mousemove",this.Nt,{capture:!0}),this.zt=new Xu(this.instance,Yu,this.Ot.bind(this)),this.zt.startIfEnabled(),this.Ht=this.Ft.bind(this),sc(To,"visibilitychange",this.Ht),this.P=!0)}Mt(){var e;bo&&To&&(this.jt&&bo.removeEventListener("beforeunload",this.jt),this.Lt&&To.removeEventListener("click",this.Lt,{capture:!0}),this.Nt&&To.removeEventListener("mousemove",this.Nt,{capture:!0}),this.Ht&&To.removeEventListener("visibilitychange",this.Ht),clearTimeout(this.Bt),null==(e=this.zt)||e.stop(),this.P=!1)}qt(e,t){var r=this.instance.scrollManager.scrollY(),n=this.instance.scrollManager.scrollX(),i=this.instance.scrollManager.scrollElement(),s=function(e,t,r){for(var n=e;n&&Dc(n)&&!Uc(n,"body");){if(n===r)return!1;if(zo(t,null==bo?void 0:bo.getComputedStyle(n).position))return!0;n=Qc(n)}return!1}(Kc(e),["fixed","sticky"],i);return{x:e.clientX+(s?0:n),y:e.clientY+(s?0:r),target_fixed:s,type:t}}At(e,t){var r;if(void 0===t&&(t="click"),!Mc(e.target)&&Ph(e)){var n=this.qt(e,t);null!=(r=this.rageclicks)&&r.isRageClick(e.clientX,e.clientY,(new Date).getTime())&&this.Wt(Lo({},n,{type:"rageclick"})),this.Wt(n)}}Ut(e){!Mc(e.target)&&Ph(e)&&(clearTimeout(this.Bt),this.Bt=setTimeout(()=>{this.Wt(this.qt(e,"mousemove"))},500))}Wt(e){if(bo){var t=bo.location.href,r=this.instance.config.mask_personal_data_properties,n=this.instance.config.custom_personal_data_properties,i=r?Ql([],uh,n||[]):[],s=wu(t,i,hh);this.N=this.N||{},this.N[s]||(this.N[s]=[]),this.N[s].push(e)}}Dt(){this.N&&!Qo(this.N)&&this.instance.capture("$$heatmap",{$heatmap_data:this.getAndClearBuffer()})}}class Ih{constructor(e){this._instance=e}doPageView(e,t){var r,n=this.Gt(e,t);return this.Vt={pathname:null!==(r=null==bo?void 0:bo.location.pathname)&&void 0!==r?r:"",pageViewId:t,timestamp:e},this._instance.scrollManager.resetContext(),n}doPageLeave(e){var t;return this.Gt(e,null==(t=this.Vt)?void 0:t.pageViewId)}doEvent(){var e;return{$pageview_id:null==(e=this.Vt)?void 0:e.pageViewId}}Gt(e,t){var r=this.Vt;if(!r)return{$pageview_id:t};var n={$pageview_id:t,$prev_pageview_id:r.pageViewId},i=this._instance.scrollManager.getContext();if(i&&!this._instance.config.disable_scroll_properties){var{maxScrollHeight:s,lastScrollY:a,maxScrollY:o,maxContentHeight:l,lastContentY:c,maxContentY:u}=i;if(!(Xo(s)||Xo(a)||Xo(o)||Xo(l)||Xo(c)||Xo(u))){s=Math.ceil(s),a=Math.ceil(a),o=Math.ceil(o),l=Math.ceil(l),c=Math.ceil(c),u=Math.ceil(u);var d=s<=1?1:hl(a/s,0,1,Vl),h=s<=1?1:hl(o/s,0,1,Vl),f=l<=1?1:hl(c/l,0,1,Vl),p=l<=1?1:hl(u/l,0,1,Vl);n=Yl(n,{$prev_pageview_last_scroll:a,$prev_pageview_last_scroll_percentage:d,$prev_pageview_max_scroll:o,$prev_pageview_max_scroll_percentage:h,$prev_pageview_last_content:c,$prev_pageview_last_content_percentage:f,$prev_pageview_max_content:u,$prev_pageview_max_content_percentage:p})}}return r.pathname&&(n.$prev_pageview_pathname=r.pathname),r.timestamp&&(n.$prev_pageview_duration=(e.getTime()-r.timestamp.getTime())/1e3),n}}var Nh=Uint8Array,Ch=Uint16Array,Rh=Uint32Array,Ah=new Nh([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),$h=new Nh([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Lh=new Nh([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Fh=function(e,t){for(var r=new Ch(31),n=0;n<31;++n)r[n]=t+=1<<e[n-1];var i=new Rh(r[30]);for(n=1;n<30;++n)for(var s=r[n];s<r[n+1];++s)i[s]=s-r[n]<<5|n;return[r,i]},Mh=Fh(Ah,2),Dh=Mh[0],Uh=Mh[1];Dh[28]=258,Uh[258]=28;for(var zh=Fh($h,0)[1],Bh=new Ch(32768),Vh=0;Vh<32768;++Vh){var qh=(43690&Vh)>>>1|(21845&Vh)<<1;qh=(61680&(qh=(52428&qh)>>>2|(13107&qh)<<2))>>>4|(3855&qh)<<4,Bh[Vh]=((65280&qh)>>>8|(255&qh)<<8)>>>1}var Hh=function(e,t,r){for(var n=e.length,i=0,s=new Ch(t);i<n;++i)++s[e[i]-1];var a,o=new Ch(t);for(i=0;i<t;++i)o[i]=o[i-1]+s[i-1]<<1;for(a=new Ch(n),i=0;i<n;++i)a[i]=Bh[o[e[i]-1]++]>>>15-e[i];return a},Wh=new Nh(288);for(Vh=0;Vh<144;++Vh)Wh[Vh]=8;for(Vh=144;Vh<256;++Vh)Wh[Vh]=9;for(Vh=256;Vh<280;++Vh)Wh[Vh]=7;for(Vh=280;Vh<288;++Vh)Wh[Vh]=8;var Gh=new Nh(32);for(Vh=0;Vh<32;++Vh)Gh[Vh]=5;var Kh=Hh(Wh,9),Jh=Hh(Gh,5),Yh=function(e){return(e/8|0)+(7&e&&1)},Qh=function(e,t,r){(null==r||r>e.length)&&(r=e.length);var n=new(e instanceof Ch?Ch:e instanceof Rh?Rh:Nh)(r-t);return n.set(e.subarray(t,r)),n},Xh=function(e,t,r){r<<=7&t;var n=t/8|0;e[n]|=r,e[n+1]|=r>>>8},Zh=function(e,t,r){r<<=7&t;var n=t/8|0;e[n]|=r,e[n+1]|=r>>>8,e[n+2]|=r>>>16},ef=function(e,t){for(var r=[],n=0;n<e.length;++n)e[n]&&r.push({s:n,f:e[n]});var i=r.length,s=r.slice();if(!i)return[new Nh(0),0];if(1==i){var a=new Nh(r[0].s+1);return a[r[0].s]=1,[a,1]}r.sort(function(e,t){return e.f-t.f}),r.push({s:-1,f:25001});var o=r[0],l=r[1],c=0,u=1,d=2;for(r[0]={s:-1,f:o.f+l.f,l:o,r:l};u!=i-1;)o=r[r[c].f<r[d].f?c++:d++],l=r[c!=u&&r[c].f<r[d].f?c++:d++],r[u++]={s:-1,f:o.f+l.f,l:o,r:l};var h=s[0].s;for(n=1;n<i;++n)s[n].s>h&&(h=s[n].s);var f=new Ch(h+1),p=tf(r[u-1],f,0);if(p>t){n=0;var g=0,m=p-t,v=1<<m;for(s.sort(function(e,t){return f[t.s]-f[e.s]||e.f-t.f});n<i;++n){var y=s[n].s;if(!(f[y]>t))break;g+=v-(1<<p-f[y]),f[y]=t}for(g>>>=m;g>0;){var _=s[n].s;f[_]<t?g-=1<<t-f[_]++-1:++n}for(;n>=0&&g;--n){var b=s[n].s;f[b]==t&&(--f[b],++g)}p=t}return[new Nh(f),p]},tf=function(e,t,r){return-1==e.s?Math.max(tf(e.l,t,r+1),tf(e.r,t,r+1)):t[e.s]=r},rf=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new Ch(++t),n=0,i=e[0],s=1,a=function(e){r[n++]=e},o=1;o<=t;++o)if(e[o]==i&&o!=t)++s;else{if(!i&&s>2){for(;s>138;s-=138)a(32754);s>2&&(a(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(a(i),--s;s>6;s-=6)a(8304);s>2&&(a(s-3<<5|8208),s=0)}for(;s--;)a(i);s=1,i=e[o]}return[r.subarray(0,n),t]},nf=function(e,t){for(var r=0,n=0;n<t.length;++n)r+=e[n]*t[n];return r},sf=function(e,t,r){var n=r.length,i=Yh(t+2);e[i]=255&n,e[i+1]=n>>>8,e[i+2]=255^e[i],e[i+3]=255^e[i+1];for(var s=0;s<n;++s)e[i+s+4]=r[s];return 8*(i+4+n)},af=function(e,t,r,n,i,s,a,o,l,c,u){Xh(t,u++,r),++i[256];for(var d=ef(i,15),h=d[0],f=d[1],p=ef(s,15),g=p[0],m=p[1],v=rf(h),y=v[0],_=v[1],b=rf(g),w=b[0],x=b[1],k=new Ch(19),E=0;E<y.length;++E)k[31&y[E]]++;for(E=0;E<w.length;++E)k[31&w[E]]++;for(var S=ef(k,7),T=S[0],j=S[1],P=19;P>4&&!T[Lh[P-1]];--P);var O,I,N,C,R=c+5<<3,A=nf(i,Wh)+nf(s,Gh)+a,$=nf(i,h)+nf(s,g)+a+14+3*P+nf(k,T)+(2*k[16]+3*k[17]+7*k[18]);if(R<=A&&R<=$)return sf(t,u,e.subarray(l,l+c));if(Xh(t,u,1+($<A)),u+=2,$<A){O=Hh(h,f),I=h,N=Hh(g,m),C=g;var L=Hh(T,j);for(Xh(t,u,_-257),Xh(t,u+5,x-1),Xh(t,u+10,P-4),u+=14,E=0;E<P;++E)Xh(t,u+3*E,T[Lh[E]]);u+=3*P;for(var F=[y,w],M=0;M<2;++M){var D=F[M];for(E=0;E<D.length;++E){var U=31&D[E];Xh(t,u,L[U]),u+=T[U],U>15&&(Xh(t,u,D[E]>>>5&127),u+=D[E]>>>12)}}}else O=Kh,I=Wh,N=Jh,C=Gh;for(E=0;E<o;++E)if(n[E]>255){U=n[E]>>>18&31,Zh(t,u,O[U+257]),u+=I[U+257],U>7&&(Xh(t,u,n[E]>>>23&31),u+=Ah[U]);var z=31&n[E];Zh(t,u,N[z]),u+=C[z],z>3&&(Zh(t,u,n[E]>>>5&8191),u+=$h[z])}else Zh(t,u,O[n[E]]),u+=I[n[E]];return Zh(t,u,O[256]),u+I[256]},of=new Rh([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),lf=function(){for(var e=new Rh(256),t=0;t<256;++t){for(var r=t,n=9;--n;)r=(1&r&&3988292384)^r>>>1;e[t]=r}return e}(),cf=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8};function uf(e,t){void 0===t&&(t={});var r=function(){var e=4294967295;return{p:function(t){for(var r=e,n=0;n<t.length;++n)r=lf[255&r^t[n]]^r>>>8;e=r},d:function(){return 4294967295^e}}}(),n=e.length;r.p(e);var i,s=function(e,t,r,n){return function(e,t,r,n,i){var s=e.length,a=new Nh(n+s+5*(1+Math.floor(s/7e3))+i),o=a.subarray(n,a.length-i),l=0;if(!t||s<8)for(var c=0;c<=s;c+=65535){var u=c+65535;u<s?l=sf(o,l,e.subarray(c,u)):(o[c]=!0,l=sf(o,l,e.subarray(c,s)))}else{for(var d=of[t-1],h=d>>>13,f=8191&d,p=(1<<r)-1,g=new Ch(32768),m=new Ch(p+1),v=Math.ceil(r/3),y=2*v,_=function(t){return(e[t]^e[t+1]<<v^e[t+2]<<y)&p},b=new Rh(25e3),w=new Ch(288),x=new Ch(32),k=0,E=0,S=(c=0,0),T=0,j=0;c<s;++c){var P=_(c),O=32767&c,I=m[P];if(g[O]=I,m[P]=O,T<=c){var N=s-c;if((k>7e3||S>24576)&&N>423){l=af(e,o,0,b,w,x,E,S,j,c-j,l),S=k=E=0,j=c;for(var C=0;C<286;++C)w[C]=0;for(C=0;C<30;++C)x[C]=0}var R=2,A=0,$=f,L=O-I&32767;if(N>2&&P==_(c-L))for(var F=Math.min(h,N)-1,M=Math.min(32767,c),D=Math.min(258,N);L<=M&&--$&&O!=I;){if(e[c+R]==e[c+R-L]){for(var U=0;U<D&&e[c+U]==e[c+U-L];++U);if(U>R){if(R=U,A=L,U>F)break;var z=Math.min(L,U-2),B=0;for(C=0;C<z;++C){var V=c-L+C+32768&32767,q=V-g[V]+32768&32767;q>B&&(B=q,I=V)}}}L+=(O=I)-(I=g[O])+32768&32767}if(A){b[S++]=268435456|Uh[R]<<18|zh[A];var H=31&Uh[R],W=31&zh[A];E+=Ah[H]+$h[W],++w[257+H],++x[W],T=c+R,++k}else b[S++]=e[c],++w[e[c]]}}l=af(e,o,!0,b,w,x,E,S,j,c-j,l)}return Qh(a,0,n+Yh(l)+i)}(e,null==t.level?6:t.level,null==t.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):12+t.mem,r,n)}(e,t,10+((i=t).filename&&i.filename.length+1||0),8),a=s.length;return function(e,t){var r=t.filename;if(e[0]=31,e[1]=139,e[2]=8,e[8]=t.level<2?4:9==t.level?2:0,e[9]=3,0!=t.mtime&&cf(e,4,Math.floor(new Date(t.mtime||Date.now())/1e3)),r){e[3]=8;for(var n=0;n<=r.length;++n)e[n+10]=r.charCodeAt(n)}}(s,t),cf(s,a-8,r.d()),cf(s,a-4,n),s}var df=!!Oo||!!Po,hf="text/plain",ff=function(e,t,r){var n;void 0===r&&(r=!0);var[i,s]=e.split("?"),a=Lo({},t),o=null!==(n=null==s?void 0:s.split("&").map(e=>{var t,[n,i]=e.split("="),s=r&&null!==(t=a[n])&&void 0!==t?t:i;return delete a[n],n+"="+s}))&&void 0!==n?n:[],l=function(e,t){var r,n;void 0===t&&(t="&");var i=[];return Jl(e,function(e,t){Xo(e)||Xo(t)||"undefined"===t||(r=encodeURIComponent((e=>e instanceof File)(e)?e.name:e.toString()),n=encodeURIComponent(t),i[i.length]=n+"="+r)}),i.join(t)}(a);return l&&o.push(l),i+"?"+o.join("&")},pf=(e,t)=>JSON.stringify(e,(e,t)=>"bigint"==typeof t?t.toString():t,t),gf=e=>{var{data:t,compression:r}=e;if(t){if(r===yu.GZipJS){var n=uf(function(e){var t=e.length;if("undefined"!=typeof TextEncoder)return(new TextEncoder).encode(e);for(var r=new Nh(e.length+(e.length>>>1)),n=0,i=function(e){r[n++]=e},s=0;s<t;++s){if(n+5>r.length){var a=new Nh(n+8+(t-s<<1));a.set(r),r=a}var o=e.charCodeAt(s);o<128?i(o):o<2048?(i(192|o>>>6),i(128|63&o)):o>55295&&o<57344?(i(240|(o=65536+(1047552&o)|1023&e.charCodeAt(++s))>>>18),i(128|o>>>12&63),i(128|o>>>6&63),i(128|63&o)):(i(224|o>>>12),i(128|o>>>6&63),i(128|63&o))}return Qh(r,0,n)}(pf(t)),{mtime:0}),i=new Blob([n],{type:hf});return{contentType:hf,body:i,estimatedSize:i.size}}if(r===yu.Base64){var s=function(e){var t,r,n,i,s,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",o=0,l=0,c="",u=[];if(!e)return e;e=function(e){var t,r,n,i,s="";for(t=r=0,n=(e=(e+"").replace(/\r\n/g,"\n").replace(/\r/g,"\n")).length,i=0;i<n;i++){var a=e.charCodeAt(i),o=null;a<128?r++:o=a>127&&a<2048?String.fromCharCode(a>>6|192,63&a|128):String.fromCharCode(a>>12|224,a>>6&63|128,63&a|128),tl(o)||(r>t&&(s+=e.substring(t,r)),s+=o,t=r=i+1)}return r>t&&(s+=e.substring(t,e.length)),s}(e);do{t=(s=e.charCodeAt(o++)<<16|e.charCodeAt(o++)<<8|e.charCodeAt(o++))>>18&63,r=s>>12&63,n=s>>6&63,i=63&s,u[l++]=a.charAt(t)+a.charAt(r)+a.charAt(n)+a.charAt(i)}while(o<e.length);switch(c=u.join(""),e.length%3){case 1:c=c.slice(0,-2)+"==";break;case 2:c=c.slice(0,-1)+"="}return c}(pf(t)),a=(e=>"data="+encodeURIComponent("string"==typeof e?e:pf(e)))(s);return{contentType:"application/x-www-form-urlencoded",body:a,estimatedSize:new Blob([a]).size}}var o=pf(t);return{contentType:"application/json",body:o,estimatedSize:new Blob([o]).size}}},mf=[];Po&&mf.push({transport:"fetch",method:e=>{var t,r,{contentType:n,body:i,estimatedSize:s}=null!==(t=gf(e))&&void 0!==t?t:{},a=new Headers;Jl(e.headers,function(e,t){a.append(t,e)}),n&&a.append("Content-Type",n);var o=e.url,l=null;if(Io){var c=new Io;l={signal:c.signal,timeout:setTimeout(()=>c.abort(),e.timeout)}}Po(o,Lo({method:(null==e?void 0:e.method)||"GET",headers:a,keepalive:"POST"===e.method&&(s||0)<52428.8,body:i,signal:null==(r=l)?void 0:r.signal},e.fetchOptions)).then(t=>t.text().then(r=>{var n={statusCode:t.status,text:r};if(200===t.status)try{n.json=JSON.parse(r)}catch(e){Vl.error(e)}null==e.callback||e.callback(n)})).catch(t=>{Vl.error(t),null==e.callback||e.callback({statusCode:0,text:t})}).finally(()=>l?clearTimeout(l.timeout):null)}}),Oo&&mf.push({transport:"XHR",method:e=>{var t,r=new Oo;r.open(e.method||"GET",e.url,!0);var{contentType:n,body:i}=null!==(t=gf(e))&&void 0!==t?t:{};Jl(e.headers,function(e,t){r.setRequestHeader(t,e)}),n&&r.setRequestHeader("Content-Type",n),e.timeout&&(r.timeout=e.timeout),e.disableXHRCredentials||(r.withCredentials=!0),r.onreadystatechange=()=>{if(4===r.readyState){var t={statusCode:r.status,text:r.responseText};if(200===r.status)try{t.json=JSON.parse(r.responseText)}catch(e){}null==e.callback||e.callback(t)}},r.send(i)}}),null!=So&&So.sendBeacon&&mf.push({transport:"sendBeacon",method:e=>{var t=ff(e.url,{beacon:"1"});try{var r,{contentType:n,body:i}=null!==(r=gf(e))&&void 0!==r?r:{},s="string"==typeof i?new Blob([i],{type:n}):i;So.sendBeacon(t,s)}catch(e){}}});var vf=function(e,t){if(!function(e){try{new RegExp(e)}catch(e){return!1}return!0}(t))return!1;try{return new RegExp(t).test(e)}catch(e){return!1}};function yf(e,t,r){return pf({distinct_id:e,userPropertiesToSet:t,userPropertiesToSetOnce:r})}var _f={exact:(e,t)=>t.some(t=>e.some(e=>t===e)),is_not:(e,t)=>t.every(t=>e.every(e=>t!==e)),regex:(e,t)=>t.some(t=>e.some(e=>vf(t,e))),not_regex:(e,t)=>t.every(t=>e.every(e=>!vf(t,e))),icontains:(e,t)=>t.map(bf).some(t=>e.map(bf).some(e=>t.includes(e))),not_icontains:(e,t)=>t.map(bf).every(t=>e.map(bf).every(e=>!t.includes(e)))},bf=e=>e.toLowerCase();function wf(e,t){return!e||Object.entries(e).every(e=>{var[r,n]=e,i=null==t?void 0:t[r];if(Xo(i)||tl(i))return!1;var s=[String(i)],a=_f[n.operator];return!!a&&a(n.values,s)})}var xf=ql("[Error tracking]");class kf{constructor(e){var t,r;this.Jt=[],this.Kt=new _l([new Nl,new zl,new Rl,new Cl,new Dl,new Ml,new $l,new Ul],function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return function(t,n){void 0===n&&(n=0);for(var i=[],s=t.split("\n"),a=n;a<s.length;a++){var o=s[a];if(!(o.length>1024)){var l=Il.test(o)?o.replace(Il,"$1"):o;if(!l.match(/\S*Error: /)){for(var c of r){var u=c(l,e);if(u){i.push(u);break}}if(i.length>=50)break}}}return function(e){if(!e.length)return[];var t=Array.from(e);return t.reverse(),t.slice(0,50).map(e=>{return Lo({},e,{filename:e.filename||(r=t,r[r.length-1]||{}).filename,function:e.function||bl});var r})}(i)}}("web:javascript",Tl,Ol)),this._instance=e,this.Jt=null!==(t=null==(r=this._instance.persistence)?void 0:r.get_property(hc))&&void 0!==t?t:[]}onRemoteConfig(e){var t,r,n,i=null!==(t=null==(r=e.errorTracking)?void 0:r.suppressionRules)&&void 0!==t?t:[],s=null==(n=e.errorTracking)?void 0:n.captureExtensionExceptions;this.Jt=i,this._instance.persistence&&this._instance.persistence.register({[hc]:this.Jt,[fc]:s})}get Yt(){var e,t=!!this._instance.get_property(fc),r=this._instance.config.error_tracking.captureExtensionExceptions;return null!==(e=null!=r?r:t)&&void 0!==e&&e}buildProperties(e,t){return this.Kt.buildFromUnknown(e,{syntheticException:null==t?void 0:t.syntheticException,mechanism:{handled:null==t?void 0:t.handled}})}sendExceptionEvent(e){var t=e.$exception_list;if(this.Xt(t)){if(this.Qt(t))return void xf.info("Skipping exception capture because a suppression rule matched");if(!this.Yt&&this.Zt(t))return void xf.info("Skipping exception capture because it was thrown by an extension");if(!this._instance.config.error_tracking.__capturePostHogExceptions&&this.ti(t))return void xf.info("Skipping exception capture because it was thrown by the PostHog SDK")}return this._instance.capture("$exception",e,{_noTruncate:!0,_batchKey:"exceptionEvent"})}Qt(e){if(0===e.length)return!1;var t=e.reduce((e,t)=>{var{type:r,value:n}=t;return Zo(r)&&r.length>0&&e.$exception_types.push(r),Zo(n)&&n.length>0&&e.$exception_values.push(n),e},{$exception_types:[],$exception_values:[]});return this.Jt.some(e=>{var r=e.values.map(e=>{var r,n=_f[e.operator],i=Ko(e.value)?e.value:[e.value],s=null!==(r=t[e.key])&&void 0!==r?r:[];return i.length>0&&n(i,s)});return"OR"===e.type?r.some(Boolean):r.every(Boolean)})}Zt(e){return e.flatMap(e=>{var t,r;return null!==(t=null==(r=e.stacktrace)?void 0:r.frames)&&void 0!==t?t:[]}).some(e=>e.filename&&e.filename.startsWith("chrome-extension://"))}ti(e){if(e.length>0){var t,r,n,i,s=null!==(t=null==(r=e[0].stacktrace)?void 0:r.frames)&&void 0!==t?t:[],a=s[s.length-1];return null!==(n=null==a||null==(i=a.filename)?void 0:i.includes("posthog.com/static"))&&void 0!==n&&n}return!1}Xt(e){return!rl(e)&&Ko(e)}}var Ef=ql("[FeatureFlags]"),Sf=ql("[FeatureFlags]",{debugEnabled:!0}),Tf="$active_feature_flags",jf="$override_feature_flags",Pf="$feature_flag_payloads",Of="$override_feature_flag_payloads",If="$feature_flag_request_id",Nf="$feature_flag_evaluated_at",Cf=e=>{var t={};for(var[r,n]of Xl(e||{}))n&&(t[r]=n);return t},Rf=function(e){return e.FeatureFlags="feature_flags",e.Recordings="recordings",e}({});class Af{constructor(e){this.ii=!1,this.ei=!1,this.ri=!1,this.si=!1,this.ni=!1,this.oi=!1,this.ai=!1,this._instance=e,this.featureFlagEventHandlers=[]}li(){var e=this._instance.config.evaluation_environments;return null!=e&&e.length?e.filter(e=>{var t=e&&"string"==typeof e&&e.trim().length>0;return t||Ef.error("Invalid evaluation environment found:",e,"Expected non-empty string"),t}):[]}ui(){return this.li().length>0}flags(){if(this._instance.config.__preview_remote_config)this.oi=!0;else{var e=!this.hi&&(this._instance.config.advanced_disable_feature_flags||this._instance.config.advanced_disable_feature_flags_on_first_load);this.di({disableFlags:e})}}get hasLoadedFlags(){return this.ei}getFlags(){return Object.keys(this.getFlagVariants())}getFlagsWithDetails(){var e=this._instance.get_property(xc),t=this._instance.get_property(jf),r=this._instance.get_property(Of);if(!r&&!t)return e||{};var n=Yl({},e||{}),i=[...new Set([...Object.keys(r||{}),...Object.keys(t||{})])];for(var s of i){var a,o,l=n[s],c=null==t?void 0:t[s],u=Xo(c)?null!==(a=null==l?void 0:l.enabled)&&void 0!==a&&a:!!c,d=Xo(c)?l.variant:"string"==typeof c?c:void 0,h=null==r?void 0:r[s],f=Lo({},l,{enabled:u,variant:u?null!=d?d:null==l?void 0:l.variant:void 0});u!==(null==l?void 0:l.enabled)&&(f.original_enabled=null==l?void 0:l.enabled),d!==(null==l?void 0:l.variant)&&(f.original_variant=null==l?void 0:l.variant),h&&(f.metadata=Lo({},null==l?void 0:l.metadata,{payload:h,original_payload:null==l||null==(o=l.metadata)?void 0:o.payload})),n[s]=f}return this.ii||(Ef.warn(" Overriding feature flag details!",{flagDetails:e,overriddenPayloads:r,finalDetails:n}),this.ii=!0),n}getFlagVariants(){var e=this._instance.get_property(bc),t=this._instance.get_property(jf);if(!t)return e||{};for(var r=Yl({},e),n=Object.keys(t),i=0;i<n.length;i++)r[n[i]]=t[n[i]];return this.ii||(Ef.warn(" Overriding feature flags!",{enabledFlags:e,overriddenFlags:t,finalFlags:r}),this.ii=!0),r}getFlagPayloads(){var e=this._instance.get_property(Pf),t=this._instance.get_property(Of);if(!t)return e||{};for(var r=Yl({},e||{}),n=Object.keys(t),i=0;i<n.length;i++)r[n[i]]=t[n[i]];return this.ii||(Ef.warn(" Overriding feature flag payloads!",{flagPayloads:e,overriddenPayloads:t,finalPayloads:r}),this.ii=!0),r}reloadFeatureFlags(){this.si||this._instance.config.advanced_disable_feature_flags||this.hi||(this.hi=setTimeout(()=>{this.di()},5))}vi(){clearTimeout(this.hi),this.hi=void 0}ensureFlagsLoaded(){this.ei||this.ri||this.hi||this.reloadFeatureFlags()}setAnonymousDistinctId(e){this.$anon_distinct_id=e}setReloadingPaused(e){this.si=e}di(e){var t;if(this.vi(),!this._instance.O())if(this.ri)this.ni=!0;else{var r={token:this._instance.config.token,distinct_id:this._instance.get_distinct_id(),groups:this._instance.getGroups(),$anon_distinct_id:this.$anon_distinct_id,person_properties:Lo({},(null==(t=this._instance.persistence)?void 0:t.get_initial_props())||{},this._instance.get_property(kc)||{}),group_properties:this._instance.get_property(Ec)};(null!=e&&e.disableFlags||this._instance.config.advanced_disable_feature_flags)&&(r.disable_flags=!0),this.ui()&&(r.evaluation_environments=this.li());var n=this._instance.config.__preview_remote_config,i=n?"/flags/?v=2":"/flags/?v=2&config=true",s=this._instance.config.advanced_only_evaluate_survey_feature_flags?"&only_evaluate_survey_feature_flags=true":"",a=this._instance.requestRouter.endpointFor("flags",i+s);n&&(r.timezone=wh()),this.ri=!0,this._instance.ci({method:"POST",url:a,data:r,compression:this._instance.config.disable_compression?void 0:yu.Base64,timeout:this._instance.config.feature_flag_request_timeout_ms,callback:e=>{var t,n,i=!0;if(200===e.statusCode&&(this.ni||(this.$anon_distinct_id=void 0),i=!1),this.ri=!1,this.oi||(this.oi=!0,this._instance.fi(null!==(n=e.json)&&void 0!==n?n:{})),!r.disable_flags||this.ni)if(this.ai=!i,e.json&&null!=(t=e.json.quotaLimited)&&t.includes(Rf.FeatureFlags))Ef.warn("You have hit your feature flags quota limit, and will not be able to load feature flags until the quota is reset.  Please visit https://posthog.com/docs/billing/limits-alerts to learn more.");else{var s;r.disable_flags||this.receivedFeatureFlags(null!==(s=e.json)&&void 0!==s?s:{},i),this.ni&&(this.ni=!1,this.di())}}})}}getFeatureFlag(e,t){if(void 0===t&&(t={}),this.ei||this.getFlags()&&this.getFlags().length>0){var r=this.getFlagVariants()[e],n=""+r,i=this._instance.get_property(If)||void 0,s=this._instance.get_property(Nf)||void 0,a=this._instance.get_property(jc)||{};if((t.send_event||!("send_event"in t))&&(!(e in a)||!a[e].includes(n))){var o,l,c,u,d,h,f,p,g;Ko(a[e])?a[e].push(n):a[e]=[n],null==(o=this._instance.persistence)||o.register({[jc]:a});var m=this.getFeatureFlagDetails(e),v={$feature_flag:e,$feature_flag_response:r,$feature_flag_payload:this.getFeatureFlagPayload(e)||null,$feature_flag_request_id:i,$feature_flag_evaluated_at:s,$feature_flag_bootstrapped_response:(null==(l=this._instance.config.bootstrap)||null==(l=l.featureFlags)?void 0:l[e])||null,$feature_flag_bootstrapped_payload:(null==(c=this._instance.config.bootstrap)||null==(c=c.featureFlagPayloads)?void 0:c[e])||null,$used_bootstrap_value:!this.ai};Xo(null==m||null==(u=m.metadata)?void 0:u.version)||(v.$feature_flag_version=m.metadata.version);var y,_=null!==(d=null==m||null==(h=m.reason)?void 0:h.description)&&void 0!==d?d:null==m||null==(f=m.reason)?void 0:f.code;_&&(v.$feature_flag_reason=_),null!=m&&null!=(p=m.metadata)&&p.id&&(v.$feature_flag_id=m.metadata.id),Xo(null==m?void 0:m.original_variant)&&Xo(null==m?void 0:m.original_enabled)||(v.$feature_flag_original_response=Xo(m.original_variant)?m.original_enabled:m.original_variant),null!=m&&null!=(g=m.metadata)&&g.original_payload&&(v.$feature_flag_original_payload=null==m||null==(y=m.metadata)?void 0:y.original_payload),this._instance.capture("$feature_flag_called",v)}return r}Ef.warn('getFeatureFlag for key "'+e+"\" failed. Feature flags didn't load in time.")}getFeatureFlagDetails(e){return this.getFlagsWithDetails()[e]}getFeatureFlagPayload(e){return this.getFlagPayloads()[e]}getRemoteConfigPayload(e,t){var r=this._instance.config.token,n={distinct_id:this._instance.get_distinct_id(),token:r};this.ui()&&(n.evaluation_environments=this.li()),this._instance.ci({method:"POST",url:this._instance.requestRouter.endpointFor("flags","/flags/?v=2&config=true"),data:n,compression:this._instance.config.disable_compression?void 0:yu.Base64,timeout:this._instance.config.feature_flag_request_timeout_ms,callback:r=>{var n,i=null==(n=r.json)?void 0:n.featureFlagPayloads;t((null==i?void 0:i[e])||void 0)}})}isFeatureEnabled(e,t){if(void 0===t&&(t={}),this.ei||this.getFlags()&&this.getFlags().length>0){var r=this.getFeatureFlag(e,t);return Xo(r)?void 0:!!r}Ef.warn('isFeatureEnabled for key "'+e+"\" failed. Feature flags didn't load in time.")}addFeatureFlagsHandler(e){this.featureFlagEventHandlers.push(e)}removeFeatureFlagsHandler(e){this.featureFlagEventHandlers=this.featureFlagEventHandlers.filter(t=>t!==e)}receivedFeatureFlags(e,t){if(this._instance.persistence){this.ei=!0;var r=this.getFlagVariants(),n=this.getFlagPayloads(),i=this.getFlagsWithDetails();!function(e,t,r,n,i){void 0===r&&(r={}),void 0===n&&(n={}),void 0===i&&(i={});var s=(e=>{var t=e.flags;return t?(e.featureFlags=Object.fromEntries(Object.keys(t).map(e=>{var r;return[e,null!==(r=t[e].variant)&&void 0!==r?r:t[e].enabled]})),e.featureFlagPayloads=Object.fromEntries(Object.keys(t).filter(e=>t[e].enabled).filter(e=>{var r;return null==(r=t[e].metadata)?void 0:r.payload}).map(e=>{var r;return[e,null==(r=t[e].metadata)?void 0:r.payload]}))):Ef.warn("Using an older version of the feature flags endpoint. Please upgrade your PostHog server to the latest version"),e})(e),a=s.flags,o=s.featureFlags,l=s.featureFlagPayloads;if(o){var c=e.requestId,u=e.evaluatedAt;if(Ko(o)){Ef.warn("v1 of the feature flags endpoint is deprecated. Please use the latest version.");var d={};if(o)for(var h=0;h<o.length;h++)d[o[h]]=!0;t&&t.register({[Tf]:o,[bc]:d})}else{var f=o,p=l,g=a;e.errorsWhileComputingFlags&&(f=Lo({},r,f),p=Lo({},n,p),g=Lo({},i,g)),t&&t.register(Lo({[Tf]:Object.keys(Cf(f)),[bc]:f||{},[Pf]:p||{},[xc]:g||{}},c?{[If]:c}:{},u?{[Nf]:u}:{}))}}}(e,this._instance.persistence,r,n,i),this.pi(t)}}override(e,t){void 0===t&&(t=!1),Ef.warn("override is deprecated. Please use overrideFeatureFlags instead."),this.overrideFeatureFlags({flags:e,suppressWarning:t})}overrideFeatureFlags(e){if(!this._instance.__loaded||!this._instance.persistence)return Ef.uninitializedWarning("posthog.featureFlags.overrideFeatureFlags");if(!1===e)return this._instance.persistence.unregister(jf),this._instance.persistence.unregister(Of),this.pi(),Sf.info("All overrides cleared");if(e&&"object"==typeof e&&("flags"in e||"payloads"in e)){var t,r=e;if(this.ii=Boolean(null!==(t=r.suppressWarning)&&void 0!==t&&t),"flags"in r)if(!1===r.flags)this._instance.persistence.unregister(jf),Sf.info("Flag overrides cleared");else if(r.flags){if(Ko(r.flags)){for(var n={},i=0;i<r.flags.length;i++)n[r.flags[i]]=!0;this._instance.persistence.register({[jf]:n})}else this._instance.persistence.register({[jf]:r.flags});Sf.info("Flag overrides set",{flags:r.flags})}return"payloads"in r&&(!1===r.payloads?(this._instance.persistence.unregister(Of),Sf.info("Payload overrides cleared")):r.payloads&&(this._instance.persistence.register({[Of]:r.payloads}),Sf.info("Payload overrides set",{payloads:r.payloads}))),void this.pi()}this.pi()}onFeatureFlags(e){if(this.addFeatureFlagsHandler(e),this.ei){var{flags:t,flagVariants:r}=this.gi();e(t,r)}return()=>this.removeFeatureFlagsHandler(e)}updateEarlyAccessFeatureEnrollment(e,t,r){var n,i=(this._instance.get_property(wc)||[]).find(t=>t.flagKey===e),s={["$feature_enrollment/"+e]:t},a={$feature_flag:e,$feature_enrollment:t,$set:s};i&&(a.$early_access_feature_name=i.name),r&&(a.$feature_enrollment_stage=r),this._instance.capture("$feature_enrollment_update",a),this.setPersonPropertiesForFlags(s,!1);var o=Lo({},this.getFlagVariants(),{[e]:t});null==(n=this._instance.persistence)||n.register({[Tf]:Object.keys(Cf(o)),[bc]:o}),this.pi()}getEarlyAccessFeatures(e,t,r){void 0===t&&(t=!1);var n=this._instance.get_property(wc),i=r?"&"+r.map(e=>"stage="+e).join("&"):"";if(n&&!t)return e(n);this._instance.ci({url:this._instance.requestRouter.endpointFor("api","/api/early_access_features/?token="+this._instance.config.token+i),method:"GET",callback:t=>{var r,n;if(t.json){var i=t.json.earlyAccessFeatures;return null==(r=this._instance.persistence)||r.unregister(wc),null==(n=this._instance.persistence)||n.register({[wc]:i}),e(i)}}})}gi(){var e=this.getFlags(),t=this.getFlagVariants();return{flags:e.filter(e=>t[e]),flagVariants:Object.keys(t).filter(e=>t[e]).reduce((e,r)=>(e[r]=t[r],e),{})}}pi(e){var{flags:t,flagVariants:r}=this.gi();this.featureFlagEventHandlers.forEach(n=>n(t,r,{errorsLoading:e}))}setPersonPropertiesForFlags(e,t){void 0===t&&(t=!0);var r=this._instance.get_property(kc)||{};this._instance.register({[kc]:Lo({},r,e)}),t&&this._instance.reloadFeatureFlags()}resetPersonPropertiesForFlags(){this._instance.unregister(kc)}setGroupPropertiesForFlags(e,t){void 0===t&&(t=!0);var r=this._instance.get_property(Ec)||{};0!==Object.keys(r).length&&Object.keys(r).forEach(t=>{r[t]=Lo({},r[t],e[t]),delete e[t]}),this._instance.register({[Ec]:Lo({},r,e)}),t&&this._instance.reloadFeatureFlags()}resetGroupPropertiesForFlags(e){if(e){var t=this._instance.get_property(Ec)||{};this._instance.register({[Ec]:Lo({},t,{[e]:{}})})}else this._instance.unregister(Ec)}reset(){this.ei=!1,this.ri=!1,this.si=!1,this.ni=!1,this.oi=!1,this.ai=!1,this.$anon_distinct_id=void 0,this.vi(),this.ii=!1}}var $f=["cookie","localstorage","localstorage+cookie","sessionstorage","memory"];class Lf{constructor(e,t){this.I=e,this.props={},this.mi=!1,this.yi=(e=>{var t="";return e.token&&(t=e.token.replace(/\+/g,"PL").replace(/\//g,"SL").replace(/=/g,"EQ")),e.persistence_name?"ph_"+e.persistence_name:"ph_"+t+"_posthog"})(e),this.Y=this.bi(e),this.load(),e.debug&&Vl.info("Persistence loaded",e.persistence,Lo({},this.props)),this.update_config(e,e,t),this.save()}isDisabled(){return!!this.wi}bi(e){-1===$f.indexOf(e.persistence.toLowerCase())&&(Vl.critical("Unknown persistence type "+e.persistence+"; falling back to localStorage+cookie"),e.persistence="localStorage+cookie");var t=e.persistence.toLowerCase();return"localstorage"===t&&Uu.H()?Uu:"localstorage+cookie"===t&&Bu.H()?Bu:"sessionstorage"===t&&Wu.H()?Wu:"memory"===t?qu:"cookie"===t?Mu:Bu.H()?Bu:Mu}properties(){var e={};return Jl(this.props,function(t,r){if(r===bc&&Yo(t))for(var n=Object.keys(t),i=0;i<n.length;i++)e["$feature/"+n[i]]=t[n[i]];else a=r,o=!1,(tl(s=Fc)?o:Eo&&s.indexOf===Eo?-1!=s.indexOf(a):(Jl(s,function(e){if(o||(o=e===a))return Gl}),o))||(e[r]=t);var s,a,o}),e}load(){if(!this.wi){var e=this.Y.W(this.yi);e&&(this.props=Yl({},e))}}save(){this.wi||this.Y.G(this.yi,this.props,this.xi,this.Ei,this.Si,this.I.debug)}remove(){this.Y.V(this.yi,!1),this.Y.V(this.yi,!0)}clear(){this.remove(),this.props={}}register_once(e,t,r){if(Yo(e)){Xo(t)&&(t="None"),this.xi=Xo(r)?this.$i:r;var n=!1;if(Jl(e,(e,r)=>{this.props.hasOwnProperty(r)&&this.props[r]!==t||(this.props[r]=e,n=!0)}),n)return this.save(),!0}return!1}register(e,t){if(Yo(e)){this.xi=Xo(t)?this.$i:t;var r=!1;if(Jl(e,(t,n)=>{e.hasOwnProperty(n)&&this.props[n]!==t&&(this.props[n]=t,r=!0)}),r)return this.save(),!0}return!1}unregister(e){e in this.props&&(delete this.props[e],this.save())}update_campaign_params(){if(!this.mi){var e=ph(this.I.custom_campaign_params,this.I.mask_personal_data_properties,this.I.custom_personal_data_properties);Qo(tc(e))||this.register(e),this.mi=!0}}update_search_keyword(){var e;this.register((e=null==To?void 0:To.referrer)?mh(e):{})}update_referrer_info(){var e;this.register_once({$referrer:yh(),$referring_domain:null!=To&&To.referrer&&(null==(e=_u(To.referrer))?void 0:e.host)||"$direct"},void 0)}set_initial_person_info(){this.props[Nc]||this.props[Cc]||this.register_once({[Rc]:_h(this.I.mask_personal_data_properties,this.I.custom_personal_data_properties)},void 0)}get_initial_props(){var e={};Jl([Cc,Nc],t=>{var r=this.props[t];r&&Jl(r,function(t,r){e["$initial_"+Vo(r)]=t})});var t,r,n=this.props[Rc];if(n){var i=(t=bh(n),r={},Jl(t,function(e,t){r["$initial_"+Vo(t)]=e}),r);Yl(e,i)}return e}safe_merge(e){return Jl(this.props,function(t,r){r in e||(e[r]=t)}),e}update_config(e,t,r){if(this.$i=this.xi=e.cookie_expiration,this.set_disabled(e.disable_persistence||!!r),this.set_cross_subdomain(e.cross_subdomain_cookie),this.set_secure(e.secure_cookie),e.persistence!==t.persistence){var n=this.bi(e),i=this.props;this.clear(),this.Y=n,this.props=i,this.save()}}set_disabled(e){this.wi=e,this.wi?this.remove():this.save()}set_cross_subdomain(e){e!==this.Ei&&(this.Ei=e,this.remove(),this.save())}set_secure(e){e!==this.Si&&(this.Si=e,this.remove(),this.save())}set_event_timer(e,t){var r=this.props[lc]||{};r[e]=t,this.props[lc]=r,this.save()}remove_event_timer(e){var t=(this.props[lc]||{})[e];return Xo(t)||(delete this.props[lc][e],this.save()),t}get_property(e){return this.props[e]}set_property(e,t){this.props[e]=t,this.save()}}var Ff=ql("[Product Tours]"),Mf="ph_product_tours";class Df{constructor(e){this.ki=null,this.Pi=null,this.Ti=void 0,this.Ri=!1,this._instance=e}onRemoteConfig(e){if(this._instance.config.disable_product_tours)Ff.info("Product tours disabled via config");else{var t=e.productTours;rl(t)?Ff.info("Product tours not enabled in remote config"):(this.Ti=t,Ff.info("Remote config received, isProductToursEnabled: "+this.Ti),this.loadIfEnabled())}}loadIfEnabled(){var e;if(!this.Pi)if(this.Ri)Ff.info("Already initializing product tours, skipping...");else if(this._instance.config.disable_product_tours)Ff.info("Product tours disabled via config");else{var t=null==Co?void 0:Co.__PosthogExtensions__;if(t){var r=null==(e=this._instance.featureFlags)?void 0:e.isFeatureEnabled("product-tours-2025");if(!Xo(this.Ti)||r){var n=this.Ti||r;if(n){this.Ri=!0;try{var i=t.generateProductTours;if(i)return void this.Ci(i,n);var s=t.loadExternalDependency;if(!s)return Ff.error("PostHog loadExternalDependency extension not found."),void(this.Ri=!1);s(this._instance,"product-tours",e=>{e||!t.generateProductTours?Ff.error("Could not load product tours script",e):this.Ci(t.generateProductTours,n),this.Ri=!1})}catch(e){Ff.error("Error initializing product tours",e),this.Ri=!1}}else Ff.info("Product tours not enabled")}else Ff.info("Waiting for remote config or feature flag to enable product tours")}else Ff.error("PostHog Extensions not found.")}}Ci(e,t){this.Pi=e(this._instance,t)||null,Ff.info("Product tours loaded successfully")}getProductTours(e,t){if(void 0===t&&(t=!1),!Ko(this.ki)||t){var r=this._instance.persistence;if(r){var n=r.props[Mf];if(Ko(n)&&!t)return this.ki=n,void e(n,{isLoaded:!0})}this._instance.ci({url:this._instance.requestRouter.endpointFor("api","/api/product_tours/?token="+this._instance.config.token),method:"GET",callback:t=>{var n=t.statusCode;if(200!==n||!t.json){var i="Product Tours API could not be loaded, status: "+n;return Ff.error(i),void e([],{isLoaded:!1,error:i})}var s=Ko(t.json.product_tours)?t.json.product_tours:[];this.ki=s,r&&r.register({[Mf]:s}),e(s,{isLoaded:!0})}})}else e(this.ki,{isLoaded:!0})}getActiveProductTours(e){if(rl(this.Pi))return Ff.warn("Product tours not loaded yet"),void e([],{isLoaded:!1,error:"Product tours not loaded"});this.Pi.getActiveProductTours(e)}showProductTour(e){var t;Ff.info("showProductTour("+e+")"),null==(t=this.Pi)||t.showTourById(e)}dismissProductTour(){var e;null==(e=this.Pi)||e.dismissTour("user_clicked_skip")}nextStep(){var e;null==(e=this.Pi)||e.nextStep()}previousStep(){var e;null==(e=this.Pi)||e.previousStep()}clearCache(){this.ki=null;var e=this._instance.persistence;e&&e.unregister(Mf)}resetTour(e){var t;null==(t=this.Pi)||t.resetTour(e)}resetAllTours(){var e;null==(e=this.Pi)||e.resetAllTours()}}var Uf=function(e){return e.Activation="events",e.Cancellation="cancelEvents",e}({});!function(e){e.Button="button",e.Tab="tab",e.Selector="selector"}({}),function(e){e.TopLeft="top_left",e.TopRight="top_right",e.TopCenter="top_center",e.MiddleLeft="middle_left",e.MiddleRight="middle_right",e.MiddleCenter="middle_center",e.Left="left",e.Center="center",e.Right="right",e.NextToTrigger="next_to_trigger"}({}),function(e){e.Top="top",e.Left="left",e.Right="right",e.Bottom="bottom"}({});var zf=function(e){return e.Popover="popover",e.API="api",e.Widget="widget",e.ExternalSurvey="external_survey",e}({});!function(e){e.Open="open",e.MultipleChoice="multiple_choice",e.SingleChoice="single_choice",e.Rating="rating",e.Link="link"}({}),function(e){e.NextQuestion="next_question",e.End="end",e.ResponseBased="response_based",e.SpecificQuestion="specific_question"}({}),function(e){e.Once="once",e.Recurring="recurring",e.Always="always"}({});var Bf=function(e){return e.SHOWN="survey shown",e.DISMISSED="survey dismissed",e.SENT="survey sent",e}({}),Vf=function(e){return e.SURVEY_ID="$survey_id",e.SURVEY_NAME="$survey_name",e.SURVEY_RESPONSE="$survey_response",e.SURVEY_ITERATION="$survey_iteration",e.SURVEY_ITERATION_START_DATE="$survey_iteration_start_date",e.SURVEY_PARTIALLY_COMPLETED="$survey_partially_completed",e.SURVEY_SUBMISSION_ID="$survey_submission_id",e.SURVEY_QUESTIONS="$survey_questions",e.SURVEY_COMPLETED="$survey_completed",e}({}),qf=function(e){return e.Popover="popover",e.Inline="inline",e}({});class Hf{constructor(){this.Ii={},this.Ii={}}on(e,t){return this.Ii[e]||(this.Ii[e]=[]),this.Ii[e].push(t),()=>{this.Ii[e]=this.Ii[e].filter(e=>e!==t)}}emit(e,t){for(var r of this.Ii[e]||[])r(t);for(var n of this.Ii["*"]||[])n(e,t)}}function Wf(e,t,r){if(rl(e))return!1;switch(r){case"exact":return e===t;case"contains":var n=t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/_/g,".").replace(/%/g,".*");return new RegExp(n,"i").test(e);case"regex":try{return new RegExp(t).test(e)}catch(e){return!1}default:return!1}}class Gf{constructor(e){this.Fi=new Hf,this.Mi=(e,t)=>this.Oi(e,t)&&this.Ai(e,t)&&this.Di(e,t)&&this.ji(e,t),this.Oi=(e,t)=>null==t||!t.event||(null==e?void 0:e.event)===(null==t?void 0:t.event),this._instance=e,this.Li=new Set,this.Ni=new Set}init(){var e,t;Xo(null==(e=this._instance)?void 0:e.Ui)||(null==(t=this._instance)||t.Ui((e,t)=>{this.on(e,t)}))}register(e){var t,r;if(!Xo(null==(t=this._instance)?void 0:t.Ui)&&(e.forEach(e=>{var t,r;null==(t=this.Ni)||t.add(e),null==(r=e.steps)||r.forEach(e=>{var t;null==(t=this.Li)||t.add((null==e?void 0:e.event)||"")})}),null!=(r=this._instance)&&r.autocapture)){var n,i=new Set;e.forEach(e=>{var t;null==(t=e.steps)||t.forEach(e=>{null!=e&&e.selector&&i.add(null==e?void 0:e.selector)})}),null==(n=this._instance)||n.autocapture.setElementSelectors(i)}}on(e,t){var r;null!=t&&0!=e.length&&(this.Li.has(e)||this.Li.has(null==t?void 0:t.event))&&this.Ni&&(null==(r=this.Ni)?void 0:r.size)>0&&this.Ni.forEach(e=>{this.zi(t,e)&&this.Fi.emit("actionCaptured",e.name)})}Hi(e){this.onAction("actionCaptured",t=>e(t))}zi(e,t){if(null==(null==t?void 0:t.steps))return!1;for(var r of t.steps)if(this.Mi(e,r))return!0;return!1}onAction(e,t){return this.Fi.on(e,t)}Ai(e,t){if(null!=t&&t.url){var r,n=null==e||null==(r=e.properties)?void 0:r.$current_url;if(!n||"string"!=typeof n)return!1;if(!Wf(n,t.url,t.url_matching||"contains"))return!1}return!0}Di(e,t){return!!this.Bi(e,t)&&!!this.qi(e,t)&&!!this.Wi(e,t)}Bi(e,t){var r;if(null==t||!t.href)return!0;var n=this.Gi(e);if(n.length>0)return n.some(e=>Wf(e.href,t.href,t.href_matching||"exact"));var i,s=(null==e||null==(r=e.properties)?void 0:r.$elements_chain)||"";return!!s&&Wf((i=s.match(/(?::|")href="(.*?)"/))?i[1]:"",t.href,t.href_matching||"exact")}qi(e,t){var r;if(null==t||!t.text)return!0;var n=this.Gi(e);if(n.length>0)return n.some(e=>Wf(e.text,t.text,t.text_matching||"exact")||Wf(e.$el_text,t.text,t.text_matching||"exact"));var i,s,a,o=(null==e||null==(r=e.properties)?void 0:r.$elements_chain)||"";return!!o&&(i=function(e){for(var t,r=[],n=/(?::|")text="(.*?)"/g;!rl(t=n.exec(e));)r.includes(t[1])||r.push(t[1]);return r}(o),s=t.text,a=t.text_matching||"exact",i.some(e=>Wf(e,s,a)))}Wi(e,t){var r,n;if(null==t||!t.selector)return!0;var i=null==e||null==(r=e.properties)?void 0:r.$element_selectors;if(null!=i&&i.includes(t.selector))return!0;var s=(null==e||null==(n=e.properties)?void 0:n.$elements_chain)||"";if(t.selector_regex&&s)try{return new RegExp(t.selector_regex).test(s)}catch(e){return!1}return!1}Gi(e){var t;return null==(null==e||null==(t=e.properties)?void 0:t.$elements)?[]:null==e?void 0:e.properties.$elements}ji(e,t){return null==t||!t.properties||0===t.properties.length||wf(t.properties.reduce((e,t)=>{var r=Ko(t.value)?t.value.map(String):null!=t.value?[String(t.value)]:[];return e[t.key]={values:r,operator:t.operator||"exact"},e},{}),null==e?void 0:e.properties)}}var Kf=ql("[Surveys]"),Jf="seenSurvey_",Yf=(e,t)=>{var r="$survey_"+t+"/"+e.id;return e.current_iteration&&e.current_iteration>0&&(r="$survey_"+t+"/"+e.id+"/"+e.current_iteration),r},Qf=e=>{var t=""+Jf+e.id;return e.current_iteration&&e.current_iteration>0&&(t=""+Jf+e.id+"_"+e.current_iteration),t},Xf=[zf.Popover,zf.Widget,zf.API],Zf={ignoreConditions:!1,ignoreDelay:!1,displayType:qf.Popover};class ep{constructor(e){this._instance=e,this.Vi=new Map,this.Ji=new Map,this.Ki=new Map}Yi(e,t){return!!e&&wf(e.propertyFilters,null==t?void 0:t.properties)}Xi(e,t){var r=new Map;return e.forEach(e=>{var n;null==(n=e.conditions)||null==(n=n[t])||null==(n=n.values)||n.forEach(t=>{if(null!=t&&t.name){var n=r.get(t.name)||[];n.push(e.id),r.set(t.name,n)}})}),r}Qi(e,t,r){var n,i=(r===Uf.Activation?this.Vi:this.Ji).get(e),s=[];return null==(n=this._instance)||n.getSurveys(e=>{s=e.filter(e=>null==i?void 0:i.includes(e.id))}),s.filter(n=>{var i,s=null==(i=n.conditions)||null==(i=i[r])||null==(i=i.values)?void 0:i.find(t=>t.name===e);return this.Yi(s,t)})}register(e){var t;Xo(null==(t=this._instance)?void 0:t.Ui)||(this.Zi(e),this.te(e))}te(e){var t=e.filter(e=>{var t,r;return(null==(t=e.conditions)?void 0:t.actions)&&(null==(r=e.conditions)||null==(r=r.actions)||null==(r=r.values)?void 0:r.length)>0});0!==t.length&&(null==this.ie&&(this.ie=new Gf(this._instance),this.ie.init(),this.ie.Hi(e=>{this.onAction(e)})),t.forEach(e=>{var t,r,n,i,s;e.conditions&&null!=(t=e.conditions)&&t.actions&&null!=(r=e.conditions)&&null!=(r=r.actions)&&r.values&&(null==(n=e.conditions)||null==(n=n.actions)||null==(n=n.values)?void 0:n.length)>0&&(null==(i=this.ie)||i.register(e.conditions.actions.values),null==(s=e.conditions)||null==(s=s.actions)||null==(s=s.values)||s.forEach(t=>{if(t&&t.name){var r=this.Ki.get(t.name);r&&r.push(e.id),this.Ki.set(t.name,r||[e.id])}}))}))}Zi(e){var t,r=e.filter(e=>{var t,r;return(null==(t=e.conditions)?void 0:t.events)&&(null==(r=e.conditions)||null==(r=r.events)||null==(r=r.values)?void 0:r.length)>0}),n=e.filter(e=>{var t,r;return(null==(t=e.conditions)?void 0:t.cancelEvents)&&(null==(r=e.conditions)||null==(r=r.cancelEvents)||null==(r=r.values)?void 0:r.length)>0});0===r.length&&0===n.length||(null==(t=this._instance)||t.Ui((e,t)=>{this.onEvent(e,t)}),this.Vi=this.Xi(e,Uf.Activation),this.Ji=this.Xi(e,Uf.Cancellation))}onEvent(e,t){var r,n=(null==(r=this._instance)||null==(r=r.persistence)?void 0:r.props[Tc])||[];if(Bf.SHOWN===e&&t&&n.length>0){var i;Kf.info("survey event matched, removing survey from activated surveys",{event:e,eventPayload:t,existingActivatedSurveys:n});var s=null==t||null==(i=t.properties)?void 0:i.$survey_id;if(s){var a=n.indexOf(s);a>=0&&(n.splice(a,1),this.ee(n))}}else{if(this.Ji.has(e)){var o=this.Qi(e,t,Uf.Cancellation);o.length>0&&(Kf.info("cancel event matched, cancelling surveys",{event:e,surveysToCancel:o.map(e=>e.id)}),o.forEach(e=>{var t,r=n.indexOf(e.id);r>=0&&n.splice(r,1),null==(t=this._instance)||t.cancelPendingSurvey(e.id)}),this.ee(n))}if(this.Vi.has(e)){Kf.info("survey event name matched",{event:e,eventPayload:t,surveys:this.Vi.get(e)});var l=this.Qi(e,t,Uf.Activation);this.ee(n.concat(l.map(e=>e.id)||[]))}}}onAction(e){var t,r=(null==(t=this._instance)||null==(t=t.persistence)?void 0:t.props[Tc])||[];this.Ki.has(e)&&this.ee(r.concat(this.Ki.get(e)||[]))}ee(e){var t;Kf.info("updating activated surveys",{activatedSurveys:e}),null==(t=this._instance)||null==(t=t.persistence)||t.register({[Tc]:[...new Set(e)]})}getSurveys(){var e;return(null==(e=this._instance)||null==(e=e.persistence)?void 0:e.props[Tc])||[]}getEventToSurveys(){return this.Vi}re(){return this.ie}}class tp{constructor(e){this.se=void 0,this._surveyManager=null,this.ne=!1,this.oe=!1,this.ae=[],this._instance=e,this._surveyEventReceiver=null}onRemoteConfig(e){if(!this._instance.config.disable_surveys){var t=e.surveys;if(rl(t))return Kf.warn("Flags not loaded yet. Not loading surveys.");var r=Ko(t);this.se=r?t.length>0:t,Kf.info("flags response received, isSurveysEnabled: "+this.se),this.loadIfEnabled()}}reset(){localStorage.removeItem("lastSeenSurveyDate");for(var e=[],t=0;t<localStorage.length;t++){var r=localStorage.key(t);(null!=r&&r.startsWith(Jf)||null!=r&&r.startsWith("inProgressSurvey_"))&&e.push(r)}e.forEach(e=>localStorage.removeItem(e))}loadIfEnabled(){if(!this._surveyManager)if(this.oe)Kf.info("Already initializing surveys, skipping...");else if(this._instance.config.disable_surveys)Kf.info("Disabled. Not loading surveys.");else if(this._instance.config.cookieless_mode&&this._instance.consent.isOptedOut())Kf.info("Not loading surveys in cookieless mode without consent.");else{var e=null==Co?void 0:Co.__PosthogExtensions__;if(e){if(!Xo(this.se)||this._instance.config.advanced_enable_surveys){var t=this.se||this._instance.config.advanced_enable_surveys;this.oe=!0;try{var r=e.generateSurveys;if(r)return void this.le(r,t);var n=e.loadExternalDependency;if(!n)return void this.ue("PostHog loadExternalDependency extension not found.");n(this._instance,"surveys",r=>{r||!e.generateSurveys?this.ue("Could not load surveys script",r):this.le(e.generateSurveys,t)})}catch(e){throw this.ue("Error initializing surveys",e),e}finally{this.oe=!1}}}else Kf.error("PostHog Extensions not found.")}}le(e,t){this._surveyManager=e(this._instance,t),this._surveyEventReceiver=new ep(this._instance),Kf.info("Surveys loaded successfully"),this.he({isLoaded:!0})}ue(e,t){Kf.error(e,t),this.he({isLoaded:!1,error:e})}onSurveysLoaded(e){return this.ae.push(e),this._surveyManager&&this.he({isLoaded:!0}),()=>{this.ae=this.ae.filter(t=>t!==e)}}getSurveys(e,t){if(void 0===t&&(t=!1),this._instance.config.disable_surveys)return Kf.info("Disabled. Not loading surveys."),e([]);var r=this._instance.get_property(Sc);if(r&&!t)return e(r,{isLoaded:!0});if(this.ne)return e([],{isLoaded:!1,error:"Surveys are already being loaded"});try{this.ne=!0,this._instance.ci({url:this._instance.requestRouter.endpointFor("api","/api/surveys/?token="+this._instance.config.token),method:"GET",timeout:this._instance.config.surveys_request_timeout_ms,callback:t=>{var r;this.ne=!1;var n=t.statusCode;if(200!==n||!t.json){var i="Surveys API could not be loaded, status: "+n;return Kf.error(i),e([],{isLoaded:!1,error:i})}var s,a=t.json.surveys||[],o=a.filter(e=>function(e){return!(!e.start_date||e.end_date)}(e)&&(function(e){var t;return!(null==(t=e.conditions)||null==(t=t.events)||null==(t=t.values)||!t.length)}(e)||function(e){var t;return!(null==(t=e.conditions)||null==(t=t.actions)||null==(t=t.values)||!t.length)}(e)));return o.length>0&&(null==(s=this._surveyEventReceiver)||s.register(o)),null==(r=this._instance.persistence)||r.register({[Sc]:a}),e(a,{isLoaded:!0})}})}catch(e){throw this.ne=!1,e}}he(e){for(var t of this.ae)try{if(!e.isLoaded)return t([],e);this.getSurveys(t)}catch(e){Kf.error("Error in survey callback",e)}}getActiveMatchingSurveys(e,t){if(void 0===t&&(t=!1),!rl(this._surveyManager))return this._surveyManager.getActiveMatchingSurveys(e,t);Kf.warn("init was not called")}de(e){var t=null;return this.getSurveys(r=>{var n;t=null!==(n=r.find(t=>t.id===e))&&void 0!==n?n:null}),t}ve(e){if(rl(this._surveyManager))return{eligible:!1,reason:"SDK is not enabled or survey functionality is not yet loaded"};var t="string"==typeof e?this.de(e):e;return t?this._surveyManager.checkSurveyEligibility(t):{eligible:!1,reason:"Survey not found"}}canRenderSurvey(e){if(rl(this._surveyManager))return Kf.warn("init was not called"),{visible:!1,disabledReason:"SDK is not enabled or survey functionality is not yet loaded"};var t=this.ve(e);return{visible:t.eligible,disabledReason:t.reason}}canRenderSurveyAsync(e,t){return rl(this._surveyManager)?(Kf.warn("init was not called"),Promise.resolve({visible:!1,disabledReason:"SDK is not enabled or survey functionality is not yet loaded"})):new Promise(r=>{this.getSurveys(t=>{var n,i=null!==(n=t.find(t=>t.id===e))&&void 0!==n?n:null;if(i){var s=this.ve(i);r({visible:s.eligible,disabledReason:s.reason})}else r({visible:!1,disabledReason:"Survey not found"})},t)})}renderSurvey(e,t){var r;if(rl(this._surveyManager))Kf.warn("init was not called");else{var n="string"==typeof e?this.de(e):e;if(null!=n&&n.id)if(Xf.includes(n.type)){var i=null==To?void 0:To.querySelector(t);if(i)return null!=(r=n.appearance)&&r.surveyPopupDelaySeconds?(Kf.info("Rendering survey "+n.id+" with delay of "+n.appearance.surveyPopupDelaySeconds+" seconds"),void setTimeout(()=>{var e,t;Kf.info("Rendering survey "+n.id+" with delay of "+(null==(e=n.appearance)?void 0:e.surveyPopupDelaySeconds)+" seconds"),null==(t=this._surveyManager)||t.renderSurvey(n,i),Kf.info("Survey "+n.id+" rendered")},1e3*n.appearance.surveyPopupDelaySeconds)):void this._surveyManager.renderSurvey(n,i);Kf.warn("Survey element not found")}else Kf.warn("Surveys of type "+n.type+" cannot be rendered in the app");else Kf.warn("Survey not found")}}displaySurvey(e,t){var r;if(rl(this._surveyManager))Kf.warn("init was not called");else{var n=this.de(e);if(n){var i=n;if(null!=(r=n.appearance)&&r.surveyPopupDelaySeconds&&t.ignoreDelay&&(i=Lo({},n,{appearance:Lo({},n.appearance,{surveyPopupDelaySeconds:0})})),!1===t.ignoreConditions){var s=this.canRenderSurvey(n);if(!s.visible)return void Kf.warn("Survey is not eligible to be displayed: ",s.disabledReason)}t.displayType!==qf.Inline?this._surveyManager.handlePopoverSurvey(i):this.renderSurvey(i,t.selector)}else Kf.warn("Survey not found")}}cancelPendingSurvey(e){rl(this._surveyManager)?Kf.warn("init was not called"):this._surveyManager.cancelSurvey(e)}}var rp=ql("[RateLimiter]");class np{constructor(e){var t,r;this.serverLimits={},this.lastEventRateLimited=!1,this.checkForLimiting=e=>{var t=e.text;if(t&&t.length)try{(JSON.parse(t).quota_limited||[]).forEach(e=>{rp.info((e||"events")+" is quota limited."),this.serverLimits[e]=(new Date).getTime()+6e4})}catch(e){return void rp.warn('could not rate limit - continuing. Error: "'+(null==e?void 0:e.message)+'"',{text:t})}},this.instance=e,this.captureEventsPerSecond=(null==(t=e.config.rate_limiting)?void 0:t.events_per_second)||10,this.captureEventsBurstLimit=Math.max((null==(r=e.config.rate_limiting)?void 0:r.events_burst_limit)||10*this.captureEventsPerSecond,this.captureEventsPerSecond),this.lastEventRateLimited=this.clientRateLimitContext(!0).isRateLimited}clientRateLimitContext(e){var t,r,n;void 0===e&&(e=!1);var i=(new Date).getTime(),s=null!==(t=null==(r=this.instance.persistence)?void 0:r.get_property(Ic))&&void 0!==t?t:{tokens:this.captureEventsBurstLimit,last:i};s.tokens+=(i-s.last)/1e3*this.captureEventsPerSecond,s.last=i,s.tokens>this.captureEventsBurstLimit&&(s.tokens=this.captureEventsBurstLimit);var a=s.tokens<1;return a||e||(s.tokens=Math.max(0,s.tokens-1)),!a||this.lastEventRateLimited||e||this.instance.capture("$$client_ingestion_warning",{$$client_ingestion_warning_message:"posthog-js client rate limited. Config is set to "+this.captureEventsPerSecond+" events per second and "+this.captureEventsBurstLimit+" events burst limit."},{skip_client_rate_limiting:!0}),this.lastEventRateLimited=a,null==(n=this.instance.persistence)||n.set_property(Ic,s),{isRateLimited:a,remainingTokens:s.tokens}}isServerRateLimited(e){var t=this.serverLimits[e||"events"]||!1;return!1!==t&&(new Date).getTime()<t}}var ip=ql("[RemoteConfig]");class sp{constructor(e){this._instance=e}get remoteConfig(){var e;return null==(e=Co._POSTHOG_REMOTE_CONFIG)||null==(e=e[this._instance.config.token])?void 0:e.config}ce(e){var t,r;null!=(t=Co.__PosthogExtensions__)&&t.loadExternalDependency?null==(r=Co.__PosthogExtensions__)||null==r.loadExternalDependency||r.loadExternalDependency(this._instance,"remote-config",()=>e(this.remoteConfig)):(ip.error("PostHog Extensions not found. Cannot load remote config."),e())}fe(e){this._instance.ci({method:"GET",url:this._instance.requestRouter.endpointFor("assets","/array/"+this._instance.config.token+"/config"),callback:t=>{e(t.json)}})}load(){try{if(this.remoteConfig)return ip.info("Using preloaded remote config",this.remoteConfig),void this.fi(this.remoteConfig);if(this._instance.O())return void ip.warn("Remote config is disabled. Falling back to local config.");this.ce(e=>{if(!e)return ip.info("No config found after loading remote JS config. Falling back to JSON."),void this.fe(e=>{this.fi(e)});this.fi(e)})}catch(bo){ip.error("Error loading remote config",bo)}}fi(e){e?this._instance.config.__preview_remote_config?(this._instance.fi(e),!1!==e.hasFeatureFlags&&this._instance.featureFlags.ensureFlagsLoaded()):ip.info("__preview_remote_config is disabled. Logging config instead",e):ip.error("Failed to fetch remote config from PostHog.")}}var ap=3e3;class op{constructor(e,t){this.pe=!0,this.ge=[],this._e=hl((null==t?void 0:t.flush_interval_ms)||ap,250,5e3,Vl.createLogger("flush interval"),ap),this.me=e}enqueue(e){this.ge.push(e),this.ye||this.be()}unload(){this.we();var e=this.ge.length>0?this.xe():{},t=Object.values(e);[...t.filter(e=>0===e.url.indexOf("/e")),...t.filter(e=>0!==e.url.indexOf("/e"))].map(e=>{this.me(Lo({},e,{transport:"sendBeacon"}))})}enable(){this.pe=!1,this.be()}be(){var e=this;this.pe||(this.ye=setTimeout(()=>{if(this.we(),this.ge.length>0){var t=this.xe(),r=function(){var r=t[n],i=(new Date).getTime();r.data&&Ko(r.data)&&Jl(r.data,e=>{e.offset=Math.abs(e.timestamp-i),delete e.timestamp}),e.me(r)};for(var n in t)r()}},this._e))}we(){clearTimeout(this.ye),this.ye=void 0}xe(){var e={};return Jl(this.ge,t=>{var r,n=t,i=(n?n.batchKey:null)||n.url;Xo(e[i])&&(e[i]=Lo({},n,{data:[]})),null==(r=e[i].data)||r.push(n.data)}),this.ge=[],e}}var lp=["retriesPerformedSoFar"];class cp{constructor(e){this.Ee=!1,this.Se=3e3,this.ge=[],this._instance=e,this.ge=[],this.$e=!0,!Xo(bo)&&"onLine"in bo.navigator&&(this.$e=bo.navigator.onLine,this.ke=()=>{this.$e=!0,this.Dt()},this.Pe=()=>{this.$e=!1},sc(bo,"online",this.ke),sc(bo,"offline",this.Pe))}get length(){return this.ge.length}retriableRequest(e){var{retriesPerformedSoFar:t}=e,r=Fo(e,lp);nl(t)&&t>0&&(r.url=ff(r.url,{retry_count:t})),this._instance.ci(Lo({},r,{callback:e=>{200!==e.statusCode&&(e.statusCode<400||e.statusCode>=500)&&(null!=t?t:0)<10?this.Te(Lo({retriesPerformedSoFar:t},r)):null==r.callback||r.callback(e)}}))}Te(e){var t=e.retriesPerformedSoFar||0;e.retriesPerformedSoFar=t+1;var r=function(e){var t=3e3*Math.pow(2,e),r=t/2,n=Math.min(18e5,t),i=(Math.random()-.5)*(n-r);return Math.ceil(n+i)}(t),n=Date.now()+r;this.ge.push({retryAt:n,requestOptions:e});var i="Enqueued failed request for retry in "+r;navigator.onLine||(i+=" (Browser is offline)"),Vl.warn(i),this.Ee||(this.Ee=!0,this.Re())}Re(){if(this.Ce&&clearTimeout(this.Ce),0===this.ge.length)return this.Ee=!1,void(this.Ce=void 0);this.Ce=setTimeout(()=>{this.$e&&this.ge.length>0&&this.Dt(),this.Re()},this.Se)}Dt(){var e=Date.now(),t=[],r=this.ge.filter(r=>r.retryAt<e||(t.push(r),!1));if(this.ge=t,r.length>0)for(var{requestOptions:n}of r)this.retriableRequest(n)}unload(){for(var{requestOptions:e}of(this.Ce&&(clearTimeout(this.Ce),this.Ce=void 0),this.Ee=!1,Xo(bo)||(this.ke&&(bo.removeEventListener("online",this.ke),this.ke=void 0),this.Pe&&(bo.removeEventListener("offline",this.Pe),this.Pe=void 0)),this.ge))try{this._instance.ci(Lo({},e,{transport:"sendBeacon"}))}catch(bo){Vl.error(bo)}this.ge=[]}}class up{constructor(e){this.Ie=()=>{var e,t,r,n;this.Fe||(this.Fe={});var i=this.scrollElement(),s=this.scrollY(),a=i?Math.max(0,i.scrollHeight-i.clientHeight):0,o=s+((null==i?void 0:i.clientHeight)||0),l=(null==i?void 0:i.scrollHeight)||0;this.Fe.lastScrollY=Math.ceil(s),this.Fe.maxScrollY=Math.max(s,null!==(e=this.Fe.maxScrollY)&&void 0!==e?e:0),this.Fe.maxScrollHeight=Math.max(a,null!==(t=this.Fe.maxScrollHeight)&&void 0!==t?t:0),this.Fe.lastContentY=o,this.Fe.maxContentY=Math.max(o,null!==(r=this.Fe.maxContentY)&&void 0!==r?r:0),this.Fe.maxContentHeight=Math.max(l,null!==(n=this.Fe.maxContentHeight)&&void 0!==n?n:0)},this._instance=e}getContext(){return this.Fe}resetContext(){var e=this.Fe;return setTimeout(this.Ie,0),e}startMeasuringScrollPosition(){sc(bo,"scroll",this.Ie,{capture:!0}),sc(bo,"scrollend",this.Ie,{capture:!0}),sc(bo,"resize",this.Ie)}scrollElement(){if(!this._instance.config.scroll_root_selector)return null==bo?void 0:bo.document.documentElement;var e=Ko(this._instance.config.scroll_root_selector)?this._instance.config.scroll_root_selector:[this._instance.config.scroll_root_selector];for(var t of e){var r=null==bo?void 0:bo.document.querySelector(t);if(r)return r}}scrollY(){if(this._instance.config.scroll_root_selector){var e=this.scrollElement();return e&&e.scrollTop||0}return bo&&(bo.scrollY||bo.pageYOffset||bo.document.documentElement.scrollTop)||0}scrollX(){if(this._instance.config.scroll_root_selector){var e=this.scrollElement();return e&&e.scrollLeft||0}return bo&&(bo.scrollX||bo.pageXOffset||bo.document.documentElement.scrollLeft)||0}}var dp=e=>_h(null==e?void 0:e.config.mask_personal_data_properties,null==e?void 0:e.config.custom_personal_data_properties);class hp{constructor(e,t,r,n){this.Me=e=>{var t=this.Oe();if(!t||t.sessionId!==e){var r={sessionId:e,props:this.Ae(this._instance)};this.De.register({[Oc]:r})}},this._instance=e,this.je=t,this.De=r,this.Ae=n||dp,this.je.onSessionId(this.Me)}Oe(){return this.De.props[Oc]}getSetOnceProps(){var e,t=null==(e=this.Oe())?void 0:e.props;return t?"r"in t?bh(t):{$referring_domain:t.referringDomain,$pathname:t.initialPathName,utm_source:t.utm_source,utm_campaign:t.utm_campaign,utm_medium:t.utm_medium,utm_content:t.utm_content,utm_term:t.utm_term}:{}}getSessionProps(){var e={};return Jl(tc(this.getSetOnceProps()),(t,r)=>{"$current_url"===r&&(r="url"),e["$session_entry_"+Vo(r)]=t}),e}}var fp=ql("[SessionId]");class pp{on(e,t){return this.Le.on(e,t)}constructor(e,t,r){var n;if(this.Ne=[],this.Ue=void 0,this.Le=new Hf,this.ze=(e,t)=>Math.abs(e-t)>this.sessionTimeoutMs,!e.persistence)throw new Error("SessionIdManager requires a PostHogPersistence instance");if("always"===e.config.cookieless_mode)throw new Error('SessionIdManager cannot be used with cookieless_mode="always"');this.I=e.config,this.De=e.persistence,this.He=void 0,this.Be=void 0,this._sessionStartTimestamp=null,this._sessionActivityTimestamp=null,this.qe=t||Au,this.We=r||Au;var i=this.I.persistence_name||this.I.token,s=this.I.session_idle_timeout_seconds||1800;if(this._sessionTimeoutMs=1e3*hl(s,60,36e3,fp.createLogger("session_idle_timeout_seconds"),1800),e.register({$configured_session_timeout_ms:this._sessionTimeoutMs}),this.Ge(),this.Ve="ph_"+i+"_window_id",this.Je="ph_"+i+"_primary_window_exists",this.Ke()){var a=Wu.W(this.Ve),o=Wu.W(this.Je);a&&!o?this.He=a:Wu.V(this.Ve),Wu.G(this.Je,!0)}if(null!=(n=this.I.bootstrap)&&n.sessionID)try{var l=(()=>{var e=this.I.bootstrap.sessionID.replace(/-/g,"");if(32!==e.length)throw new Error("Not a valid UUID");if("7"!==e[12])throw new Error("Not a UUIDv7");return parseInt(e.substring(0,12),16)})();this.Ye(this.I.bootstrap.sessionID,(new Date).getTime(),l)}catch(e){fp.error("Invalid sessionID in bootstrap",e)}this.Xe()}get sessionTimeoutMs(){return this._sessionTimeoutMs}onSessionId(e){return Xo(this.Ne)&&(this.Ne=[]),this.Ne.push(e),this.Be&&e(this.Be,this.He),()=>{this.Ne=this.Ne.filter(t=>t!==e)}}Ke(){return"memory"!==this.I.persistence&&!this.De.wi&&Wu.H()}Qe(e){e!==this.He&&(this.He=e,this.Ke()&&Wu.G(this.Ve,e))}Ze(){return this.He?this.He:this.Ke()?Wu.W(this.Ve):null}Ye(e,t,r){e===this.Be&&t===this._sessionActivityTimestamp&&r===this._sessionStartTimestamp||(this._sessionStartTimestamp=r,this._sessionActivityTimestamp=t,this.Be=e,this.De.register({[yc]:[t,e,r]}))}tr(){var e=this.De.props[yc];return Ko(e)&&2===e.length&&e.push(e[0]),e||[0,null,0]}resetSessionId(){this.Ye(null,null,null)}destroy(){clearTimeout(this.ir),this.ir=void 0,this.Ue&&bo&&(bo.removeEventListener("beforeunload",this.Ue,{capture:!1}),this.Ue=void 0),this.Ne=[]}Xe(){this.Ue=()=>{this.Ke()&&Wu.V(this.Je)},sc(bo,"beforeunload",this.Ue,{capture:!1})}checkAndGetSessionAndWindowId(e,t){if(void 0===e&&(e=!1),void 0===t&&(t=null),"always"===this.I.cookieless_mode)throw new Error('checkAndGetSessionAndWindowId should not be called with cookieless_mode="always"');var r=t||(new Date).getTime(),[n,i,s]=this.tr(),a=this.Ze(),o=nl(s)&&s>0&&Math.abs(r-s)>864e5,l=!1,c=!i,u=!c&&!e&&this.ze(r,n);c||u||o?(i=this.qe(),a=this.We(),fp.info("new session ID generated",{sessionId:i,windowId:a,changeReason:{noSessionId:c,activityTimeout:u,sessionPastMaximumLength:o}}),s=r,l=!0):a||(a=this.We(),l=!0);var d=0===n||!e||o?r:n,h=0===s?(new Date).getTime():s;return this.Qe(a),this.Ye(i,d,h),e||this.Ge(),l&&this.Ne.forEach(e=>e(i,a,l?{noSessionId:c,activityTimeout:u,sessionPastMaximumLength:o}:void 0)),{sessionId:i,windowId:a,sessionStartTimestamp:h,changeReason:l?{noSessionId:c,activityTimeout:u,sessionPastMaximumLength:o}:void 0,lastActivityTimestamp:n}}Ge(){clearTimeout(this.ir),this.ir=setTimeout(()=>{var[e]=this.tr();if(this.ze((new Date).getTime(),e)){var t=this.Be;this.resetSessionId(),this.Le.emit("forcedIdleReset",{idleSessionId:t})}},1.1*this.sessionTimeoutMs)}}var gp=["$set_once","$set"],mp=ql("[SiteApps]");class vp{constructor(e){this._instance=e,this.er=[],this.apps={}}get isEnabled(){return!!this._instance.config.opt_in_site_apps}rr(e,t){if(t){var r=this.globalsForEvent(t);this.er.push(r),this.er.length>1e3&&(this.er=this.er.slice(10))}}get siteAppLoaders(){var e;return null==(e=Co._POSTHOG_REMOTE_CONFIG)||null==(e=e[this._instance.config.token])?void 0:e.siteApps}init(){if(this.isEnabled){var e=this._instance.Ui(this.rr.bind(this));this.sr=()=>{e(),this.er=[],this.sr=void 0}}}globalsForEvent(e){var t,r,n,i,s,a,o;if(!e)throw new Error("Event payload is required");var l={},c=this._instance.get_property("$groups")||[],u=this._instance.get_property("$stored_group_properties")||{};for(var[d,h]of Object.entries(u))l[d]={id:c[d],type:d,properties:h};var{$set_once:f,$set:p}=e;return{event:Lo({},Fo(e,gp),{properties:Lo({},e.properties,p?{$set:Lo({},null!==(t=null==(r=e.properties)?void 0:r.$set)&&void 0!==t?t:{},p)}:{},f?{$set_once:Lo({},null!==(n=null==(i=e.properties)?void 0:i.$set_once)&&void 0!==n?n:{},f)}:{}),elements_chain:null!==(s=null==(a=e.properties)?void 0:a.$elements_chain)&&void 0!==s?s:"",distinct_id:null==(o=e.properties)?void 0:o.distinct_id}),person:{properties:this._instance.get_property("$stored_person_properties")},groups:l}}setupSiteApp(e){var t=this.apps[e.id],r=()=>{var r;!t.errored&&this.er.length&&(mp.info("Processing "+this.er.length+" events for site app with id "+e.id),this.er.forEach(e=>null==t.processEvent?void 0:t.processEvent(e)),t.processedBuffer=!0),Object.values(this.apps).every(e=>e.processedBuffer||e.errored)&&(null==(r=this.sr)||r.call(this))},n=!1,i=i=>{t.errored=!i,t.loaded=!0,mp.info("Site app with id "+e.id+" "+(i?"loaded":"errored")),n&&r()};try{var{processEvent:s}=e.init({posthog:this._instance,callback:e=>{i(e)}});s&&(t.processEvent=s),n=!0}catch(t){mp.error("Error while initializing PostHog app with config id "+e.id,t),i(!1)}if(n&&t.loaded)try{r()}catch(r){mp.error("Error while processing buffered events PostHog app with config id "+e.id,r),t.errored=!0}}nr(){var e=this.siteAppLoaders||[];for(var t of e)this.apps[t.id]={id:t.id,loaded:!1,errored:!1,processedBuffer:!1};for(var r of e)this.setupSiteApp(r)}ar(e){if(0!==Object.keys(this.apps).length){var t=this.globalsForEvent(e);for(var r of Object.values(this.apps))try{null==r.processEvent||r.processEvent(t)}catch(t){mp.error("Error while processing event "+e.event+" for site app "+r.id,t)}}}onRemoteConfig(e){var t,r,n,i=this;if(null!=(t=this.siteAppLoaders)&&t.length)return this.isEnabled?(this.nr(),void this._instance.on("eventCaptured",e=>this.ar(e))):void mp.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.');if(null==(r=this.sr)||r.call(this),null!=(n=e.siteApps)&&n.length)if(this.isEnabled){var s=function(e){var t;Co["__$$ph_site_app_"+e]=i._instance,null==(t=Co.__PosthogExtensions__)||null==t.loadSiteApp||t.loadSiteApp(i._instance,o,t=>{if(t)return mp.error("Error while initializing PostHog app with config id "+e,t)})};for(var{id:a,url:o}of e.siteApps)s(a)}else mp.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.')}}var yp=function(e,t){if(!e)return!1;var r=e.userAgent;if(r&&Do(r,t))return!0;try{var n=null==e?void 0:e.userAgentData;if(null!=n&&n.brands&&n.brands.some(e=>Do(null==e?void 0:e.brand,t)))return!0}catch(e){}return!!e.webdriver},_p=function(e){return e.US="us",e.EU="eu",e.CUSTOM="custom",e}({}),bp="i.posthog.com";class wp{constructor(e){this.lr={},this.instance=e}get apiHost(){var e=this.instance.config.api_host.trim().replace(/\/$/,"");return"https://app.posthog.com"===e?"https://us.i.posthog.com":e}get flagsApiHost(){var e=this.instance.config.flags_api_host;return e?e.trim().replace(/\/$/,""):this.apiHost}get uiHost(){var e,t=null==(e=this.instance.config.ui_host)?void 0:e.replace(/\/$/,"");return t||(t=this.apiHost.replace("."+bp,".posthog.com")),"https://app.posthog.com"===t?"https://us.posthog.com":t}get region(){return this.lr[this.apiHost]||(/https:\/\/(app|us|us-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this.lr[this.apiHost]=_p.US:/https:\/\/(eu|eu-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this.lr[this.apiHost]=_p.EU:this.lr[this.apiHost]=_p.CUSTOM),this.lr[this.apiHost]}endpointFor(e,t){if(void 0===t&&(t=""),t&&(t="/"===t[0]?t:"/"+t),"ui"===e)return this.uiHost+t;if("flags"===e)return this.flagsApiHost+t;if(this.region===_p.CUSTOM)return this.apiHost+t;var r=bp+t;switch(e){case"assets":return"https://"+this.region+"-assets."+r;case"api":return"https://"+this.region+"."+r}}}var xp={icontains:(e,t)=>!!bo&&t.href.toLowerCase().indexOf(e.toLowerCase())>-1,not_icontains:(e,t)=>!!bo&&-1===t.href.toLowerCase().indexOf(e.toLowerCase()),regex:(e,t)=>!!bo&&vf(t.href,e),not_regex:(e,t)=>!!bo&&!vf(t.href,e),exact:(e,t)=>t.href===e,is_not:(e,t)=>t.href!==e};class kp{constructor(e){var t=this;this.getWebExperimentsAndEvaluateDisplayLogic=function(e){void 0===e&&(e=!1),t.getWebExperiments(e=>{kp.ur("retrieved web experiments from the server"),t.hr=new Map,e.forEach(e=>{if(e.feature_flag_key){var r;t.hr&&(kp.ur("setting flag key ",e.feature_flag_key," to web experiment ",e),null==(r=t.hr)||r.set(e.feature_flag_key,e));var n=t._instance.getFeatureFlag(e.feature_flag_key);Zo(n)&&e.variants[n]&&t.dr(e.name,n,e.variants[n].transforms)}else if(e.variants)for(var i in e.variants){var s=e.variants[i];kp.vr(s)&&t.dr(e.name,i,s.transforms)}})},e)},this._instance=e,this._instance.onFeatureFlags(e=>{this.onFeatureFlags(e)})}onFeatureFlags(e){if(this._is_bot())kp.ur("Refusing to render web experiment since the viewer is a likely bot");else if(!this._instance.config.disable_web_experiments){if(rl(this.hr))return this.hr=new Map,this.loadIfEnabled(),void this.previewWebExperiment();kp.ur("applying feature flags",e),e.forEach(e=>{var t;if(this.hr&&null!=(t=this.hr)&&t.has(e)){var r,n=this._instance.getFeatureFlag(e),i=null==(r=this.hr)?void 0:r.get(e);n&&null!=i&&i.variants[n]&&this.dr(i.name,n,i.variants[n].transforms)}})}}previewWebExperiment(){var e=kp.getWindowLocation();if(null!=e&&e.search){var t=bu(null==e?void 0:e.search,"__experiment_id"),r=bu(null==e?void 0:e.search,"__experiment_variant");t&&r&&(kp.ur("previewing web experiments "+t+" && "+r),this.getWebExperiments(e=>{this.cr(parseInt(t),r,e)},!1,!0))}}loadIfEnabled(){this._instance.config.disable_web_experiments||this.getWebExperimentsAndEvaluateDisplayLogic()}getWebExperiments(e,t,r){if(this._instance.config.disable_web_experiments&&!r)return e([]);var n=this._instance.get_property("$web_experiments");if(n&&!t)return e(n);this._instance.ci({url:this._instance.requestRouter.endpointFor("api","/api/web_experiments/?token="+this._instance.config.token),method:"GET",callback:t=>{if(200!==t.statusCode||!t.json)return e([]);var r=t.json.experiments||[];return e(r)}})}cr(e,t,r){var n=r.filter(t=>t.id===e);n&&n.length>0&&(kp.ur("Previewing web experiment ["+n[0].name+"] with variant ["+t+"]"),this.dr(n[0].name,t,n[0].variants[t].transforms))}static vr(e){return!rl(e.conditions)&&kp.pr(e)&&kp.gr(e)}static pr(e){var t;if(rl(e.conditions)||rl(null==(t=e.conditions)?void 0:t.url))return!0;var r,n,i,s=kp.getWindowLocation();return!!s&&(null==(r=e.conditions)||!r.url||xp[null!==(n=null==(i=e.conditions)?void 0:i.urlMatchType)&&void 0!==n?n:"icontains"](e.conditions.url,s))}static getWindowLocation(){return null==bo?void 0:bo.location}static gr(e){var t;if(rl(e.conditions)||rl(null==(t=e.conditions)?void 0:t.utm))return!0;var r=ph();if(r.utm_source){var n,i,s,a,o,l,c,u,d=null==(n=e.conditions)||null==(n=n.utm)||!n.utm_campaign||(null==(i=e.conditions)||null==(i=i.utm)?void 0:i.utm_campaign)==r.utm_campaign,h=null==(s=e.conditions)||null==(s=s.utm)||!s.utm_source||(null==(a=e.conditions)||null==(a=a.utm)?void 0:a.utm_source)==r.utm_source,f=null==(o=e.conditions)||null==(o=o.utm)||!o.utm_medium||(null==(l=e.conditions)||null==(l=l.utm)?void 0:l.utm_medium)==r.utm_medium,p=null==(c=e.conditions)||null==(c=c.utm)||!c.utm_term||(null==(u=e.conditions)||null==(u=u.utm)?void 0:u.utm_term)==r.utm_term;return d&&f&&p&&h}return!1}static ur(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];Vl.info("[WebExperiments] "+e,r)}dr(e,t,r){this._is_bot()?kp.ur("Refusing to render web experiment since the viewer is a likely bot"):"control"!==t?r.forEach(r=>{if(r.selector){var n;kp.ur("applying transform of variant "+t+" for experiment "+e+" ",r);var i=null==(n=document)?void 0:n.querySelectorAll(r.selector);null==i||i.forEach(e=>{var t=e;r.html&&(t.innerHTML=r.html),r.css&&t.setAttribute("style",r.css)})}}):kp.ur("Control variants leave the page unmodified.")}_is_bot(){return So&&this._instance?yp(So,this._instance.config.custom_blocked_useragents):void 0}}var Ep=ql("[PostHog ExternalIntegrations]"),Sp={intercom:"intercom-integration",crispChat:"crisp-chat-integration"};class Tp{constructor(e){this._instance=e}it(e,t){var r;null==(r=Co.__PosthogExtensions__)||null==r.loadExternalDependency||r.loadExternalDependency(this._instance,e,e=>{if(e)return Ep.error("failed to load script",e);t()})}startIfEnabledOrStop(){var e=this,t=function(t){var r,i,s;!n||null!=(r=Co.__PosthogExtensions__)&&null!=(r=r.integrations)&&r[t]||e.it(Sp[t],()=>{var r;null==(r=Co.__PosthogExtensions__)||null==(r=r.integrations)||null==(r=r[t])||r.start(e._instance)}),!n&&null!=(i=Co.__PosthogExtensions__)&&null!=(i=i.integrations)&&i[t]&&(null==(s=Co.__PosthogExtensions__)||null==(s=s.integrations)||null==(s=s[t])||s.stop())};for(var[r,n]of Object.entries(null!==(i=this._instance.config.integrations)&&void 0!==i?i:{})){var i;t(r)}}}var jp="[SessionRecording]",Pp=ql(jp);class Op{get started(){var e;return!(null==(e=this._r)||!e.isStarted)}get status(){return this._r?this._r.status:this.mr&&!this.yr?"disabled":"lazy_loading"}constructor(e){if(this._forceAllowLocalhostNetworkCapture=!1,this.mr=!1,this.br=void 0,this._instance=e,!this._instance.sessionManager)throw Pp.error("started without valid sessionManager"),new Error(jp+" started without valid sessionManager. This is a bug.");if("always"===this._instance.config.cookieless_mode)throw new Error(jp+' cannot be used with cookieless_mode="always"')}get yr(){var e,t=!(null==(e=this._instance.get_property(vc))||!e.enabled),r=!this._instance.config.disable_session_recording,n=this._instance.config.disable_session_recording||this._instance.consent.isOptedOut();return bo&&t&&r&&!n}startIfEnabledOrStop(e){var t;if(!this.yr||null==(t=this._r)||!t.isStarted){var r=!Xo(Object.assign)&&!Xo(Array.from);this.yr&&r?(this.wr(e),Pp.info("starting")):this.stopRecording()}}wr(e){var t,r,n;this.yr&&(null!=Co&&null!=(t=Co.__PosthogExtensions__)&&null!=(t=t.rrweb)&&t.record&&null!=(r=Co.__PosthogExtensions__)&&r.initSessionRecording?this.Er(e):null==(n=Co.__PosthogExtensions__)||null==n.loadExternalDependency||n.loadExternalDependency(this._instance,this.Sr,t=>{if(t)return Pp.error("could not load recorder",t);this.Er(e)}))}stopRecording(){var e,t;null==(e=this.br)||e.call(this),this.br=void 0,null==(t=this._r)||t.stop()}$r(){var e;null==(e=this._instance.persistence)||e.unregister(_c)}kr(e){if(this._instance.persistence){var t,r,n=this._instance.persistence,i=()=>{var t=!1===e.sessionRecording?void 0:e.sessionRecording,r=null==t?void 0:t.sampleRate,i=rl(r)?null:parseFloat(r);rl(i)&&this.$r();var s=null==t?void 0:t.minimumDurationMilliseconds;n.register({[vc]:Lo({enabled:!!t},t,{networkPayloadCapture:Lo({capturePerformance:e.capturePerformance},null==t?void 0:t.networkPayloadCapture),canvasRecording:{enabled:null==t?void 0:t.recordCanvas,fps:null==t?void 0:t.canvasFps,quality:null==t?void 0:t.canvasQuality},sampleRate:i,minimumDurationMilliseconds:Xo(s)?null:s,endpoint:null==t?void 0:t.endpoint,triggerMatchType:null==t?void 0:t.triggerMatchType,masking:null==t?void 0:t.masking,urlTriggers:null==t?void 0:t.urlTriggers})})};i(),null==(t=this.br)||t.call(this),this.br=null==(r=this._instance.sessionManager)?void 0:r.onSessionId(i)}}onRemoteConfig(e){"sessionRecording"in e?!1!==e.sessionRecording?(this.kr(e),this.mr=!0,this.startIfEnabledOrStop()):this.mr=!0:Pp.info("skipping remote config with no sessionRecording",e)}log(e,t){var r;void 0===t&&(t="log"),null!=(r=this._r)&&r.log?this._r.log(e,t):Pp.warn("log called before recorder was ready")}get Sr(){var e,t,r=null==(e=this._instance)||null==(e=e.persistence)?void 0:e.get_property(vc);return(null==r||null==(t=r.scriptConfig)?void 0:t.script)||"lazy-recorder"}Er(e){var t,r;if(null==(t=Co.__PosthogExtensions__)||!t.initSessionRecording)throw Error("Called on script loaded before session recording is available");this._r||(this._r=null==(r=Co.__PosthogExtensions__)?void 0:r.initSessionRecording(this._instance),this._r._forceAllowLocalhostNetworkCapture=this._forceAllowLocalhostNetworkCapture),this._r.start(e)}onRRwebEmit(e){var t;null==(t=this._r)||null==t.onRRwebEmit||t.onRRwebEmit(e)}overrideLinkedFlag(){var e,t;this._r||null==(t=this._instance.persistence)||t.register({$replay_override_linked_flag:!0}),null==(e=this._r)||e.overrideLinkedFlag()}overrideSampling(){var e,t;this._r||null==(t=this._instance.persistence)||t.register({$replay_override_sampling:!0}),null==(e=this._r)||e.overrideSampling()}overrideTrigger(e){var t,r;this._r||null==(r=this._instance.persistence)||r.register({["url"===e?"$replay_override_url_trigger":"$replay_override_event_trigger"]:!0}),null==(t=this._r)||t.overrideTrigger(e)}get sdkDebugProperties(){var e;return(null==(e=this._r)?void 0:e.sdkDebugProperties)||{$recording_status:this.status}}tryAddCustomEvent(e,t){var r;return!(null==(r=this._r)||!r.tryAddCustomEvent(e,t))}}var Ip={},Np=()=>{},Cp="posthog",Rp=!df&&-1===(null==No?void 0:No.indexOf("MSIE"))&&-1===(null==No?void 0:No.indexOf("Mozilla")),Ap=e=>{var t;return Lo({api_host:"https://us.i.posthog.com",flags_api_host:null,ui_host:null,token:"",autocapture:!0,cross_subdomain_cookie:nc(null==To?void 0:To.location),persistence:"localStorage+cookie",persistence_name:"",loaded:Np,save_campaign_params:!0,custom_campaign_params:[],custom_blocked_useragents:[],save_referrer:!0,capture_pageleave:"if_capture_pageview",defaults:null!=e?e:"unset",__preview_deferred_init_extensions:!1,debug:jo&&Zo(null==jo?void 0:jo.search)&&-1!==jo.search.indexOf("__posthog_debug=true")||!1,cookie_expiration:365,upgrade:!1,disable_session_recording:!1,disable_persistence:!1,disable_web_experiments:!0,disable_surveys:!1,disable_surveys_automatic_display:!1,disable_product_tours:!0,disable_external_dependency_loading:!1,enable_recording_console_log:void 0,secure_cookie:"https:"===(null==bo||null==(t=bo.location)?void 0:t.protocol),ip:!1,opt_out_capturing_by_default:!1,opt_out_persistence_by_default:!1,opt_out_useragent_filter:!1,opt_out_capturing_persistence_type:"localStorage",consent_persistence_name:null,opt_out_capturing_cookie_prefix:null,opt_in_site_apps:!1,property_denylist:[],respect_dnt:!1,sanitize_properties:null,request_headers:{},request_batching:!0,properties_string_max_length:65535,mask_all_element_attributes:!1,mask_all_text:!1,mask_personal_data_properties:!1,custom_personal_data_properties:[],advanced_disable_flags:!1,advanced_disable_decide:!1,advanced_disable_feature_flags:!1,advanced_disable_feature_flags_on_first_load:!1,advanced_only_evaluate_survey_feature_flags:!1,advanced_enable_surveys:!1,advanced_disable_toolbar_metrics:!1,feature_flag_request_timeout_ms:3e3,surveys_request_timeout_ms:1e4,on_request_error:e=>{var t="Bad HTTP status: "+e.statusCode+" "+e.text;Vl.error(t)},get_device_id:e=>e,capture_performance:void 0,name:"posthog",bootstrap:{},disable_compression:!1,session_idle_timeout_seconds:1800,person_profiles:"identified_only",before_send:void 0,request_queue_config:{flush_interval_ms:ap},error_tracking:{},_onCapture:Np,__preview_eager_load_replay:!1},(e=>({rageclick:!(e&&e>="2025-11-30")||{content_ignorelist:!0},capture_pageview:!(e&&e>="2025-05-24")||"history_change",session_recording:e&&e>="2025-11-30"?{strictMinimumDuration:!0}:{}}))(e))},$p=e=>{var t={};Xo(e.process_person)||(t.person_profiles=e.process_person),Xo(e.xhr_headers)||(t.request_headers=e.xhr_headers),Xo(e.cookie_name)||(t.persistence_name=e.cookie_name),Xo(e.disable_cookie)||(t.disable_persistence=e.disable_cookie),Xo(e.store_google)||(t.save_campaign_params=e.store_google),Xo(e.verbose)||(t.debug=e.verbose);var r=Yl({},t,e);return Ko(e.property_blacklist)&&(Xo(e.property_denylist)?r.property_denylist=e.property_blacklist:Ko(e.property_denylist)?r.property_denylist=[...e.property_blacklist,...e.property_denylist]:Vl.error("Invalid value for property_denylist config: "+e.property_denylist)),r};class Lp{constructor(){this.__forceAllowLocalhost=!1}get Pr(){return this.__forceAllowLocalhost}set Pr(e){Vl.error("WebPerformanceObserver is deprecated and has no impact on network capture. Use `_forceAllowLocalhostNetworkCapture` on `posthog.sessionRecording`"),this.__forceAllowLocalhost=e}}class Fp{get decideEndpointWasHit(){var e,t;return null!==(e=null==(t=this.featureFlags)?void 0:t.hasLoadedFlags)&&void 0!==e&&e}get flagsEndpointWasHit(){var e,t;return null!==(e=null==(t=this.featureFlags)?void 0:t.hasLoadedFlags)&&void 0!==e&&e}constructor(){this.webPerformance=new Lp,this.Tr=!1,this.version=Ro.LIB_VERSION,this.Rr=new Hf,this._calculate_event_properties=this.calculateEventProperties.bind(this),this.config=Ap(),this.SentryIntegration=ad,this.sentryIntegration=e=>function(e,t){var r=sd(e,t);return{name:id,processEvent:e=>r(e)}}(this,e),this.__request_queue=[],this.__loaded=!1,this.analyticsDefaultEndpoint="/e/",this.Cr=!1,this.Ir=null,this.Fr=null,this.Mr=null,this.featureFlags=new Af(this),this.toolbar=new dd(this),this.scrollManager=new up(this),this.pageViewManager=new Ih(this),this.surveys=new tp(this),this.productTours=new Df(this),this.experiments=new kp(this),this.exceptions=new kf(this),this.rateLimiter=new np(this),this.requestRouter=new wp(this),this.consent=new Ku(this),this.externalIntegrations=new Tp(this),this.people={set:(e,t,r)=>{var n=Zo(e)?{[e]:t}:e;this.setPersonProperties(n),null==r||r({})},set_once:(e,t,r)=>{var n=Zo(e)?{[e]:t}:e;this.setPersonProperties(void 0,n),null==r||r({})}},this.on("eventCaptured",e=>Vl.info('send "'+(null==e?void 0:e.event)+'"',e))}init(e,t,r){if(r&&r!==Cp){var n,i=null!==(n=Ip[r])&&void 0!==n?n:new Fp;return i._init(e,t,r),Ip[r]=i,Ip[Cp][r]=i,i}return this._init(e,t,r)}_init(e,t,r){var n;if(void 0===t&&(t={}),Xo(e)||el(e))return Vl.critical("PostHog was initialized without a token. This likely indicates a misconfiguration. Please check the first argument passed to posthog.init()"),this;if(this.__loaded)return console.warn("[PostHog.js]","You have already initialized PostHog! Re-initializing is a no-op"),this;this.__loaded=!0,this.config={},t.debug=this.Or(t.debug),this.Ar=t,this.Dr=[],t.person_profiles&&(this.Fr=t.person_profiles),this.set_config(Yl({},Ap(t.defaults),$p(t),{name:r,token:e})),this.config.on_xhr_error&&Vl.error("on_xhr_error is deprecated. Use on_request_error instead"),this.compression=t.disable_compression?void 0:yu.GZipJS;var i=this.jr();this.persistence=new Lf(this.config,i),this.sessionPersistence="sessionStorage"===this.config.persistence||"memory"===this.config.persistence?this.persistence:new Lf(Lo({},this.config,{persistence:"sessionStorage"}),i);var s=Lo({},this.persistence.props),a=Lo({},this.sessionPersistence.props);this.register({$initialization_time:(new Date).toISOString()}),this.Lr=new op(e=>this.Nr(e),this.config.request_queue_config),this.Ur=new cp(this),this.__request_queue=[];var o="always"===this.config.cookieless_mode||"on_reject"===this.config.cookieless_mode&&this.consent.isExplicitlyOptedOut();if(o||(this.sessionManager=new pp(this),this.sessionPropsManager=new hp(this,this.sessionManager,this.persistence)),this.config.__preview_deferred_init_extensions?(Vl.info("Deferring extension initialization to improve startup performance"),setTimeout(()=>{this.zr(o)},0)):(Vl.info("Initializing extensions synchronously"),this.zr(o)),Ro.DEBUG=Ro.DEBUG||this.config.debug,Ro.DEBUG&&Vl.info("Starting in debug mode",{this:this,config:t,thisC:Lo({},this.config),p:s,s:a}),void 0!==(null==(n=t.bootstrap)?void 0:n.distinctID)){var l,c,u=this.config.get_device_id(Au()),d=null!=(l=t.bootstrap)&&l.isIdentifiedID?u:t.bootstrap.distinctID;this.persistence.set_property(Pc,null!=(c=t.bootstrap)&&c.isIdentifiedID?"identified":"anonymous"),this.register({distinct_id:t.bootstrap.distinctID,$device_id:d})}if(this.Hr()){var h,f,p=Object.keys((null==(h=t.bootstrap)?void 0:h.featureFlags)||{}).filter(e=>{var r;return!(null==(r=t.bootstrap)||null==(r=r.featureFlags)||!r[e])}).reduce((e,r)=>{var n;return e[r]=(null==(n=t.bootstrap)||null==(n=n.featureFlags)?void 0:n[r])||!1,e},{}),g=Object.keys((null==(f=t.bootstrap)?void 0:f.featureFlagPayloads)||{}).filter(e=>p[e]).reduce((e,r)=>{var n,i;return null!=(n=t.bootstrap)&&null!=(n=n.featureFlagPayloads)&&n[r]&&(e[r]=null==(i=t.bootstrap)||null==(i=i.featureFlagPayloads)?void 0:i[r]),e},{});this.featureFlags.receivedFeatureFlags({featureFlags:p,featureFlagPayloads:g})}if(o)this.register_once({distinct_id:Lc,$device_id:null},"");else if(!this.get_distinct_id()){var m=this.config.get_device_id(Au());this.register_once({distinct_id:m,$device_id:m},""),this.persistence.set_property(Pc,"anonymous")}return sc(bo,"onpagehide"in self?"pagehide":"unload",this._handle_unload.bind(this),{passive:!1}),this.toolbar.maybeLoadToolbar(),t.segment?function(e,t){var r=e.config.segment;if(!r)return t();!function(e,t){var r=e.config.segment;if(!r)return t();var n=r=>{var n=()=>r.anonymousId()||Au();e.config.get_device_id=n,r.id()&&(e.register({distinct_id:r.id(),$device_id:n()}),e.persistence.set_property(Pc,"identified")),t()},i=r.user();"then"in i&&Jo(i.then)?i.then(e=>n(e)):n(i)}(e,()=>{r.register((e=>{Promise&&Promise.resolve||nd.warn("This browser does not have Promise support, and can not use the segment integration");var t=(t,r)=>{if(!r)return t;t.event.userId||t.event.anonymousId===e.get_distinct_id()||(nd.info("No userId set, resetting PostHog"),e.reset()),t.event.userId&&t.event.userId!==e.get_distinct_id()&&(nd.info("UserId set, identifying with PostHog"),e.identify(t.event.userId));var n=e.calculateEventProperties(r,t.event.properties);return t.event.properties=Object.assign({},n,t.event.properties),t};return{name:"PostHog JS",type:"enrichment",version:"1.0.0",isLoaded:()=>!0,load:()=>Promise.resolve(),track:e=>t(e,e.event.event),page:e=>t(e,"$pageview"),identify:e=>t(e,"$identify"),screen:e=>t(e,"$screen")}})(e)).then(()=>{t()})})}(this,()=>this.Br()):this.Br(),Jo(this.config._onCapture)&&this.config._onCapture!==Np&&(Vl.warn("onCapture is deprecated. Please use `before_send` instead"),this.on("eventCaptured",e=>this.config._onCapture(e.event,e))),this.config.ip&&Vl.warn('The `ip` config option has NO EFFECT AT ALL and has been deprecated. Use a custom transformation or "Discard IP data" project setting instead. See https://posthog.com/tutorials/web-redact-properties#hiding-customer-ip-address for more information.'),this}zr(e){var t=performance.now();this.historyAutocapture=new rd(this),this.historyAutocapture.startIfEnabled();var r=[];r.push(()=>{new fd(this).startIfEnabledOrStop()}),r.push(()=>{var e;this.siteApps=new vp(this),null==(e=this.siteApps)||e.init()}),e||r.push(()=>{this.sessionRecording=new Op(this),this.sessionRecording.startIfEnabledOrStop()}),this.config.disable_scroll_properties||r.push(()=>{this.scrollManager.startMeasuringScrollPosition()}),r.push(()=>{this.autocapture=new ju(this),this.autocapture.startIfEnabled()}),r.push(()=>{this.surveys.loadIfEnabled()}),r.push(()=>{this.productTours.loadIfEnabled()}),r.push(()=>{this.heatmaps=new Oh(this),this.heatmaps.startIfEnabled()}),r.push(()=>{this.webVitalsAutocapture=new Th(this)}),r.push(()=>{this.exceptionObserver=new ed(this),this.exceptionObserver.startIfEnabled()}),r.push(()=>{this.deadClicksAutocapture=new Xu(this,Qu),this.deadClicksAutocapture.startIfEnabled()}),r.push(()=>{if(this.qr){var e=this.qr;this.qr=void 0,this.fi(e)}}),this.Wr(r,t)}Wr(e,t){for(;e.length>0;){if(this.config.__preview_deferred_init_extensions&&performance.now()-t>=30&&e.length>0)return void setTimeout(()=>{this.Wr(e,t)},0);var r=e.shift();if(r)try{r()}catch(e){Vl.error("Error initializing extension:",e)}}var n=Math.round(performance.now()-t);this.register_for_session({$sdk_debug_extensions_init_method:this.config.__preview_deferred_init_extensions?"deferred":"synchronous",$sdk_debug_extensions_init_time_ms:n}),this.config.__preview_deferred_init_extensions&&Vl.info("PostHog extensions initialized ("+n+"ms)")}fi(e){var t,r,n,i,s,a,o,l;if(!To||!To.body)return Vl.info("document not ready yet, trying again in 500 milliseconds..."),void setTimeout(()=>{this.fi(e)},500);this.config.__preview_deferred_init_extensions&&(this.qr=e),this.compression=void 0,e.supportedCompression&&!this.config.disable_compression&&(this.compression=zo(e.supportedCompression,yu.GZipJS)?yu.GZipJS:zo(e.supportedCompression,yu.Base64)?yu.Base64:void 0),null!=(t=e.analytics)&&t.endpoint&&(this.analyticsDefaultEndpoint=e.analytics.endpoint),this.set_config({person_profiles:this.Fr?this.Fr:"identified_only"}),null==(r=this.siteApps)||r.onRemoteConfig(e),null==(n=this.sessionRecording)||n.onRemoteConfig(e),null==(i=this.autocapture)||i.onRemoteConfig(e),null==(s=this.heatmaps)||s.onRemoteConfig(e),this.surveys.onRemoteConfig(e),this.productTours.onRemoteConfig(e),null==(a=this.webVitalsAutocapture)||a.onRemoteConfig(e),null==(o=this.exceptionObserver)||o.onRemoteConfig(e),this.exceptions.onRemoteConfig(e),null==(l=this.deadClicksAutocapture)||l.onRemoteConfig(e)}Br(){try{this.config.loaded(this)}catch(bo){Vl.critical("`loaded` function failed",bo)}this.Gr(),this.config.capture_pageview&&setTimeout(()=>{(this.consent.isOptedIn()||"always"===this.config.cookieless_mode)&&this.Vr()},1),new sp(this).load(),this.featureFlags.flags()}Gr(){var e;this.is_capturing()&&this.config.request_batching&&(null==(e=this.Lr)||e.enable())}_dom_loaded(){this.is_capturing()&&Kl(this.__request_queue,e=>this.Nr(e)),this.__request_queue=[],this.Gr()}_handle_unload(){var e,t;this.config.request_batching?(this.Jr()&&this.capture("$pageleave"),null==(e=this.Lr)||e.unload(),null==(t=this.Ur)||t.unload()):this.Jr()&&this.capture("$pageleave",null,{transport:"sendBeacon"})}ci(e){this.__loaded&&(Rp?this.__request_queue.push(e):this.rateLimiter.isServerRateLimited(e.batchKey)||(e.transport=e.transport||this.config.api_transport,e.url=ff(e.url,{ip:this.config.ip?1:0}),e.headers=Lo({},this.config.request_headers),e.compression="best-available"===e.compression?this.compression:e.compression,e.disableXHRCredentials=this.config.__preview_disable_xhr_credentials,this.config.__preview_disable_beacon&&(e.disableTransport=["sendBeacon"]),e.fetchOptions=e.fetchOptions||this.config.fetch_options,(e=>{var t,r,n,i=Lo({},e);i.timeout=i.timeout||6e4,i.url=ff(i.url,{_:(new Date).getTime().toString(),ver:Ro.LIB_VERSION,compression:i.compression});var s=null!==(t=i.transport)&&void 0!==t?t:"fetch",a=mf.filter(e=>!i.disableTransport||!e.transport||!i.disableTransport.includes(e.transport)),o=null!==(r=null==(n=ic(a,e=>e.transport===s))?void 0:n.method)&&void 0!==r?r:a[0].method;if(!o)throw new Error("No available transport method");o(i)})(Lo({},e,{callback:t=>{var r,n;this.rateLimiter.checkForLimiting(t),t.statusCode>=400&&(null==(r=(n=this.config).on_request_error)||r.call(n,t)),null==e.callback||e.callback(t)}}))))}Nr(e){this.Ur?this.Ur.retriableRequest(e):this.ci(e)}_execute_array(e){var t,r=[],n=[],i=[];Kl(e,e=>{e&&(t=e[0],Ko(t)?i.push(e):Jo(e)?e.call(this):Ko(e)&&"alias"===t?r.push(e):Ko(e)&&-1!==t.indexOf("capture")&&Jo(this[t])?i.push(e):n.push(e))});var s=function(e,t){Kl(e,function(e){if(Ko(e[0])){var r=t;Jl(e,function(e){r=r[e[0]].apply(r,e.slice(1))})}else this[e[0]].apply(this,e.slice(1))},t)};s(r,this),s(n,this),s(i,this)}Hr(){var e,t;return(null==(e=this.config.bootstrap)?void 0:e.featureFlags)&&Object.keys(null==(t=this.config.bootstrap)?void 0:t.featureFlags).length>0||!1}push(e){this._execute_array([e])}capture(e,t,r){var n;if(this.__loaded&&this.persistence&&this.sessionPersistence&&this.Lr){if(this.is_capturing())if(!Xo(e)&&Zo(e)){var i=!this.config.opt_out_useragent_filter&&this._is_bot();if(!i||this.config.__preview_capture_bot_pageviews){var s=null!=r&&r.skip_client_rate_limiting?void 0:this.rateLimiter.clientRateLimitContext();if(null==s||!s.isRateLimited){null!=t&&t.$current_url&&!Zo(null==t?void 0:t.$current_url)&&(Vl.error("Invalid `$current_url` property provided to `posthog.capture`. Input must be a string. Ignoring provided value."),null==t||delete t.$current_url),this.sessionPersistence.update_search_keyword(),this.config.save_campaign_params&&this.sessionPersistence.update_campaign_params(),this.config.save_referrer&&this.sessionPersistence.update_referrer_info(),(this.config.save_campaign_params||this.config.save_referrer)&&this.persistence.set_initial_person_info();var a=new Date,o=(null==r?void 0:r.timestamp)||a,l=Au(),c={uuid:l,event:e,properties:this.calculateEventProperties(e,t||{},o,l)};"$pageview"===e&&this.config.__preview_capture_bot_pageviews&&i&&(c.event="$bot_pageview",c.properties.$browser_type="bot"),s&&(c.properties.$lib_rate_limit_remaining_tokens=s.remainingTokens),(null==r?void 0:r.$set)&&(c.$set=null==r?void 0:r.$set);var u,d="$groupidentify"!==e,h=this.Kr(null==r?void 0:r.$set_once,d);if(h&&(c.$set_once=h),(c=function(e,t){return r=e,n=e=>Zo(e)&&!tl(t)?e.slice(0,t):e,i=new Set,function e(t,r){return t!==Object(t)?n?n(t):t:i.has(t)?void 0:(i.add(t),Ko(t)?(s=[],Kl(t,t=>{s.push(e(t))})):(s={},Jl(t,(t,r)=>{i.has(t)||(s[r]=e(t,r))})),s);var s}(r);var r,n,i}(c,null!=r&&r._noTruncate?null:this.config.properties_string_max_length)).timestamp=o,Xo(null==r?void 0:r.timestamp)||(c.properties.$event_time_override_provided=!0,c.properties.$event_time_override_system_time=a),e===Bf.DISMISSED||e===Bf.SENT){var f=null==t?void 0:t[Vf.SURVEY_ID],p=null==t?void 0:t[Vf.SURVEY_ITERATION];u={id:f,current_iteration:p},localStorage.getItem(Qf(u))||localStorage.setItem(Qf(u),"true"),c.$set=Lo({},c.$set,{[Yf({id:f,current_iteration:p},e===Bf.SENT?"responded":"dismissed")]:!0})}var g=Lo({},c.properties.$set,c.$set);if(Qo(g)||this.setPersonPropertiesForFlags(g),!rl(this.config.before_send)){var m=this.Yr(c);if(!m)return;c=m}this.Rr.emit("eventCaptured",c);var v={method:"POST",url:null!==(n=null==r?void 0:r._url)&&void 0!==n?n:this.requestRouter.endpointFor("api",this.analyticsDefaultEndpoint),data:c,compression:"best-available",batchKey:null==r?void 0:r._batchKey};return!this.config.request_batching||r&&(null==r||!r._batchKey)||null!=r&&r.send_instantly?this.Nr(v):this.Lr.enqueue(v),c}Vl.critical("This capture call is ignored due to client rate limiting.")}}else Vl.error("No event name provided to posthog.capture")}else Vl.uninitializedWarning("posthog.capture")}Ui(e){return this.on("eventCaptured",t=>e(t.event,t))}calculateEventProperties(e,t,r,n,i){if(r=r||new Date,!this.persistence||!this.sessionPersistence)return t;var s=i?void 0:this.persistence.remove_event_timer(e),a=Lo({},t);if(a.token=this.config.token,a.$config_defaults=this.config.defaults,("always"==this.config.cookieless_mode||"on_reject"==this.config.cookieless_mode&&this.consent.isExplicitlyOptedOut())&&(a.$cookieless_mode=!0),"$snapshot"===e){var o=Lo({},this.persistence.properties(),this.sessionPersistence.properties());return a.distinct_id=o.distinct_id,(!Zo(a.distinct_id)&&!nl(a.distinct_id)||el(a.distinct_id))&&Vl.error("Invalid distinct_id for replay event. This indicates a bug in your implementation"),a}var l,c=kh(this.config.mask_personal_data_properties,this.config.custom_personal_data_properties);if(this.sessionManager){var{sessionId:u,windowId:d}=this.sessionManager.checkAndGetSessionAndWindowId(i,r.getTime());a.$session_id=u,a.$window_id=d}this.sessionPropsManager&&Yl(a,this.sessionPropsManager.getSessionProps());try{var h;this.sessionRecording&&Yl(a,this.sessionRecording.sdkDebugProperties),a.$sdk_debug_retry_queue_size=null==(h=this.Ur)?void 0:h.length}catch(e){a.$sdk_debug_error_capturing_properties=String(e)}if(this.requestRouter.region===_p.CUSTOM&&(a.$lib_custom_api_host=this.config.api_host),l="$pageview"!==e||i?"$pageleave"!==e||i?this.pageViewManager.doEvent():this.pageViewManager.doPageLeave(r):this.pageViewManager.doPageView(r,n),a=Yl(a,l),"$pageview"===e&&To&&(a.title=To.title),!Xo(s)){var f=r.getTime()-s;a.$duration=parseFloat((f/1e3).toFixed(3))}No&&this.config.opt_out_useragent_filter&&(a.$browser_type=this._is_bot()?"bot":"browser"),(a=Yl({},c,this.persistence.properties(),this.sessionPersistence.properties(),a)).$is_identified=this._isIdentified(),Ko(this.config.property_denylist)?Jl(this.config.property_denylist,function(e){delete a[e]}):Vl.error("Invalid value for property_denylist config: "+this.config.property_denylist+" or property_blacklist config: "+this.config.property_blacklist);var p=this.config.sanitize_properties;p&&(Vl.error("sanitize_properties is deprecated. Use before_send instead"),a=p(a,e));var g=this.Xr();return a.$process_person_profile=g,g&&!i&&this.Qr("_calculate_event_properties"),a}Kr(e,t){var r;if(void 0===t&&(t=!0),!this.persistence||!this.Xr())return e;if(this.Tr)return e;var n=this.persistence.get_initial_props(),i=null==(r=this.sessionPropsManager)?void 0:r.getSetOnceProps(),s=Yl({},n,i||{},e||{}),a=this.config.sanitize_properties;return a&&(Vl.error("sanitize_properties is deprecated. Use before_send instead"),s=a(s,"$set_once")),t&&(this.Tr=!0),Qo(s)?void 0:s}register(e,t){var r;null==(r=this.persistence)||r.register(e,t)}register_once(e,t,r){var n;null==(n=this.persistence)||n.register_once(e,t,r)}register_for_session(e){var t;null==(t=this.sessionPersistence)||t.register(e)}unregister(e){var t;null==(t=this.persistence)||t.unregister(e)}unregister_for_session(e){var t;null==(t=this.sessionPersistence)||t.unregister(e)}Zr(e,t){this.register({[e]:t})}getFeatureFlag(e,t){return this.featureFlags.getFeatureFlag(e,t)}getFeatureFlagPayload(e){var t=this.featureFlags.getFeatureFlagPayload(e);try{return JSON.parse(t)}catch(e){return t}}isFeatureEnabled(e,t){return this.featureFlags.isFeatureEnabled(e,t)}reloadFeatureFlags(){this.featureFlags.reloadFeatureFlags()}updateEarlyAccessFeatureEnrollment(e,t,r){this.featureFlags.updateEarlyAccessFeatureEnrollment(e,t,r)}getEarlyAccessFeatures(e,t,r){return void 0===t&&(t=!1),this.featureFlags.getEarlyAccessFeatures(e,t,r)}on(e,t){return this.Rr.on(e,t)}onFeatureFlags(e){return this.featureFlags.onFeatureFlags(e)}onSurveysLoaded(e){return this.surveys.onSurveysLoaded(e)}onSessionId(e){var t,r;return null!==(t=null==(r=this.sessionManager)?void 0:r.onSessionId(e))&&void 0!==t?t:()=>{}}getSurveys(e,t){void 0===t&&(t=!1),this.surveys.getSurveys(e,t)}getActiveMatchingSurveys(e,t){void 0===t&&(t=!1),this.surveys.getActiveMatchingSurveys(e,t)}renderSurvey(e,t){this.surveys.renderSurvey(e,t)}displaySurvey(e,t){void 0===t&&(t=Zf),this.surveys.displaySurvey(e,t)}cancelPendingSurvey(e){this.surveys.cancelPendingSurvey(e)}canRenderSurvey(e){return this.surveys.canRenderSurvey(e)}canRenderSurveyAsync(e,t){return void 0===t&&(t=!1),this.surveys.canRenderSurveyAsync(e,t)}identify(e,t,r){if(!this.__loaded||!this.persistence)return Vl.uninitializedWarning("posthog.identify");if(nl(e)&&(e=e.toString(),Vl.warn("The first argument to posthog.identify was a number, but it should be a string. It has been converted to a string.")),e)if(["distinct_id","distinctid"].includes(e.toLowerCase()))Vl.critical('The string "'+e+'" was set in posthog.identify which indicates an error. This ID should be unique to the user and not a hardcoded string.');else if(e!==Lc){if(this.Qr("posthog.identify")){var n=this.get_distinct_id();if(this.register({$user_id:e}),!this.get_property("$device_id")){var i=n;this.register_once({$had_persisted_distinct_id:!0,$device_id:i},"")}e!==n&&e!==this.get_property(oc)&&(this.unregister(oc),this.register({distinct_id:e}));var s="anonymous"===(this.persistence.get_property(Pc)||"anonymous");e!==n&&s?(this.persistence.set_property(Pc,"identified"),this.setPersonPropertiesForFlags(Lo({},r||{},t||{}),!1),this.capture("$identify",{distinct_id:e,$anon_distinct_id:n},{$set:t||{},$set_once:r||{}}),this.Mr=yf(e,t,r),this.featureFlags.setAnonymousDistinctId(n)):(t||r)&&this.setPersonProperties(t,r),e!==n&&(this.reloadFeatureFlags(),this.unregister(jc))}}else Vl.critical('The string "'+Lc+'" was set in posthog.identify which indicates an error. This ID is only used as a sentinel value.');else Vl.error("Unique user id has not been set in posthog.identify")}setPersonProperties(e,t){if((e||t)&&this.Qr("posthog.setPersonProperties")){var r=yf(this.get_distinct_id(),e,t);this.Mr!==r?(this.setPersonPropertiesForFlags(Lo({},t||{},e||{})),this.capture("$set",{$set:e||{},$set_once:t||{}}),this.Mr=r):Vl.info("A duplicate setPersonProperties call was made with the same properties. It has been ignored.")}}group(e,t,r){if(e&&t){var n=this.getGroups();n[e]!==t&&this.resetGroupPropertiesForFlags(e),this.register({$groups:Lo({},n,{[e]:t})}),r&&(this.capture("$groupidentify",{$group_type:e,$group_key:t,$group_set:r}),this.setGroupPropertiesForFlags({[e]:r})),n[e]===t||r||this.reloadFeatureFlags()}else Vl.error("posthog.group requires a group type and group key")}resetGroups(){this.register({$groups:{}}),this.resetGroupPropertiesForFlags(),this.reloadFeatureFlags()}setPersonPropertiesForFlags(e,t){void 0===t&&(t=!0),this.featureFlags.setPersonPropertiesForFlags(e,t)}resetPersonPropertiesForFlags(){this.featureFlags.resetPersonPropertiesForFlags()}setGroupPropertiesForFlags(e,t){void 0===t&&(t=!0),this.Qr("posthog.setGroupPropertiesForFlags")&&this.featureFlags.setGroupPropertiesForFlags(e,t)}resetGroupPropertiesForFlags(e){this.featureFlags.resetGroupPropertiesForFlags(e)}reset(e){var t,r,n,i;if(Vl.info("reset"),!this.__loaded)return Vl.uninitializedWarning("posthog.reset");var s=this.get_property("$device_id");if(this.consent.reset(),null==(t=this.persistence)||t.clear(),null==(r=this.sessionPersistence)||r.clear(),this.surveys.reset(),this.featureFlags.reset(),null==(n=this.persistence)||n.set_property(Pc,"anonymous"),null==(i=this.sessionManager)||i.resetSessionId(),this.Mr=null,"always"===this.config.cookieless_mode)this.register_once({distinct_id:Lc,$device_id:null},"");else{var a=this.config.get_device_id(Au());this.register_once({distinct_id:a,$device_id:e?a:s},"")}this.register({$last_posthog_reset:(new Date).toISOString()},1)}get_distinct_id(){return this.get_property("distinct_id")}getGroups(){return this.get_property("$groups")||{}}get_session_id(){var e,t;return null!==(e=null==(t=this.sessionManager)?void 0:t.checkAndGetSessionAndWindowId(!0).sessionId)&&void 0!==e?e:""}get_session_replay_url(e){if(!this.sessionManager)return"";var{sessionId:t,sessionStartTimestamp:r}=this.sessionManager.checkAndGetSessionAndWindowId(!0),n=this.requestRouter.endpointFor("ui","/project/"+this.config.token+"/replay/"+t);if(null!=e&&e.withTimestamp&&r){var i,s=null!==(i=e.timestampLookBack)&&void 0!==i?i:10;if(!r)return n;n+="?t="+Math.max(Math.floor(((new Date).getTime()-r)/1e3)-s,0)}return n}alias(e,t){return e===this.get_property(ac)?(Vl.critical("Attempting to create alias for existing People user - aborting."),-2):this.Qr("posthog.alias")?(Xo(t)&&(t=this.get_distinct_id()),e!==t?(this.Zr(oc,e),this.capture("$create_alias",{alias:e,distinct_id:t})):(Vl.warn("alias matches current distinct_id - skipping api call."),this.identify(e),-1)):void 0}set_config(e){var t=Lo({},this.config);if(Yo(e)){var r,n,i,s,a;Yl(this.config,$p(e));var o=this.jr();null==(r=this.persistence)||r.update_config(this.config,t,o),this.sessionPersistence="sessionStorage"===this.config.persistence||"memory"===this.config.persistence?this.persistence:new Lf(Lo({},this.config,{persistence:"sessionStorage"}),o);var l=this.Or(this.config.debug);il(l)&&(this.config.debug=l),il(this.config.debug)&&(this.config.debug?(Ro.DEBUG=!0,Uu.H()&&Uu.G("ph_debug","true"),Vl.info("set_config",{config:e,oldConfig:t,newConfig:Lo({},this.config)})):(Ro.DEBUG=!1,Uu.H()&&Uu.V("ph_debug"))),null==(n=this.sessionRecording)||n.startIfEnabledOrStop(),null==(i=this.autocapture)||i.startIfEnabled(),null==(s=this.heatmaps)||s.startIfEnabled(),this.surveys.loadIfEnabled(),this.ts(),null==(a=this.externalIntegrations)||a.startIfEnabledOrStop()}}startSessionRecording(e){var t,r,n,i,s,a=!0===e,o={sampling:a||!(null==e||!e.sampling),linked_flag:a||!(null==e||!e.linked_flag),url_trigger:a||!(null==e||!e.url_trigger),event_trigger:a||!(null==e||!e.event_trigger)};Object.values(o).some(Boolean)&&(null==(t=this.sessionManager)||t.checkAndGetSessionAndWindowId(),o.sampling&&(null==(r=this.sessionRecording)||r.overrideSampling()),o.linked_flag&&(null==(n=this.sessionRecording)||n.overrideLinkedFlag()),o.url_trigger&&(null==(i=this.sessionRecording)||i.overrideTrigger("url")),o.event_trigger&&(null==(s=this.sessionRecording)||s.overrideTrigger("event")));this.set_config({disable_session_recording:!1})}stopSessionRecording(){this.set_config({disable_session_recording:!0})}sessionRecordingStarted(){var e;return!(null==(e=this.sessionRecording)||!e.started)}captureException(e,t){var r=new Error("PostHog syntheticException"),n=this.exceptions.buildProperties(e,{handled:!0,syntheticException:r});return this.exceptions.sendExceptionEvent(Lo({},n,t))}loadToolbar(e){return this.toolbar.loadToolbar(e)}get_property(e){var t;return null==(t=this.persistence)?void 0:t.props[e]}getSessionProperty(e){var t;return null==(t=this.sessionPersistence)?void 0:t.props[e]}toString(){var e,t=null!==(e=this.config.name)&&void 0!==e?e:Cp;return t!==Cp&&(t=Cp+"."+t),t}_isIdentified(){var e,t;return"identified"===(null==(e=this.persistence)?void 0:e.get_property(Pc))||"identified"===(null==(t=this.sessionPersistence)?void 0:t.get_property(Pc))}Xr(){var e,t;return!("never"===this.config.person_profiles||"identified_only"===this.config.person_profiles&&!this._isIdentified()&&Qo(this.getGroups())&&(null==(e=this.persistence)||null==(e=e.props)||!e[oc])&&(null==(t=this.persistence)||null==(t=t.props)||!t[Ac]))}Jr(){return!0===this.config.capture_pageleave||"if_capture_pageview"===this.config.capture_pageleave&&(!0===this.config.capture_pageview||"history_change"===this.config.capture_pageview)}createPersonProfile(){this.Xr()||this.Qr("posthog.createPersonProfile")&&this.setPersonProperties({},{})}Qr(e){return"never"===this.config.person_profiles?(Vl.error(e+' was called, but process_person is set to "never". This call will be ignored.'),!1):(this.Zr(Ac,!0),!0)}jr(){if("always"===this.config.cookieless_mode)return!0;var e=this.consent.isOptedOut(),t=this.config.opt_out_persistence_by_default||"on_reject"===this.config.cookieless_mode;return this.config.disable_persistence||e&&!!t}ts(){var e,t,r,n,i=this.jr();return(null==(e=this.persistence)?void 0:e.wi)!==i&&(null==(r=this.persistence)||r.set_disabled(i)),(null==(t=this.sessionPersistence)?void 0:t.wi)!==i&&(null==(n=this.sessionPersistence)||n.set_disabled(i)),i}opt_in_capturing(e){var t,r,n;"always"!==this.config.cookieless_mode?("on_reject"===this.config.cookieless_mode&&this.consent.isExplicitlyOptedOut()&&(this.reset(!0),null==(r=this.sessionManager)||r.destroy(),this.sessionManager=new pp(this),this.persistence&&(this.sessionPropsManager=new hp(this,this.sessionManager,this.persistence)),this.sessionRecording=new Op(this),this.sessionRecording.startIfEnabledOrStop()),this.consent.optInOut(!0),this.ts(),this.Gr(),null==(t=this.sessionRecording)||t.startIfEnabledOrStop(),"on_reject"==this.config.cookieless_mode&&this.surveys.loadIfEnabled(),(Xo(null==e?void 0:e.captureEventName)||null!=e&&e.captureEventName)&&this.capture(null!==(n=null==e?void 0:e.captureEventName)&&void 0!==n?n:"$opt_in",null==e?void 0:e.captureProperties,{send_instantly:!0}),this.config.capture_pageview&&this.Vr()):Vl.warn('Consent opt in/out is not valid with cookieless_mode="always" and will be ignored')}opt_out_capturing(){var e,t;"always"!==this.config.cookieless_mode?("on_reject"===this.config.cookieless_mode&&this.consent.isOptedIn()&&this.reset(!0),this.consent.optInOut(!1),this.ts(),"on_reject"===this.config.cookieless_mode&&(this.register({distinct_id:Lc,$device_id:null}),null==(e=this.sessionManager)||e.destroy(),this.sessionManager=void 0,this.sessionPropsManager=void 0,null==(t=this.sessionRecording)||t.stopRecording(),this.sessionRecording=void 0,this.Vr())):Vl.warn('Consent opt in/out is not valid with cookieless_mode="always" and will be ignored')}has_opted_in_capturing(){return this.consent.isOptedIn()}has_opted_out_capturing(){return this.consent.isOptedOut()}get_explicit_consent_status(){var e=this.consent.consent;return e===Gu.GRANTED?"granted":e===Gu.DENIED?"denied":"pending"}is_capturing(){return"always"===this.config.cookieless_mode||("on_reject"===this.config.cookieless_mode?this.consent.isExplicitlyOptedOut()||this.consent.isOptedIn():!this.has_opted_out_capturing())}clear_opt_in_out_capturing(){this.consent.reset(),this.ts()}_is_bot(){return So?yp(So,this.config.custom_blocked_useragents):void 0}Vr(){To&&("visible"===To.visibilityState?this.Cr||(this.Cr=!0,this.capture("$pageview",{title:To.title},{send_instantly:!0}),this.Ir&&(To.removeEventListener("visibilitychange",this.Ir),this.Ir=null)):this.Ir||(this.Ir=this.Vr.bind(this),sc(To,"visibilitychange",this.Ir)))}debug(e){!1===e?(null==bo||bo.console.log("You've disabled debug mode."),this.set_config({debug:!1})):(null==bo||bo.console.log("You're now in debug mode. All calls to PostHog will be logged in your console.\nYou can disable this with `posthog.debug(false)`."),this.set_config({debug:!0}))}O(){var e,t,r,n,i,s,a=this.Ar||{};return"advanced_disable_flags"in a?!!a.advanced_disable_flags:!1!==this.config.advanced_disable_flags?!!this.config.advanced_disable_flags:!0===this.config.advanced_disable_decide?(Vl.warn("Config field 'advanced_disable_decide' is deprecated. Please use 'advanced_disable_flags' instead. The old field will be removed in a future major version."),!0):(r="advanced_disable_decide",n=Vl,i=(t="advanced_disable_flags")in(e=a)&&!Xo(e[t]),s=r in e&&!Xo(e[r]),i?e[t]:!!s&&(n&&n.warn("Config field '"+r+"' is deprecated. Please use '"+t+"' instead. The old field will be removed in a future major version."),e[r]))}Yr(e){if(rl(this.config.before_send))return e;var t=Ko(this.config.before_send)?this.config.before_send:[this.config.before_send],r=e;for(var n of t){if(r=n(r),rl(r)){var i="Event '"+e.event+"' was rejected in beforeSend function";return sl(e.event)?Vl.warn(i+". This can cause unexpected behavior."):Vl.info(i),null}r.properties&&!Qo(r.properties)||Vl.warn("Event '"+e.event+"' has no properties after beforeSend function, this is likely an error.")}return r}getPageViewId(){var e;return null==(e=this.pageViewManager.Vt)?void 0:e.pageViewId}captureTraceFeedback(e,t){this.capture("$ai_feedback",{$ai_trace_id:String(e),$ai_feedback_text:t})}captureTraceMetric(e,t,r){this.capture("$ai_metric",{$ai_trace_id:String(e),$ai_metric_name:t,$ai_metric_value:String(r)})}Or(e){var t=il(e)&&!e,r=Uu.H()&&"true"===Uu.q("ph_debug");return!t&&(!!r||e)}}!function(e,t){for(var r=0;r<t.length;r++)e.prototype[t[r]]=ec(e.prototype[t[r]])}(Fp,["identify"]);var Mp,Dp=(Mp=Ip[Cp]=new Fp,function(){function e(){e.done||(e.done=!0,Rp=!1,Jl(Ip,function(e){e._dom_loaded()}))}null!=To&&To.addEventListener?"complete"===To.readyState?e():sc(To,"DOMContentLoaded",e,{capture:!1}):bo&&Vl.error("Browser doesn't support `document.addEventListener` so PostHog couldn't be initialized")}(),Mp);const Up=Object.freeze(Object.defineProperty({__proto__:null,COPY_AUTOCAPTURE_EVENT:vu,Compression:yu,DisplaySurveyType:qf,PostHog:Fp,SurveyEventName:Bf,SurveyEventProperties:Vf,SurveyEventType:Uf,SurveyType:zf,default:Dp,posthog:Dp},Symbol.toStringTag,{value:"Module"}));return e.UserContext=vo,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e}({});
