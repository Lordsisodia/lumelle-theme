import{a as e,r as t,j as a,L as l,c as s}from"./lumelle-bundle.js";import{X as i}from"./lumelle-x-CwWf9wkU.js";
/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n=e("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),r=e("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),o=e=>encodeURI(s(e)),c=e=>{if(e.startsWith("video://"))return null;const t=o(e);if(!e.startsWith("/uploads/curler/"))return null;const a=t.replace(/\.[^.]+$/,"");return{avif:[640,960,1280].map(e=>`${a}-${e}.avif ${e}w`).join(", "),webp:[`${a}-640.webp 640w`,`${t} 960w`,`${a}-1280.webp 1280w`].join(", "),sizes:"(min-width: 1024px) 640px, 92vw",fallback:t}},d=t.memo(({gallery:e,activeImage:s,onSelect:d,productTitle:h,showLaunchBanner:u=!0,badges:m=[]})=>{const b=t.useRef(null),[{hasOverflow:p,canScrollLeft:g,canScrollRight:f},w]=t.useState(()=>({hasOverflow:!1,canScrollLeft:!1,canScrollRight:!1})),[x,v]=t.useState(!1),[y,j]=t.useState(s),N=t.useRef(null);t.useEffect(()=>{const e=b.current;if(!e)return;const t=()=>{const t=e.scrollWidth-e.clientWidth,a=t>1,l=a&&e.scrollLeft>1,s=a&&e.scrollLeft<t-1;w(e=>e.hasOverflow===a&&e.canScrollLeft===l&&e.canScrollRight===s?e:{hasOverflow:a,canScrollLeft:l,canScrollRight:s})};return t(),e.addEventListener("scroll",t,{passive:!0}),window.addEventListener("resize",t),()=>{e.removeEventListener("scroll",t),window.removeEventListener("resize",t)}},[e.length]);const k=e=>{const t=b.current;if(!t)return;const a=Math.min(240,.85*t.clientWidth);t.scrollBy({left:"left"===e?-a:a,behavior:"smooth"})},S=()=>{v(!1),document.body.style.overflow=""},z=t=>{j("prev"===t?t=>t>0?t-1:e.length-1:t=>t<e.length-1?t+1:0)};t.useEffect(()=>{const e=e=>{"Escape"===e.key&&x&&S(),"ArrowLeft"===e.key&&x&&z("prev"),"ArrowRight"===e.key&&x&&z("next")};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[x,e.length]);const $=h?.trim()?h.trim():"Product",L=`${$} — product photo ${s+1}`,C=`${$} — product video`;return a.jsxs(a.Fragment,{children:[a.jsxs("section",{id:"media",className:"bg-white",children:[a.jsx("div",{id:"pdp-hero-gallery",className:"h-0 scroll-mt-24"}),a.jsxs("div",{className:"w-full flex flex-col gap-3",children:[u?a.jsxs(l,{to:"/product/satin-overnight-curler",className:"mt-2 mb-2 inline-flex w-auto max-w-fit items-center gap-2 rounded-full bg-white px-3.5 py-1.5 text-[11px] font-semibold uppercase tracking-[0.22em] text-semantic-text-primary shadow-soft ring-1 ring-semantic-accent-cta/50 transition hover:-translate-y-[1px] hover:shadow-md focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-semantic-legacy-brand-cocoa/50 md:mt-3","aria-label":"New heatless curler launched — view the satin overnight heatless curler set",children:[a.jsx("span",{className:"h-2 w-2 rounded-full bg-semantic-legacy-brand-cocoa","aria-hidden":!0}),"New Heatless Curler Launched",a.jsx("span",{"aria-hidden":!0,children:"→"})]}):null,a.jsxs("div",{className:"relative aspect-square w-full overflow-hidden rounded-[2rem] border border-semantic-legacy-brand-blush/60 bg-white md:bg-semantic-legacy-brand-blush/20 group",children:[e[s]?.startsWith("video://")?a.jsx("iframe",{src:e[s].replace("video://",""),title:C,className:"absolute inset-0 h-full w-full rounded-[2rem]",allowFullScreen:!0,loading:"lazy"}):a.jsx("button",{type:"button",onClick:()=>(j(s),v(!0),void(document.body.style.overflow="hidden")),"aria-label":"View full size",className:"relative w-full h-full bg-transparent border-0 p-0 cursor-zoom-in",onTouchStart:e=>{const t=e.touches[0];N.current={x:t.clientX,y:t.clientY,time:Date.now()}},onTouchMove:e=>{N.current},onTouchEnd:t=>{if(!N.current)return;const a=t.changedTouches[0],l=N.current,i=a.clientX-l.x,n=a.clientY-l.y,r=Date.now()-l.time;N.current=null;if(Math.abs(i)<10&&Math.abs(n)<10&&r<300)return;Math.abs(i)>1.5*Math.abs(n)&&Math.abs(i)>30&&d(i>0?s>0?s-1:e.length-1:s<e.length-1?s+1:0)},children:(()=>{const t=c(e[s]),l=a.jsx("img",{src:t?.fallback??o(e[s]),alt:L,className:"w-full h-full object-contain",width:960,height:960,draggable:"false",loading:"eager",decoding:"async",fetchPriority:"high"});return t?a.jsxs("picture",{children:[a.jsx("source",{type:"image/avif",srcSet:t.avif,sizes:t.sizes}),a.jsx("source",{type:"image/webp",srcSet:t.webp,sizes:t.sizes}),l]}):l})()}),e.length>1&&!x&&a.jsx("div",{className:"absolute top-3 right-3 z-10 inline-flex items-center rounded-full bg-black/60 px-2.5 py-1 text-xs font-semibold text-white backdrop-blur-sm shadow-lg",children:a.jsxs("span",{children:[s+1,"/",e.length]})}),e.length>1&&!x&&a.jsxs(a.Fragment,{children:[a.jsx("button",{type:"button",onClick:()=>d(s>0?s-1:e.length-1),disabled:e.length<=1,className:"absolute left-3 top-1/2 -translate-y-1/2 z-10 inline-flex h-11 w-11 items-center justify-center rounded-full bg-white/90 text-semantic-text-primary shadow-lg backdrop-blur opacity-100 transition hover:bg-white md:opacity-0 md:group-hover:opacity-100 disabled:opacity-30 disabled:cursor-not-allowed","aria-label":"Previous image",children:a.jsx(n,{className:"h-5 w-5",strokeWidth:2.5})}),a.jsx("button",{type:"button",onClick:()=>d(s<e.length-1?s+1:0),disabled:e.length<=1,className:"absolute right-3 top-1/2 -translate-y-1/2 z-10 inline-flex h-11 w-11 items-center justify-center rounded-full bg-white/90 text-semantic-text-primary shadow-lg backdrop-blur opacity-100 transition hover:bg-white md:opacity-0 md:group-hover:opacity-100 disabled:opacity-30 disabled:cursor-not-allowed","aria-label":"Next image",children:a.jsx(r,{className:"h-5 w-5",strokeWidth:2.5})})]})]}),m&&m.length>0&&a.jsx("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:m.map((e,t)=>{const l={peach:"bg-semantic-accent-cta text-semantic-legacy-brand-cocoa",cocoa:"bg-semantic-legacy-brand-cocoa text-white",rose:"bg-rose-500 text-white"}[e.variant||"peach"];return a.jsx("span",{className:`inline-flex items-center rounded-full px-3 py-1 text-[10px] font-semibold uppercase tracking-[0.2em] shadow-soft ${l}`,children:e.label},`${e.label}-${t}`)})}),a.jsxs("div",{className:"relative mt-4 w-full",children:[a.jsx("div",{ref:b,className:"w-full overflow-x-auto overscroll-x-contain pb-1 [&::-webkit-scrollbar]:hidden",style:{scrollbarWidth:"none"},children:a.jsx("div",{className:"inline-flex max-w-full gap-2 px-1 snap-x snap-mandatory touch-pan-x",children:e.map((e,t)=>{const l=e.startsWith("video://"),i=c(e);return a.jsx("button",{type:"button",onClick:()=>d(t),className:"h-20 w-20 shrink-0 overflow-hidden rounded-2xl border snap-start md:h-16 md:w-16 "+(t===s?"border-semantic-legacy-brand-cocoa ring-2 ring-semantic-accent-cta/30":"border-semantic-legacy-brand-blush/60"),"aria-label":`Show media ${t+1}`,children:l?a.jsxs("div",{className:"relative h-full w-full bg-semantic-legacy-brand-blush/40",children:[a.jsx("img",{src:"/uploads/luminele/product-feature-03.webp",alt:`${h} - video thumbnail`,className:"h-full w-full object-cover"}),a.jsx("span",{className:"absolute inset-0 flex items-center justify-center",children:a.jsx("span",{className:"inline-flex h-8 w-8 items-center justify-center rounded-full bg-white/90 text-semantic-text-primary shadow-soft",children:"▶"})})]}):i?a.jsxs("picture",{children:[a.jsx("source",{type:"image/avif",srcSet:i.avif,sizes:"80px"}),a.jsx("source",{type:"image/webp",srcSet:i.webp,sizes:"80px"}),a.jsx("img",{src:i.fallback,alt:`${h} - product photo ${t+1}`,className:"h-full w-full object-cover",width:160,height:160,loading:"lazy",decoding:"async"})]}):a.jsx("img",{src:o(e),alt:`${h} - product photo ${t+1}`,className:"h-full w-full object-cover",width:160,height:160,loading:"lazy",decoding:"async"})},e)})})}),p?a.jsxs(a.Fragment,{children:[a.jsx("div",{"aria-hidden":!0,className:"pointer-events-none absolute inset-y-0 left-0 w-10 bg-gradient-to-r from-white via-white/60 to-transparent transition-opacity "+(g?"opacity-100":"opacity-0")}),a.jsx("div",{"aria-hidden":!0,className:"pointer-events-none absolute inset-y-0 right-0 w-10 bg-gradient-to-l from-white via-white/60 to-transparent transition-opacity "+(f?"opacity-100":"opacity-0")}),g?a.jsx("button",{type:"button",onClick:()=>k("left"),className:"hidden md:inline-flex absolute left-1 top-1/2 -translate-y-1/2 h-9 w-9 items-center justify-center rounded-full bg-white/90 text-semantic-text-primary shadow-soft ring-1 ring-semantic-legacy-brand-blush/50 backdrop-blur transition hover:bg-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-semantic-legacy-brand-cocoa/50","aria-label":"Scroll product media thumbnails left",children:"‹"}):null,f?a.jsx("button",{type:"button",onClick:()=>k("right"),className:"hidden md:inline-flex absolute right-1 top-1/2 -translate-y-1/2 h-9 w-9 items-center justify-center rounded-full bg-white/90 text-semantic-text-primary shadow-soft ring-1 ring-semantic-legacy-brand-blush/50 backdrop-blur transition hover:bg-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-semantic-legacy-brand-cocoa/50","aria-label":"Scroll product media thumbnails right",children:"›"}):null]}):null]})]})]}),x&&a.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/95 backdrop-blur-sm",onClick:S,role:"dialog","aria-modal":"true","aria-label":"Image viewer",children:[a.jsx("button",{type:"button",onClick:S,className:"absolute top-4 right-4 z-10 inline-flex h-10 w-10 items-center justify-center rounded-full bg-white/10 text-white backdrop-blur hover:bg-white/20 transition","aria-label":"Close image viewer",children:a.jsx(i,{className:"h-6 w-6"})}),a.jsx("button",{type:"button",onClick:e=>{e.stopPropagation(),z("prev")},className:"absolute left-4 top-1/2 -translate-y-1/2 z-10 inline-flex h-12 w-12 items-center justify-center rounded-full bg-white/10 text-white backdrop-blur hover:bg-white/20 transition","aria-label":"Previous image",children:a.jsx(n,{className:"h-6 w-6"})}),a.jsx("button",{type:"button",onClick:e=>{e.stopPropagation(),z("next")},className:"absolute right-4 top-1/2 -translate-y-1/2 z-10 inline-flex h-12 w-12 items-center justify-center rounded-full bg-white/10 text-white backdrop-blur hover:bg-white/20 transition","aria-label":"Next image",children:a.jsx(r,{className:"h-6 w-6"})}),a.jsx("div",{className:"relative h-[90vh] w-[90vw] max-w-4xl",onClick:e=>e.stopPropagation(),children:e[y]?.startsWith("video://")?a.jsx("iframe",{src:e[y].replace("video://",""),title:`${h} video`,className:"w-full h-full rounded-2xl",allowFullScreen:!0}):(()=>{const t=c(e[y]),l=a.jsx("img",{src:t?.fallback??o(e[y]),alt:`${h} — image ${y+1} of ${e.length}`,className:"w-full h-full object-contain",loading:"eager"});return t?a.jsxs("picture",{children:[a.jsx("source",{type:"image/avif",srcSet:t.avif,sizes:"(max-width: 768px) 100vw, 80vw"}),a.jsx("source",{type:"image/webp",srcSet:t.webp,sizes:"(max-width: 768px) 100vw, 80vw"}),l]}):l})()}),a.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2",children:a.jsxs("span",{className:"text-sm font-semibold text-white/80",children:[y+1," / ",e.length]})})]})]})});export{d as HeroMedia};
